(()=>{"use strict";const e=(()=>{const e=e=>`${e.slice(0,1)},${e.slice(1,2)}`,t=(e,t,r)=>{const n=document.getElementsByClassName(e)[t-1];n&&(n.style.border=`1px solid ${r}`)};return{isTargetInArray:(e,t)=>{let r=!1;if(JSON.stringify(e)===JSON.stringify(t)&&(r=!0),!e)return r;if(!t)return r;for(let n=0;n<e.length;n++){const s=e[n];JSON.stringify(s)===JSON.stringify(t)&&(r=!0)}return r},changeCoordColor:t,indicateSunk:(r,n)=>{const{currentCoords:s}=r;if("number"==typeof s[0])t(e(s),n,"red");else for(let r=0;r<s.length;r++)t(e(s[r]),n,"red")},classToArray:e=>{const t=[],r=e.slice(0,1),n=e.slice(2,3);return t.push(Number(r)),t.push(Number(n)),t},coordToClass:e}})(),t=(()=>{const t=(e,t,r)=>{let n=t;const s=e;return{isSunk:()=>s===n,hit:()=>n++,currentHits:()=>n,currentCoords:r,shipLength:s}};return{Ship:t,Gameboard:()=>{const r=[],n=[];return{receiveAttack:(t,s)=>{const o=Object.entries(s.coordinates);r.push(t);for(let r=0;r<o.length;r++){let c=!1;const a=o[r][1],i=o[r][0];if(e.isTargetInArray(a,t)){if(c=!0,n.push(t),"carrier"===i&&(s.carrier.hit(),s.carrier.isSunk()))return s.carrier;if("battleShip"===i&&(s.battleShip.hit(),s.battleShip.isSunk()))return s.battleShip;if("battleShip1"===i&&(s.battleShip1.hit(),s.battleShip1.isSunk()))return s.battleShip1;if("cruiser"===i&&(s.cruiser.hit(),s.cruiser.isSunk()))return s.cruiser;if("cruiser1"===i&&(s.cruiser1.hit(),s.cruiser1.isSunk()))return s.cruiser1;if("cruiser2"===i&&(s.cruiser2.hit(),s.cruiser2.isSunk()))return s.cruiser2;if("destroyer"===i&&(s.destroyer.hit(),s.destroyer.isSunk()))return s.destroyer;if("destroyer1"===i&&(s.destroyer1.hit(),s.destroyer1.isSunk()))return s.destroyer1;if("destroyer2"===i&&(s.destroyer2.hit(),s.destroyer2.isSunk()))return s.destroyer2;if("destroyer3"===i&&(s.destroyer3.hit(),s.destroyer3.isSunk()))return s.destroyer3}if(!0===c)break}},deployShips:(e,r,n,s,o,c,a,i,d,l)=>{const u={carrier:e,battleShip:r,battleShip1:n,cruiser:s,cruiser1:o,cruiser2:c,destroyer:a,destroyer1:i,destroyer2:d,destroyer3:l};return{carrier:t(4,0,u.carrier),battleShip:t(3,0,u.battleShip),battleShip1:t(3,0,u.battleShip1),cruiser:t(2,0,u.cruiser),cruiser1:t(2,0,u.cruiser1),cruiser2:t(2,0,u.cruiser2),destroyer:t(1,0,u.destroyer),destroyer1:t(1,0,u.destroyer1),destroyer2:t(1,0,u.destroyer2),destroyer3:t(1,0,u.destroyer3),coordinates:u}},receivedAttacks:r,successAttacks:n,checkSunk:e=>{return!((t=e).carrier.currentCoords&&!t.carrier.isSunk()||t.battleShip.currentCoords&&!t.battleShip.isSunk()||t.battleShip1.currentCoords&&!t.battleShip1.isSunk()||t.cruiser.currentCoords&&!t.cruiser.isSunk()||t.cruiser1.currentCoords&&!t.cruiser1.isSunk()||t.cruiser2.currentCoords&&!t.cruiser2.isSunk()||t.destroyer.currentCoords&&!t.destroyer.isSunk()||t.destroyer1.currentCoords&&!t.destroyer1.isSunk()||t.destroyer2.currentCoords&&!t.destroyer2.isSunk()||t.destroyer3.currentCoords&&!t.destroyer3.isSunk());var t}}}}})(),r=(()=>{const r=(e,t,r)=>{let n=0;"cpu"===r&&(n=1);const s=document.getElementsByClassName(e)[n];s&&(s.textContent=!1===t?"â€¢":"X")},n=(t,r)=>{let n=0;"cpu"===r&&(n=1);const s=e.coordToClass(t),o=document.getElementsByClassName(s)[n];o&&o.replaceWith(o.cloneNode(!0))},s=e=>{const t=[];for(let n=0;n<e.length;n++)(r=e[n])[0]<0||r[1]<0||r[0]>9||r[1]>9||t.push(e[n]);var r;return t},o=e=>{const t=[],r=[e[0]-1,e[1]],n=[e[0]+1,e[1]],s=[e[0],e[1]+1],o=[e[0],e[1]-1];return t.push(r,n,s,o),t},c=(t,c,a,i,d)=>{const l=[];if("object"==typeof t[0])for(let e=0;e<t.length;e++)l.push(o(t[e]));else l.push(o(t));const u=s(l.flat());for(let t=0;t<u.length;t++)e.isTargetInArray(d,u[t])||(r(u[t],!1,i),n(u[t],i),c(u[t],a))},a=e=>{const t=[],r=[e[0]+1,e[1]+1],n=[e[0]+1,e[1]+-1],s=[e[0]-1,e[1]+1],o=[e[0]-1,e[1]-1];return t.push(r,n,s,o),t},i=(e,t,o)=>{const c=a(e),i=s(c);for(let e=0;e<i.length;e++)r(i[e],!1,o),n(i[e],o),t(i[e],!0)};return{Player:(r,n)=>{const s=r,o=n,a=t.Gameboard(),i=a.deployShips(...n);return{playerName:s,playerCoords:o,playerBoard:a,playerShips:i,receiveAttack:t=>{const r=a.receiveAttack(t,i);r&&(e.indicateSunk(r,1),c(r.currentCoords,a.receiveAttack,i,"player",a.successAttacks))}}},cpuPlayer:(n,s)=>{const o=n,a=s,d=t.Gameboard(),l=d.deployShips(...s),u=[],p=(t,n)=>{const s=e=>Math.floor(Math.random()*e),c=[s(10),s(10)];if(e.isTargetInArray(u,c)&&!0!==n)return p();return(t=>{o.receiveAttack(t),u.push(t);const n=o.playerBoard.successAttacks;return e.isTargetInArray(n,t)?(r(t,!0,"player"),i(t,p,"player"),t):r(t,!1,"player")})(t||c)};return{attackPlayer:p,cpuBoard:d,cpuShips:l,cpuCoords:a,usedCoords:u,receiveAttack:t=>{const r=d.receiveAttack(t,l);r&&(e.indicateSunk(r,2),c(r.currentCoords,d.receiveAttack,l,"cpu",d.successAttacks))}}},visualIndicators:r,attackCorners:i,attackAround:c,returnCorners:a,returnSides:o,validateCoords:s}})(),n=(e,t,n)=>{const s=r.Player(e,t);return{Player:s,cpuPlayer:r.cpuPlayer(s,n)}},s=(()=>{const t=(t,n)=>{const s=n.Player.playerShips.coordinates,o=n.cpuPlayer.cpuShips.coordinates,c=e=>n.Player.receiveAttack(e),a=e=>n.cpuPlayer.receiveAttack(e),i=(t,r,n)=>{let s=!1;if(e.isTargetInArray(Object.values(t),r))return n(r),s=!0,!0;for(let o=0;o<t.length;o++){const c=t[o];if(e.isTargetInArray(c,r)){n(r),s=!0;break}}return s},d=(e,t)=>(t(e),!1),l=t=>{const n=t.target.parentElement.className,l=t.target.className,u=e.classToArray(l);if("grid-1"===n){const e=Object.values(s).filter((e=>void 0!==e));!0===i(e,u,c)?(r.visualIndicators(l,!0,"player"),r.attackCorners(u,c,"player")):(d(u,c),r.visualIndicators(l,!1,"player"))}if("grid-2"===n){const e=Object.values(o).filter((e=>void 0!==e));!0===i(e,u,a)?(r.visualIndicators(l,!0,"cpu"),r.attackCorners(u,a,"cpu")):(d(u,a),r.visualIndicators(l,!1,"cpu"))}};for(let e=0;e<t.length;e++)t[e].addEventListener("click",l,{once:!0})};return{startGame:(e,r,s,o)=>{const c=n("example",s,o);return"shown-grid"!==e.className&&t(e.childNodes,c),"shown-grid"!==r.className&&t(r.childNodes,c),{currentGame:c,gridContainer1:e,gridContainer2:r}},displayGrid:(e,t)=>{(r=>{const n=r=>{if(10!==r){for(let n=0;n<10;n++){const s=document.createElement("div");s.className=`${r},${n}`;const o=document.createElement("div");o.className=`${r},${n}`,e&&e.appendChild(s),t&&t.appendChild(o)}n(r+1)}};n(0)})()},genDOMElements:()=>({genGrid:(t,r)=>{const n=document.createElement("section");n.className="main-container";const o=document.querySelector("main");o&&o.appendChild(n);const c=document.createElement("div");c.className="grids-container",n&&n.appendChild(c);const a=document.createElement("h3");a.textContent=`Player's ${t} Grid`,c.appendChild(a);const i=document.createElement("div");i.className="grid-wrapper",((e,t)=>{const r=document.createElement("section"),n=document.createElement("section");r.classList.add("X"),n.classList.add("Y");const s=["A","B","C","D","E","F","G","H","I","J"];for(let e=1;e<=10;e++){const t=document.createElement("div");t.textContent=e,n.appendChild(t);const o=document.createElement("div");o.textContent=s[e-1],r.appendChild(o)}e.appendChild(r),t.appendChild(n)})(c,i),c.appendChild(i);const d=document.createElement("div");return d.className=`grid-${t}`,i.appendChild(d),1===t?s.displayGrid(d,null):s.displayGrid(null,d),r&&(d.className="shown-grid",((t,r)=>{const n=(e=>{const t=[];for(let r=0;r<e.length;r++){const n=e[r];"object"==typeof n[0]?t.push(...n):t.push(n)}return t})(t);for(let t=0;t<n.length;t++)e.changeCoordColor(e.coordToClass(n[t]),r,"green")})(r,t)),d},deleteElements:e=>{const t=document.getElementsByClassName("main-container")[e];t&&t.remove()},genButtons:()=>{(()=>{const e=document.createElement("div");e.classList.add("button-wrapper");const t=document.getElementsByClassName("grids-container")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="random-button",e.textContent="Randomize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="start-button",e.textContent="Start Game";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="customize-button",e.textContent="Customize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})()},genCoordInputs:()=>{const e=document.getElementsByClassName("main-container")[0],t=document.createElement("label");t.classList.add("inputs-container"),t.htmlFor="select-ships",t.textContent="Set Initial Coord",e.appendChild(t);const r=document.createElement("select");r.classList.add("select-ships"),t.appendChild(r);const n=document.createElement("div");n.classList.add("input-wrapper"),t.appendChild(n);const s=document.createElement("input");s.classList.add("coords-input"),n.appendChild(s);const o=document.createElement("p");o.classList.add("input-text"),o.textContent=",",n.appendChild(o);const c=document.createElement("input");c.classList.add("coords-input"),n.appendChild(c);const a=document.createElement("button");a.classList.add("apply-coords"),a.textContent="Apply",t.appendChild(a);const i=document.createElement("option");i.value="carrier",i.textContent="Carrier",r.appendChild(i);const d=document.createElement("option");d.value="battleship1",d.textContent="Battleship 1",r.appendChild(d);const l=document.createElement("option");l.value="battleship2",l.textContent="Battleship 2",r.appendChild(l);const u=document.createElement("option");u.value="cruiser1",u.textContent="Cruiser 1",r.appendChild(u);const p=document.createElement("option");p.value="cruiser2",p.textContent="Cruiser 2",r.appendChild(p);const m=document.createElement("option");m.value="cruiser3",m.textContent="Cruiser 3",r.appendChild(m);const h=document.createElement("option");h.value="destroyer1",h.textContent="Destroyer 1",r.appendChild(h);const y=document.createElement("option");y.value="destroyer2",y.textContent="Destroyer 2",r.appendChild(y);const C=document.createElement("option");C.value="destroyer3",C.textContent="Destroyer 3",r.appendChild(C);const g=document.createElement("option");g.value="destroyer4",g.textContent="Destroyer 4",r.appendChild(g)}}),endGame:()=>{const e=document.getElementsByClassName("grid-1")[0],t=document.getElementsByClassName("grid-2")[0];e&&e.replaceWith(e.cloneNode(!0)),t&&t.replaceWith(t.cloneNode(!0))},createModal:(e,t)=>{const r=document.querySelector("body"),n=document.createElement("dialog");n.classList.add("modal"),r.appendChild(n);const s=document.createElement("div");n.appendChild(s),s.textContent=t?`${e} won, try again!`:`Congratulations ${e}, you won!`;const o=document.createElement("button");o.textContent="New Game",o.addEventListener("click",(()=>window.location.reload())),n.appendChild(o),n&&n.showModal()}}})();(()=>{const t=s.genDOMElements(),n=e=>{if(e){const t=e.filter((e=>"object"==typeof e[0])),r=e.filter((e=>"number"==typeof e[0]));return t.flat().concat(r)}},o=e=>{const t=e=>{const t=[...r.returnCorners(e),...r.returnSides(e),e];return r.validateCoords(t)},n=[];if("object"!=typeof e[0]){const r=t(e);return n.push(...r),[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))}for(let r=0;r<e.length;r++){const s=t(e[r]);n.push(...s)}return[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))},c=()=>{const t=e=>Math.floor(Math.random()*e),r=(e,r,n)=>{if(n){const t=[n[0]+1,n[1]],r=[n[0],n[1]+1];return"v"===e?t:r}let s;return s="v"===e?[t(10-r),t(10)]:[t(10),t(10-r)],1===r&&(s=[t(10),t(10)]),s},s=(o,c)=>{const a=[],i=0===t(2)?"h":"v",d=n(c),l=()=>{const t=r(i,o);e.isTargetInArray(d,t)?l():a.push(t)};for(let e=0;e<o;e++){const e=a[a.length-1],t=r(i,o,e);e?a.push(t):l()}if(1!==a.length){let t=!0;for(let r=0;r<a.length;r++){const n=a[r];e.isTargetInArray(d,n)&&(t=!1)}return!1===t?s(o,d):a}return a[0]};return{genBattleships:()=>{const e=[],t=s(4,e);e.push(o(t));const r=s(3,e);e.push(o(r));const n=s(3,e);e.push(o(n));const c=s(2,e);e.push(o(c));const a=s(2,e);e.push(o(a));const i=s(2,e);e.push(o(i));const d=s(1,e);e.push(o(d));const l=s(1,e);e.push(o(l));const u=s(1,e);e.push(o(u));const p=s(1,e);return e.push(o(p)),{coords:[t,r,n,c,a,i,d,l,u,p],usedCoords:e}},genShipCoord:s,surroundCoords:o}},a=e=>{if("v"==(e.coords[0][0]+1===e.coords[1][0]?"v":"h")){let t=[e.firstCoord];for(let r=0;r<e.coords.length-1;r++){const e=[t[r][0],t[r][1]+1];t=t.concat([e])}return t}let t=[e.firstCoord];for(let r=0;r<e.coords.length-1;r++){const e=[t[r][0]+1,t[r][1]];t=t.concat([e])}return t},i=(t,s)=>{let c=!0;const a=t.coords,{coordsPosition:i}=t,d=[...s];d[i]=[];const l=n(d);if(r.validateCoords(a).length!==a.length)return s;for(let t=0;t<a.length;t++)e.isTargetInArray(l,a[t])&&(c=!1);const u=o(a);return!0===c?(d[i]=u,d):s},d=(e,r)=>{let n;if(t.deleteElements(0),!0!==r){const r=c().genBattleships().coords;n=s.startGame(t.genGrid(1,e),t.genGrid(2),e,r)}else n=s.startGame(t.genGrid(1,e),t.genGrid(2),e,e);const o=n.currentGame.Player,a=n.currentGame.cpuPlayer,i=((e,t)=>{const r=e.playerShips,n=t.cpuShips;return{turnsLogic:()=>{let o=!1;return t.attackPlayer(),e.playerBoard.checkSunk(r)&&(s.endGame(),s.createModal("Player2",!0),o=!0),t.cpuBoard.checkSunk(n)&&(s.endGame(),s.createModal("Player1"),o=!0),o}}})(o,a);return((e,t)=>{for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].addEventListener("click",(()=>{e.turnsLogic()}),{once:!0})})(i,n.gridContainer2),{playerObj:o,cpuObj:a,currentTurn:i}},l=(r,s,o,u)=>{t.genGrid(1,r),t.genButtons(),((r,s,o,c)=>{const d=r.filter((e=>"object"==typeof e[0])),l=n(d),u=n=>{const o=n.target.className,l=(t=>{for(let r=0;r<d.length;r++){const n=d[r],s=[n,r];if(e.isTargetInArray(n,t))return s}})(e.classToArray(o)),u={coords:l[0],firstCoord:l[0][0],coordsPosition:l[1]};return u.coords=a(u),i(u,s)!==s?(t.deleteElements(0),c(((e,t)=>{const r=[...t];return r.splice(e.coordsPosition,1,e.coords),r})(u,r),!1,i(u,s),!0)):(t=>{for(let r=0;r<t.length;r++){const n=e.coordToClass(t[r]),s=document.getElementsByClassName(n)[0];s.classList.add("invalid-rotation"),setTimeout((()=>{s.classList.remove("invalid-rotation")}),1e3)}})(l[0])};for(let t=0;t<l.length;t++){const r=e.coordToClass(l[t]),n=document.getElementsByClassName(r)[o];n&&n.addEventListener("click",u)}})(r,o,0,l);const p=document.getElementsByClassName("start-button")[0],m=document.getElementsByClassName("random-button")[0],h=document.getElementsByClassName("customize-button")[0];m&&m.addEventListener("click",(()=>{(e=>{t.deleteElements(0);const r=c().genBattleships(),n=r.coords,s=r.usedCoords;l(n,!1,s)})()})),h&&(h.addEventListener("click",(()=>{t.genCoordInputs()}),{once:!0}),u&&h.click()),p&&p.addEventListener("click",(()=>{d(r,s)}))};return{singlePlayer:d,setupDOM:()=>{const e=c().genBattleships(),t=e.coords,{usedCoords:r}=e;l(t,!1,r)},genCoords:c,genInitialElements:l,rotateCoords:a}})().setupDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFBYyxNQUdsQixNQThCTUMsRUFBZ0JDLEdBQVEsR0FBR0EsRUFBSUMsTUFBTSxFQUFHLE1BQU1ELEVBQUlDLE1BQU0sRUFBRyxLQUUzREMsRUFBbUIsQ0FBQ0MsRUFBV0MsRUFBWUMsS0FDL0MsTUFBTUMsRUFDSkMsU0FBU0MsdUJBQXVCTCxHQUFXQyxFQUFhLEdBRXRERSxJQUFjQSxFQUFhRyxNQUFNQyxPQUFTLGFBQWFMLElBQU8sRUFlcEUsTUFBTyxDQUNMTSxnQkFwRHNCLENBQUNYLEVBQUtZLEtBQzVCLElBQUlDLEdBQVcsRUFJZixHQUZJQyxLQUFLQyxVQUFVZixLQUFTYyxLQUFLQyxVQUFVSCxLQUFTQyxHQUFXLElBRTFEYixFQUFLLE9BQU9hLEVBRWpCLElBQUtELEVBQVEsT0FBT0MsRUFFcEIsSUFBSyxJQUFJRyxFQUFJLEVBQUdBLEVBQUloQixFQUFJaUIsT0FBUUQsSUFBSyxDQUNuQyxNQUFNRSxFQUFVbEIsRUFBSWdCLEdBRWhCRixLQUFLQyxVQUFVRyxLQUFhSixLQUFLQyxVQUFVSCxLQUFTQyxHQUFXLEVBQ3JFLENBRUEsT0FBT0EsQ0FBUSxFQXNDZlgsbUJBQ0FpQixhQWZtQixDQUFDQyxFQUFNaEIsS0FDMUIsTUFBTSxjQUFFaUIsR0FBa0JELEVBRTFCLEdBQWdDLGlCQUFyQkMsRUFBYyxHQUV2Qm5CLEVBQWlCSCxFQUFhc0IsR0FBZ0JqQixFQUFZLFlBRTFELElBQUssSUFBSVksRUFBSSxFQUFHQSxFQUFJSyxFQUFjSixPQUFRRCxJQUN4Q2QsRUFBaUJILEVBQWFzQixFQUFjTCxJQUFLWixFQUFZLE1BQy9ELEVBT0ZrQixhQXJDb0JDLElBQ3BCLE1BQU1DLEVBQWEsR0FFYkMsRUFBSUYsRUFBV3RCLE1BQU0sRUFBRyxHQUN4QnlCLEVBQUlILEVBQVd0QixNQUFNLEVBQUcsR0FLOUIsT0FIQXVCLEVBQVdHLEtBQUtDLE9BQU9ILElBQ3ZCRCxFQUFXRyxLQUFLQyxPQUFPRixJQUVoQkYsQ0FBVSxFQTZCakJ6QixlQUVILEVBN0RtQixHQStEZDhCLEVBQWMsTUFDbEIsTUFBTUMsRUFBTyxDQUFDQyxFQUFjQyxFQUFZQyxLQVF0QyxJQUFJQyxFQUFXRixFQUVmLE1BQU1HLEVBQWFKLEVBUW5CLE1BQU8sQ0FBRUssT0FOTSxJQUFnQkQsSUFBWUQsRUFNMUJHLElBSkwsSUFBTUgsSUFJSUksWUFGRixJQUFNSixFQUVTYixjQWpCYlksRUFpQjRCRSxhQUFZLEVBb0toRSxNQUFPLENBQUVMLE9BQU1TLFVBaktHLEtBQ2hCLE1BNERNQyxFQUFrQixHQUVsQkMsRUFBaUIsR0F5RnZCLE1BQU8sQ0FDTEMsY0F4Rm9CLENBQUNDLEVBQWFDLEtBQ2xDLE1BQU1DLEVBQWVDLE9BQU9DLFFBQVFILEVBQVlJLGFBQ2hEUixFQUFnQmIsS0FBS2dCLEdBRXJCLElBQUssSUFBSTNCLEVBQUksRUFBR0EsRUFBSTZCLEVBQWE1QixPQUFRRCxJQUFLLENBQzVDLElBQUlpQyxHQUFVLEVBRWQsTUFBTUMsRUFBWUwsRUFBYTdCLEdBQUcsR0FFNUJtQyxFQUFXTixFQUFhN0IsR0FBRyxHQUVqQyxHQUFJbEIsRUFBWWEsZ0JBQWdCdUMsRUFBV1AsR0FBYyxDQU12RCxHQUxBTSxHQUFVLEVBRVZSLEVBQWVkLEtBQUtnQixHQUdILFlBQWJRLElBQ0ZQLEVBQVlRLFFBQVFmLE1BQ2hCTyxFQUFZUSxRQUFRaEIsVUFBVSxPQUFPUSxFQUFZUSxRQUV2RCxHQUFpQixlQUFiRCxJQUNGUCxFQUFZUyxXQUFXaEIsTUFDbkJPLEVBQVlTLFdBQVdqQixVQUFVLE9BQU9RLEVBQVlTLFdBRTFELEdBQWlCLGdCQUFiRixJQUNGUCxFQUFZVSxZQUFZakIsTUFDcEJPLEVBQVlVLFlBQVlsQixVQUMxQixPQUFPUSxFQUFZVSxZQUV2QixHQUFpQixZQUFiSCxJQUNGUCxFQUFZVyxRQUFRbEIsTUFDaEJPLEVBQVlXLFFBQVFuQixVQUFVLE9BQU9RLEVBQVlXLFFBRXZELEdBQWlCLGFBQWJKLElBQ0ZQLEVBQVlZLFNBQVNuQixNQUNqQk8sRUFBWVksU0FBU3BCLFVBQVUsT0FBT1EsRUFBWVksU0FFeEQsR0FBaUIsYUFBYkwsSUFDRlAsRUFBWWEsU0FBU3BCLE1BQ2pCTyxFQUFZYSxTQUFTckIsVUFBVSxPQUFPUSxFQUFZYSxTQUV4RCxHQUFpQixjQUFiTixJQUNGUCxFQUFZYyxVQUFVckIsTUFDbEJPLEVBQVljLFVBQVV0QixVQUFVLE9BQU9RLEVBQVljLFVBRXpELEdBQWlCLGVBQWJQLElBQ0ZQLEVBQVllLFdBQVd0QixNQUNuQk8sRUFBWWUsV0FBV3ZCLFVBQVUsT0FBT1EsRUFBWWUsV0FFMUQsR0FBaUIsZUFBYlIsSUFDRlAsRUFBWWdCLFdBQVd2QixNQUNuQk8sRUFBWWdCLFdBQVd4QixVQUFVLE9BQU9RLEVBQVlnQixXQUUxRCxHQUFpQixlQUFiVCxJQUNGUCxFQUFZaUIsV0FBV3hCLE1BQ25CTyxFQUFZaUIsV0FBV3pCLFVBQVUsT0FBT1EsRUFBWWlCLFVBRTVELENBRUEsSUFBZ0IsSUFBWlosRUFBa0IsS0FDeEIsR0E0QkFhLFlBekprQixDQUNsQkMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsS0FFQSxNQUFNeEIsRUFBYyxDQUNsQkksUUFBU1csRUFDVFYsV0FBWVcsRUFDWlYsWUFBYVcsRUFDYlYsUUFBU1csRUFDVFYsU0FBVVcsRUFDVlYsU0FBVVcsRUFDVlYsVUFBV1csRUFDWFYsV0FBWVcsRUFDWlYsV0FBWVcsRUFDWlYsV0FBWVcsR0F1QmQsTUFBTyxDQUNMcEIsUUFyQmN0QixFQUFLLEVBQUcsRUFBR2tCLEVBQVlJLFNBc0JyQ0MsV0FwQmlCdkIsRUFBSyxFQUFHLEVBQUdrQixFQUFZSyxZQXFCeENDLFlBbkJrQnhCLEVBQUssRUFBRyxFQUFHa0IsRUFBWU0sYUFvQnpDQyxRQWxCY3pCLEVBQUssRUFBRyxFQUFHa0IsRUFBWU8sU0FtQnJDQyxTQWpCZTFCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVEsVUFrQnRDQyxTQWhCZTNCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVMsVUFpQnRDQyxVQWZnQjVCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVUsV0FnQnZDQyxXQWRpQjdCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVcsWUFleENDLFdBYmlCOUIsRUFBSyxFQUFHLEVBQUdrQixFQUFZWSxZQWN4Q0MsV0FaaUIvQixFQUFLLEVBQUcsRUFBR2tCLEVBQVlhLFlBYXhDYixjQUNELEVBaUdEUixrQkFDQUMsaUJBQ0FnQyxVQTVCaUI3QixJQW9CakIsU0FuQm9COEIsRUFtQkY5QixHQWhCTlEsUUFBUS9CLGdCQUFpQnFELEVBQU10QixRQUFRaEIsVUFDN0NzQyxFQUFNckIsV0FBV2hDLGdCQUFpQnFELEVBQU1yQixXQUFXakIsVUFDbkRzQyxFQUFNcEIsWUFBWWpDLGdCQUFpQnFELEVBQU1wQixZQUFZbEIsVUFDckRzQyxFQUFNbkIsUUFBUWxDLGdCQUFpQnFELEVBQU1uQixRQUFRbkIsVUFDN0NzQyxFQUFNbEIsU0FBU25DLGdCQUFpQnFELEVBQU1sQixTQUFTcEIsVUFDL0NzQyxFQUFNakIsU0FBU3BDLGdCQUFpQnFELEVBQU1qQixTQUFTckIsVUFDL0NzQyxFQUFNaEIsVUFBVXJDLGdCQUFpQnFELEVBQU1oQixVQUFVdEIsVUFDakRzQyxFQUFNZixXQUFXdEMsZ0JBQWlCcUQsRUFBTWYsV0FBV3ZCLFVBQ25Ec0MsRUFBTWQsV0FBV3ZDLGdCQUFpQnFELEVBQU1kLFdBQVd4QixVQUNuRHNDLEVBQU1iLFdBQVd4QyxnQkFBaUJxRCxFQUFNYixXQUFXekIsVUFadEMsSUFBQ3NDLENBbUJVLEVBUy9CLEVBSUosRUF4TG1CLEdBMExkQyxFQUFjLE1BQ2xCLE1BQU1DLEVBQW1CLENBQUNDLEVBQU9DLEVBQWVsRSxLQUM5QyxJQUFJbUUsRUFBUSxFQUNHLFFBQVhuRSxJQUFrQm1FLEVBQVEsR0FFOUIsTUFBTUMsRUFBY3pFLFNBQVNDLHVCQUF1QnFFLEdBQU9FLEdBRXZEQyxJQUMyQkEsRUFBWUMsYUFBbkIsSUFBbEJILEVBQW1ELElBRTNCLElBRTlCLEVBR0lJLEVBQXNCLENBQUNMLEVBQU9qRSxLQUNsQyxJQUFJbUUsRUFBUSxFQUNHLFFBQVhuRSxJQUFrQm1FLEVBQVEsR0FFOUIsTUFBTUksRUFBYXJGLEVBQVlDLGFBQWE4RSxHQUV0QzNELEVBQVVYLFNBQVNDLHVCQUF1QjJFLEdBQVlKLEdBRXhEN0QsR0FBU0EsRUFBUWtFLFlBQVlsRSxFQUFRbUUsV0FBVSxHQUFNLEVBU3JEQyxFQUFrQnJELElBQ3RCLE1BQU1zRCxFQUFrQixHQUN4QixJQUFLLElBQUl2RSxFQUFJLEVBQUdBLEVBQUlpQixFQUFPaEIsT0FBUUQsS0FSZDZELEVBU0Q1QyxFQUFPakIsSUFSakIsR0FBSyxHQUFLNkQsRUFBTSxHQUFLLEdBQUtBLEVBQU0sR0FBSyxHQUFLQSxFQUFNLEdBQUssR0FRL0JVLEVBQWdCNUQsS0FBS00sRUFBT2pCLElBVHhDLElBQUM2RCxFQVdyQixPQUFPVSxDQUFlLEVBR2xCQyxFQUFlQyxJQUNuQixNQUFNeEQsRUFBUyxHQUVUeUQsRUFBSyxDQUFDRCxFQUFVLEdBQUssRUFBR0EsRUFBVSxJQUNsQ0UsRUFBTyxDQUFDRixFQUFVLEdBQUssRUFBR0EsRUFBVSxJQUNwQ0csRUFBUSxDQUFDSCxFQUFVLEdBQUlBLEVBQVUsR0FBSyxHQUN0Q0ksRUFBTyxDQUFDSixFQUFVLEdBQUlBLEVBQVUsR0FBSyxHQUkzQyxPQUZBeEQsRUFBT04sS0FBSytELEVBQUlDLEVBQU1DLEVBQU9DLEdBRXRCNUQsQ0FBTSxFQUdUNkQsRUFBZSxDQUNuQkMsRUFDQUMsRUFDQXRCLEVBQ0E5RCxFQUNBNkIsS0FFQSxNQUFNd0QsRUFBZSxHQUVyQixHQUE2QixpQkFBbEJGLEVBQVcsR0FDcEIsSUFBSyxJQUFJL0UsRUFBSSxFQUFHQSxFQUFJK0UsRUFBVzlFLE9BQVFELElBQ3JDaUYsRUFBYXRFLEtBQUs2RCxFQUFZTyxFQUFXL0UsVUFHM0NpRixFQUFhdEUsS0FBSzZELEVBQVlPLElBR2hDLE1BQU1HLEVBQW1CWixFQUFlVyxFQUFhRSxRQUVyRCxJQUFLLElBQUluRixFQUFJLEVBQUdBLEVBQUlrRixFQUFpQmpGLE9BQVFELElBQ3RDbEIsRUFBWWEsZ0JBQWdCOEIsRUFBZ0J5RCxFQUFpQmxGLE1BRWhFNEQsRUFBaUJzQixFQUFpQmxGLElBQUksRUFBT0osR0FDN0NzRSxFQUFvQmdCLEVBQWlCbEYsR0FBSUosR0FDekNvRixFQUFlRSxFQUFpQmxGLEdBQUkwRCxHQUV4QyxFQUdJMEIsRUFBaUJDLElBQ3JCLE1BQU1DLEVBQVUsR0FFVkMsRUFBVSxDQUFDRixFQUFLLEdBQUssRUFBR0EsRUFBSyxHQUFLLEdBQ2xDRyxFQUFVLENBQUNILEVBQUssR0FBSyxFQUFHQSxFQUFLLElBQU0sR0FDbkNJLEVBQVUsQ0FBQ0osRUFBSyxHQUFLLEVBQUdBLEVBQUssR0FBSyxHQUNsQ0ssRUFBVSxDQUFDTCxFQUFLLEdBQUssRUFBR0EsRUFBSyxHQUFLLEdBSXhDLE9BRkFDLEVBQVEzRSxLQUFLNEUsRUFBU0MsRUFBU0MsRUFBU0MsR0FFakNKLENBQU8sRUFHVkssRUFBZ0IsQ0FBQ2xCLEVBQVdPLEVBQWdCcEYsS0FDaEQsTUFBTTBGLEVBQVVGLEVBQWNYLEdBRXhCbUIsRUFBZXRCLEVBQWVnQixHQUVwQyxJQUFLLElBQUl0RixFQUFJLEVBQUdBLEVBQUk0RixFQUFhM0YsT0FBUUQsSUFDdkM0RCxFQUFpQmdDLEVBQWE1RixJQUFJLEVBQU9KLEdBQ3pDc0UsRUFBb0IwQixFQUFhNUYsR0FBSUosR0FDckNvRixFQUFlWSxFQUFhNUYsSUFBSSxFQUNsQyxFQTRHRixNQUFPLENBQ0w2RixPQTFHYSxDQUFDQyxFQUFNQyxLQUNwQixNQUFNQyxFQUFhRixFQUViRyxFQUFlRixFQUVmRyxFQUFjckYsRUFBWVUsWUFFMUJLLEVBQWNzRSxFQUFZcEQsZUFBZWlELEdBa0IvQyxNQUFPLENBQ0xDLGFBQ0FDLGVBQ0FDLGNBQ0F0RSxjQUNBRixjQXJCcUJULElBQ3JCLE1BQU1rRixFQUFpQkQsRUFBWXhFLGNBQWNULEVBQVFXLEdBRXJEdUUsSUFFRnJILEVBQVlxQixhQUFhZ0csRUFBZ0IsR0FDekNyQixFQUNFcUIsRUFBZTlGLGNBQ2Y2RixFQUFZeEUsY0FDWkUsRUFDQSxTQUNBc0UsRUFBWXpFLGdCQUVoQixFQVNELEVBNEVEMkUsVUF6RWdCLENBQUNDLEVBQWFDLEtBQzlCLE1BQU1DLEVBQWNGLEVBRWRHLEVBQVlGLEVBRVpHLEVBQVc1RixFQUFZVSxZQUV2Qm1GLEVBQVdELEVBQVMzRCxlQUFld0QsR0FrQm5DSyxFQUFhLEdBRWJDLEVBQWUsQ0FBQzNGLEVBQVE0RixLQUM1QixNQUFNQyxFQUFhQyxHQUFRQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXSCxHQUVoREksRUFBZSxDQUFDTCxFQUFVLElBQUtBLEVBQVUsS0FJL0MsR0FDRWhJLEVBQVlhLGdCQUFnQmdILEVBQVlRLEtBQ3ZCLElBQWpCTixFQUVBLE9BQU9ELElBZ0JULE1BZG9CLENBQUM1RSxJQUNuQnVFLEVBQVk3RSxjQUFjTSxHQUMxQjJFLEVBQVdoRyxLQUFLcUIsR0FDaEIsTUFBTW9GLEVBQWtCYixFQUFZTCxZQUFZekUsZUFFaEQsT0FBSTNDLEVBQVlhLGdCQUFnQnlILEVBQWlCcEYsSUFFL0M0QixFQUFpQjVCLEdBQWEsRUFBTSxVQUNwQzJELEVBQWMzRCxFQUFhNEUsRUFBYyxVQUNsQzVFLEdBRUY0QixFQUFpQjVCLEdBQWEsRUFBTyxTQUFTLEVBSzlDcUYsQ0FGTHBHLEdBSWVrRyxFQUFhLEVBR2xDLE1BQU8sQ0FDTFAsZUFDQUgsV0FDQUMsV0FDQUYsWUFDQUcsYUFDQWpGLGNBMURxQk0sSUFDckIsTUFBTW1FLEVBQWlCTSxFQUFTL0UsY0FBY00sRUFBYTBFLEdBRXZEUCxJQUVGckgsRUFBWXFCLGFBQWFnRyxFQUFnQixHQUN6Q3JCLEVBQ0VxQixFQUFlOUYsY0FDZm9HLEVBQVMvRSxjQUNUZ0YsRUFDQSxNQUNBRCxFQUFTaEYsZ0JBRWIsRUE4Q0QsRUFNRG1DLG1CQUNBK0IsZ0JBQ0FiLGVBQ0FNLGdCQUNBWixjQUNBRixpQkFFSCxFQTlObUIsR0FnT2RnRCxFQUNZLENBQUN0QixFQUFZQyxFQUFjTyxLQUN6QyxNQUFNWCxFQUFTbEMsRUFBWWtDLE9BQU9HLEVBQVlDLEdBSTlDLE1BQU8sQ0FBRUosU0FBUU8sVUFGQ3pDLEVBQVl5QyxVQUFVUCxFQUFRVyxHQUVwQixFQU0xQmUsRUFBVyxNQUNmLE1BNERNQyxFQUFVLENBQUNDLEVBQU9DLEtBQ3RCLE1BQU1DLEVBQWdCRCxFQUFTN0IsT0FBT2pFLFlBQVlJLFlBRTVDNEYsRUFBZ0JGLEVBQVN0QixVQUFVTSxTQUFTMUUsWUFFNUM0RSxFQUFnQi9DLEdBQVU2RCxFQUFTN0IsT0FBT25FLGNBQWNtQyxHQUV4RGdFLEVBQWFoRSxHQUFVNkQsRUFBU3RCLFVBQVUxRSxjQUFjbUMsR0FFeERpRSxFQUFnQixDQUFDQyxFQUFZdEQsRUFBV08sS0FFNUMsSUFBSWxCLEdBQWdCLEVBQ3BCLEdBQUloRixFQUFZYSxnQkFBZ0JtQyxPQUFPa0csT0FBT0QsR0FBYXRELEdBSXpELE9BRkFPLEVBQWVQLEdBQ2ZYLEdBQWdCLEdBQ1QsRUFHVCxJQUFLLElBQUk5RCxFQUFJLEVBQUdBLEVBQUkrSCxFQUFXOUgsT0FBUUQsSUFBSyxDQUUxQyxNQUFNSyxFQUFnQjBILEVBQVcvSCxHQUNqQyxHQUFJbEIsRUFBWWEsZ0JBQWdCVSxFQUFlb0UsR0FBWSxDQUN6RE8sRUFBZVAsR0FDZlgsR0FBZ0IsRUFFaEIsS0FDRixDQUNGLENBQ0EsT0FBT0EsQ0FBYSxFQU1oQm1FLEVBQXNCLENBQUN4RCxFQUFXTyxLQUN0Q0EsRUFBZVAsSUFDUixHQUdIeUQsRUFBaUJDLElBQ3JCLE1BQU1DLEVBQWNELEVBQUV2SSxPQUFPeUksY0FBY2xKLFVBRXJDbUosRUFBWUgsRUFBRXZJLE9BQU9ULFVBRXJCc0YsRUFBWTNGLEVBQVl3QixhQUFhZ0ksR0FFM0MsR0FBb0IsV0FBaEJGLEVBQTBCLENBRzVCLE1BQU1HLEVBQWN6RyxPQUFPa0csT0FBT0wsR0FBZWEsUUFDOUN2SCxRQUFzQndILElBQVh4SCxLQUc4QyxJQUF4RDZHLEVBQWNTLEVBQWE5RCxFQUFXbUMsSUFDeENqRCxFQUFZQyxpQkFBaUIwRSxHQUFXLEVBQU0sVUFDOUMzRSxFQUFZZ0MsY0FBY2xCLEVBQVdtQyxFQUFjLFlBRW5EcUIsRUFBb0J4RCxFQUFXbUMsR0FDL0JqRCxFQUFZQyxpQkFBaUIwRSxHQUFXLEVBQU8sVUFFbkQsQ0FFQSxHQUFvQixXQUFoQkYsRUFBMEIsQ0FDNUIsTUFBTUcsRUFBY3pHLE9BQU9rRyxPQUFPSixHQUFlWSxRQUM5Q3ZILFFBQXNCd0gsSUFBWHhILEtBRzJDLElBQXJENkcsRUFBY1MsRUFBYTlELEVBQVdvRCxJQUN4Q2xFLEVBQVlDLGlCQUFpQjBFLEdBQVcsRUFBTSxPQUM5QzNFLEVBQVlnQyxjQUFjbEIsRUFBV29ELEVBQVcsU0FFaERJLEVBQW9CeEQsRUFBV29ELEdBQy9CbEUsRUFBWUMsaUJBQWlCMEUsR0FBVyxFQUFPLE9BRW5ELEdBRUYsSUFBSyxJQUFJdEksRUFBSSxFQUFHQSxFQUFJeUgsRUFBTXhILE9BQVFELElBQ2hDeUgsRUFBTXpILEdBQUcwSSxpQkFBaUIsUUFBU1IsRUFBZSxDQUFFUyxNQUFNLEdBQzVELEVBOFBGLE1BQU8sQ0FBRUMsVUEzUFMsQ0FDaEJDLEVBQ0FDLEVBQ0E3QyxFQUNBTyxLQUVBLE1BQU11QyxFQUFjekIsRUFBYSxVQUFXckIsRUFBY08sR0FVMUQsTUFSaUMsZUFBN0JxQyxFQUFlMUosV0FDakJxSSxFQUFRcUIsRUFBZUcsV0FBWUQsR0FHSixlQUE3QkQsRUFBZTNKLFdBQ2pCcUksRUFBUXNCLEVBQWVFLFdBQVlELEdBRzlCLENBQUVBLGNBQWFGLGlCQUFnQkMsaUJBQWdCLEVBMk9wQ0csWUF6WUEsQ0FBQ0MsRUFBT0MsS0FDUCxDQUFDQyxJQUNsQixNQUFNQyxFQUFhQyxJQUNqQixHQWtCTyxLQWxCSEEsRUFBSixDQUVBLElBQUssSUFBSXRKLEVBQUksRUFBR0EsRUFnQlQsR0FoQm1CQSxJQUFLLENBQzdCLE1BQU11SixFQUFjaEssU0FBU2lLLGNBQWMsT0FDM0NELEVBQVlwSyxVQUFZLEdBQUdtSyxLQUFRdEosSUFFbkMsTUFBTXlKLEVBQWVsSyxTQUFTaUssY0FBYyxPQUM1Q0MsRUFBYXRLLFVBQVksR0FBR21LLEtBQVF0SixJQUVoQ2tKLEdBQU9BLEVBQU1RLFlBQVlILEdBQ3pCSixHQUFPQSxFQUFNTyxZQUFZRCxFQUMvQixDQUVBSixFQUFVQyxFQUFPLEVBYlEsQ0FhTixFQUVyQkQsRUFBVSxFQUFFLEVBR2RNLEVBQWMsRUFvWGlCQyxlQXhPVixLQStMZCxDQUFFQyxRQTVLTyxDQUFDQyxFQUFhN0ksS0FDNUIsTUFBTThJLEVBQWdCeEssU0FBU2lLLGNBQWMsV0FDN0NPLEVBQWM1SyxVQUFZLGlCQUUxQixNQUFNNkssRUFBT3pLLFNBQVMwSyxjQUFjLFFBQ2hDRCxHQUFNQSxFQUFLTixZQUFZSyxHQUUzQixNQUFNRyxFQUFpQjNLLFNBQVNpSyxjQUFjLE9BQzlDVSxFQUFlL0ssVUFBWSxrQkFFdkI0SyxHQUFlQSxFQUFjTCxZQUFZUSxHQUU3QyxNQUFNcEUsRUFBT3ZHLFNBQVNpSyxjQUFjLE1BQ3BDMUQsRUFBSzdCLFlBQWMsWUFBWTZGLFNBQy9CSSxFQUFlUixZQUFZNUQsR0FFM0IsTUFBTXFFLEVBQWM1SyxTQUFTaUssY0FBYyxPQUMzQ1csRUFBWWhMLFVBQVksZUFoS04sRUFBQ2lMLEVBQVlDLEtBQ2pDLE1BQU1DLEVBQWtCL0ssU0FBU2lLLGNBQWMsV0FDekNlLEVBQWtCaEwsU0FBU2lLLGNBQWMsV0FFL0NjLEVBQWdCRSxVQUFVQyxJQUFJLEtBQzlCRixFQUFnQkMsVUFBVUMsSUFBSSxLQUU5QixNQUFNQyxFQUFXLENBQUMsSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FFL0QsSUFBSyxJQUFJMUssRUFBSSxFQUFHQSxHQUFLLEdBQUlBLElBQUssQ0FDNUIsTUFBTUUsRUFBVVgsU0FBU2lLLGNBQWMsT0FDdkN0SixFQUFRK0QsWUFBY2pFLEVBQ3RCdUssRUFBZ0JiLFlBQVl4SixHQUU1QixNQUFNeUssRUFBV3BMLFNBQVNpSyxjQUFjLE9BQ3hDbUIsRUFBUzFHLFlBQWN5RyxFQUFTMUssRUFBSSxHQUNwQ3NLLEVBQWdCWixZQUFZaUIsRUFDOUIsQ0FFQVAsRUFBV1YsWUFBWVksR0FDdkJELEVBQVdYLFlBQVlhLEVBQWdCLEVBOElyQ0ssQ0FBY1YsRUFBZ0JDLEdBRTlCRCxFQUFlUixZQUFZUyxHQUUzQixNQUFNVSxFQUFPdEwsU0FBU2lLLGNBQWMsT0FjcEMsT0FiQXFCLEVBQUsxTCxVQUFZLFFBQVEySyxJQUN6QkssRUFBWVQsWUFBWW1CLEdBRUosSUFBaEJmLEVBQW1CdkMsRUFBUzBCLFlBQVk0QixFQUFNLE1BRWhEdEQsRUFBUzBCLFlBQVksS0FBTTRCLEdBR3pCNUosSUFDRjRKLEVBQUsxTCxVQUFZLGFBbkRILEVBQUNrQixFQUFlakIsS0FDaEMsTUFBTTZCLEVBM0lTLENBQUM2SixJQUNsQixNQUFNQyxFQUFxQixHQUUzQixJQUFLLElBQUkvSyxFQUFJLEVBQUdBLEVBQUk4SyxFQUFVN0ssT0FBUUQsSUFBSyxDQUN6QyxNQUFNaUIsRUFBUzZKLEVBQVU5SyxHQUVBLGlCQUFkaUIsRUFBTyxHQUFpQjhKLEVBQW1CcEssUUFBUU0sR0FFekQ4SixFQUFtQnBLLEtBQUtNLEVBQy9CLENBQ0EsT0FBTzhKLENBQWtCLEVBaUlSQyxDQUFXM0ssR0FFMUIsSUFBSyxJQUFJTCxFQUFJLEVBQUdBLEVBQUlpQixFQUFPaEIsT0FBUUQsSUFDakNsQixFQUFZSSxpQkFDVkosRUFBWUMsYUFBYWtDLEVBQU9qQixJQUNoQ1osRUFDQSxRQUVKLEVBMkNFNkwsQ0FBVWhLLEVBQVE2SSxJQUdiZSxDQUFJLEVBdUlLSyxlQWxMTW5ILElBQ3RCLE1BQU1nRyxFQUNKeEssU0FBU0MsdUJBQXVCLGtCQUFrQnVFLEdBQ2hEZ0csR0FBZUEsRUFBY29CLFFBQVEsRUErS1RDLFdBUGYsS0E1Qk0sTUFDdkIsTUFBTUMsRUFBZ0I5TCxTQUFTaUssY0FBYyxPQUM3QzZCLEVBQWNiLFVBQVVDLElBQUksa0JBRTVCLE1BQU1QLEVBQ0ozSyxTQUFTQyx1QkFBdUIsbUJBQW1CLEdBRWpEMEssR0FBZ0JBLEVBQWVSLFlBQVkyQixFQUFjLEVBc0I3REMsR0FuQnlCLE1BQ3pCLE1BQU1DLEVBQWVoTSxTQUFTaUssY0FBYyxVQUM1QytCLEVBQWFwTSxVQUFZLGdCQUN6Qm9NLEVBQWF0SCxZQUFjLFlBQzNCLE1BQU11SCxFQUNKak0sU0FBU0MsdUJBQXVCLGtCQUFrQixHQUNoRGdNLEdBQWlCQSxFQUFnQjlCLFlBQVk2QixFQUFhLEVBYzlERSxHQS9IcUIsTUFDckIsTUFBTUMsRUFBY25NLFNBQVNpSyxjQUFjLFVBQzNDa0MsRUFBWXZNLFVBQVksZUFDeEJ1TSxFQUFZekgsWUFBYyxhQUMxQixNQUFNdUgsRUFDSmpNLFNBQVNDLHVCQUF1QixrQkFBa0IsR0FDaERnTSxHQUFpQkEsRUFBZ0I5QixZQUFZZ0MsRUFBWSxFQTBIN0RDLEdBWnlCLE1BQ3pCLE1BQU1DLEVBQWtCck0sU0FBU2lLLGNBQWMsVUFDL0NvQyxFQUFnQnpNLFVBQVksbUJBQzVCeU0sRUFBZ0IzSCxZQUFjLFlBQzlCLE1BQU11SCxFQUNKak0sU0FBU0MsdUJBQXVCLGtCQUFrQixHQUNoRGdNLEdBQWlCQSxFQUFnQjlCLFlBQVlrQyxFQUFnQixFQU9qRUMsRUFBb0IsRUFHd0JDLGVBM0h2QixLQUVyQixNQUFNL0IsRUFDSnhLLFNBQVNDLHVCQUF1QixrQkFBa0IsR0FFOUN1TSxFQUFheE0sU0FBU2lLLGNBQWMsU0FDMUN1QyxFQUFXdkIsVUFBVUMsSUFBSSxvQkFDekJzQixFQUFXQyxRQUFVLGVBQ3JCRCxFQUFXOUgsWUFBYyxvQkFDekI4RixFQUFjTCxZQUFZcUMsR0FFMUIsTUFBTUUsRUFBZ0IxTSxTQUFTaUssY0FBYyxVQUM3Q3lDLEVBQWN6QixVQUFVQyxJQUFJLGdCQUM1QnNCLEVBQVdyQyxZQUFZdUMsR0FFdkIsTUFBTUMsRUFBZTNNLFNBQVNpSyxjQUFjLE9BQzVDMEMsRUFBYTFCLFVBQVVDLElBQUksaUJBQzNCc0IsRUFBV3JDLFlBQVl3QyxHQUV2QixNQUFNQyxFQUFTNU0sU0FBU2lLLGNBQWMsU0FDdEMyQyxFQUFPM0IsVUFBVUMsSUFBSSxnQkFDckJ5QixFQUFheEMsWUFBWXlDLEdBRXpCLE1BQU1DLEVBQVk3TSxTQUFTaUssY0FBYyxLQUN6QzRDLEVBQVU1QixVQUFVQyxJQUFJLGNBQ3hCMkIsRUFBVW5JLFlBQWMsSUFDeEJpSSxFQUFheEMsWUFBWTBDLEdBRXpCLE1BQU1DLEVBQVM5TSxTQUFTaUssY0FBYyxTQUN0QzZDLEVBQU83QixVQUFVQyxJQUFJLGdCQUNyQnlCLEVBQWF4QyxZQUFZMkMsR0FFekIsTUFBTUMsRUFBZS9NLFNBQVNpSyxjQUFjLFVBQzVDOEMsRUFBYTlCLFVBQVVDLElBQUksZ0JBQzNCNkIsRUFBYXJJLFlBQWMsUUFDM0I4SCxFQUFXckMsWUFBWTRDLEdBRXZCLE1BQU1DLEVBQVVoTixTQUFTaUssY0FBYyxVQUN2QytDLEVBQVFDLE1BQVEsVUFDaEJELEVBQVF0SSxZQUFjLFVBQ3RCZ0ksRUFBY3ZDLFlBQVk2QyxHQUUxQixNQUFNRSxFQUFVbE4sU0FBU2lLLGNBQWMsVUFDdkNpRCxFQUFRRCxNQUFRLGNBQ2hCQyxFQUFReEksWUFBYyxlQUN0QmdJLEVBQWN2QyxZQUFZK0MsR0FFMUIsTUFBTUMsRUFBVW5OLFNBQVNpSyxjQUFjLFVBQ3ZDa0QsRUFBUUYsTUFBUSxjQUNoQkUsRUFBUXpJLFlBQWMsZUFDdEJnSSxFQUFjdkMsWUFBWWdELEdBRTFCLE1BQU1DLEVBQVVwTixTQUFTaUssY0FBYyxVQUN2Q21ELEVBQVFILE1BQVEsV0FDaEJHLEVBQVExSSxZQUFjLFlBQ3RCZ0ksRUFBY3ZDLFlBQVlpRCxHQUUxQixNQUFNQyxFQUFVck4sU0FBU2lLLGNBQWMsVUFDdkNvRCxFQUFRSixNQUFRLFdBQ2hCSSxFQUFRM0ksWUFBYyxZQUN0QmdJLEVBQWN2QyxZQUFZa0QsR0FFMUIsTUFBTUMsRUFBVXROLFNBQVNpSyxjQUFjLFVBQ3ZDcUQsRUFBUUwsTUFBUSxXQUNoQkssRUFBUTVJLFlBQWMsWUFDdEJnSSxFQUFjdkMsWUFBWW1ELEdBRTFCLE1BQU1DLEVBQVV2TixTQUFTaUssY0FBYyxVQUN2Q3NELEVBQVFOLE1BQVEsYUFDaEJNLEVBQVE3SSxZQUFjLGNBQ3RCZ0ksRUFBY3ZDLFlBQVlvRCxHQUUxQixNQUFNQyxFQUFVeE4sU0FBU2lLLGNBQWMsVUFDdkN1RCxFQUFRUCxNQUFRLGFBQ2hCTyxFQUFROUksWUFBYyxjQUN0QmdJLEVBQWN2QyxZQUFZcUQsR0FFMUIsTUFBTUMsRUFBVXpOLFNBQVNpSyxjQUFjLFVBQ3ZDd0QsRUFBUVIsTUFBUSxhQUNoQlEsRUFBUS9JLFlBQWMsY0FDdEJnSSxFQUFjdkMsWUFBWXNELEdBRTFCLE1BQU1DLEVBQVcxTixTQUFTaUssY0FBYyxVQUN4Q3lELEVBQVNULE1BQVEsYUFDakJTLEVBQVNoSixZQUFjLGNBQ3ZCZ0ksRUFBY3ZDLFlBQVl1RCxFQUFRLElBK0VXQyxRQVpqQyxLQUNkLE1BQU1DLEVBQWM1TixTQUFTQyx1QkFBdUIsVUFBVSxHQUV4RDROLEVBQWM3TixTQUFTQyx1QkFBdUIsVUFBVSxHQUkxRDJOLEdBQWFBLEVBQVkvSSxZQUFZK0ksRUFBWTlJLFdBQVUsSUFFM0QrSSxHQUFhQSxFQUFZaEosWUFBWWdKLEVBQVkvSSxXQUFVLEdBQU0sRUFHYmdKLFlBdEN0QyxDQUFDQyxFQUFRQyxLQUMzQixNQUFNQyxFQUFPak8sU0FBUzBLLGNBQWMsUUFFOUJ3RCxFQUFRbE8sU0FBU2lLLGNBQWMsVUFDckNpRSxFQUFNakQsVUFBVUMsSUFBSSxTQUNwQitDLEVBQUs5RCxZQUFZK0QsR0FFakIsTUFBTUMsRUFBWW5PLFNBQVNpSyxjQUFjLE9BQ3pDaUUsRUFBTS9ELFlBQVlnRSxHQUloQkEsRUFBVXpKLFlBRlBzSixFQUVxQixHQUFHRCxvQkFGUSxtQkFBbUJBLGNBS3hELE1BQU1LLEVBQW1CcE8sU0FBU2lLLGNBQWMsVUFDaERtRSxFQUFpQjFKLFlBQWMsV0FJL0IwSixFQUFpQmpGLGlCQUFpQixTQUZmLElBQU1rRixPQUFPQyxTQUFTQyxXQUd6Q0wsRUFBTS9ELFlBQVlpRSxHQUVkRixHQUFPQSxFQUFNTSxXQUFXLEVBZ0IvQixFQTNZZ0IsR0E2WUEsTUFDZixNQUFNQyxFQUFTekcsRUFBU3FDLGlCQTRCbEJvQixFQUFjaUQsSUFDbEIsR0FBSUEsRUFBVSxDQUNaLE1BQU1DLEVBQXFCRCxFQUFTekYsUUFDakMyRixHQUF3QixpQkFBVkEsRUFBRyxLQUdkQyxFQUFnQkgsRUFBU3pGLFFBQVEyRixHQUF3QixpQkFBVkEsRUFBRyxLQUl4RCxPQUZzQkQsRUFBbUIvSSxPQUFPa0osT0FBT0QsRUFHekQsR0FHSUUsRUFBa0I3SixJQUN0QixNQUFNOEosRUFBZ0JsSixJQUNwQixNQUFNbUosRUFBbUIsSUFDcEI3SyxFQUFZeUIsY0FBY0MsTUFDMUIxQixFQUFZYSxZQUFZYSxHQUMzQkEsR0FHRixPQUFPMUIsRUFBWVcsZUFBZWtLLEVBQWlCLEVBRy9Ddk4sRUFBUyxHQUVmLEdBQTRCLGlCQUFqQndELEVBQVUsR0FBaUIsQ0FFcEMsTUFBTWdLLEVBQVdGLEVBQWE5SixHQU05QixPQUxBeEQsRUFBT04sUUFBUThOLEdBSVEsSUFGQSxJQUFJQyxJQUFJek4sRUFBTzBOLEtBQUtsTyxHQUFNWCxLQUFLQyxVQUFVVSxPQUVyQmtPLEtBQUtsTyxHQUFNWCxLQUFLOE8sTUFBTW5PLElBRW5FLENBRUEsSUFBSyxJQUFJVCxFQUFJLEVBQUdBLEVBQUl5RSxFQUFVeEUsT0FBUUQsSUFBSyxDQUN6QyxNQUNNeU8sRUFBV0YsRUFESTlKLEVBQVV6RSxJQUcvQmlCLEVBQU9OLFFBQVE4TixFQUNqQixDQUtBLE1BRnVCLElBRkEsSUFBSUMsSUFBSXpOLEVBQU8wTixLQUFLbE8sR0FBTVgsS0FBS0MsVUFBVVUsT0FFckJrTyxLQUFLbE8sR0FBTVgsS0FBSzhPLE1BQU1uTyxJQUU1QyxFQUdqQm9PLEVBQVksS0FDaEIsTUFBTS9ILEVBQWFDLEdBQVFDLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdILEdBU2hEK0gsRUFBa0IsQ0FBQ0MsRUFBYTNGLEVBQU00RixLQUMxQyxHQUFJQSxFQUFnQixDQUNsQixNQUFNQyxFQUFpQixDQUFDRCxFQUFlLEdBQUssRUFBR0EsRUFBZSxJQUN4REUsRUFBbUIsQ0FBQ0YsRUFBZSxHQUFJQSxFQUFlLEdBQUssR0FFakUsTUFBb0IsTUFBaEJELEVBQTRCRSxFQUV6QkMsQ0FDVCxDQUVBLElBQUkvSCxFQVdKLE9BUEVBLEVBRGtCLE1BQWhCNEgsRUFDYSxDQUFDakksRUFBVSxHQUFLc0MsR0FBT3RDLEVBQVUsS0FFakMsQ0FBQ0EsRUFBVSxJQUFLQSxFQUFVLEdBQUtzQyxJQUduQyxJQUFUQSxJQUFZakMsRUFBZSxDQUFDTCxFQUFVLElBQUtBLEVBQVUsTUFFbERLLENBQVksRUFHZmdJLEVBQWUsQ0FBQy9GLEVBQU16QyxLQUMxQixNQUFNb0IsRUFBYSxHQUViZ0gsRUEvQlMsSUFGQWpJLEVBQVUsR0FFQSxJQUNsQixJQWdDRHNJLEVBQWdCcEUsRUFBV3JFLEdBRTNCMEksRUFBbUIsS0FDdkIsTUFBTXBPLEVBQVM2TixFQUFnQkMsRUFBYTNGLEdBRXZDdEssRUFBWWEsZ0JBQWdCeVAsRUFBZW5PLEdBR3pDb08sSUFETHRILEVBQVdwSCxLQUFLTSxFQUNPLEVBRzNCLElBQUssSUFBSWpCLEVBQUksRUFBR0EsRUFBSW9KLEVBQU1wSixJQUFLLENBQzdCLE1BQU1nUCxFQUFpQmpILEVBQVdBLEVBQVc5SCxPQUFTLEdBQ2hEZ0IsRUFBUzZOLEVBQWdCQyxFQUFhM0YsRUFBTTRGLEdBRTlDQSxFQUNGakgsRUFBV3BILEtBQUtNLEdBQ1hvTyxHQUNULENBR0EsR0FBMEIsSUFBdEJ0SCxFQUFXOUgsT0FBYyxDQUMzQixJQUFJcVAsR0FBVSxFQUVkLElBQUssSUFBSXZMLEVBQVEsRUFBR0EsRUFBUWdFLEVBQVc5SCxPQUFROEQsSUFBUyxDQUN0RCxNQUFNN0QsRUFBVTZILEVBQVdoRSxHQUN2QmpGLEVBQVlhLGdCQUFnQnlQLEVBQWVsUCxLQUM3Q29QLEdBQVUsRUFDZCxDQUVBLE9BQWdCLElBQVpBLEVBQTBCSCxFQUFhL0YsRUFBTWdHLEdBRTFDckgsQ0FDVCxDQUdBLE9BQU9BLEVBQVcsRUFBRSxFQW9EdEIsTUFBTyxDQUFFd0gsZUFqRGMsS0FDckIsTUFBTTVJLEVBQWEsR0FFYnZFLEVBQVUrTSxFQUFhLEVBQUd4SSxHQUNoQ0EsRUFBV2hHLEtBQUsyTixFQUFlbE0sSUFFL0IsTUFBTUMsRUFBYThNLEVBQWEsRUFBR3hJLEdBQ25DQSxFQUFXaEcsS0FBSzJOLEVBQWVqTSxJQUUvQixNQUFNQyxFQUFjNk0sRUFBYSxFQUFHeEksR0FDcENBLEVBQVdoRyxLQUFLMk4sRUFBZWhNLElBRS9CLE1BQU1DLEVBQVU0TSxFQUFhLEVBQUd4SSxHQUNoQ0EsRUFBV2hHLEtBQUsyTixFQUFlL0wsSUFFL0IsTUFBTUMsRUFBVzJNLEVBQWEsRUFBR3hJLEdBQ2pDQSxFQUFXaEcsS0FBSzJOLEVBQWU5TCxJQUUvQixNQUFNQyxFQUFXME0sRUFBYSxFQUFHeEksR0FDakNBLEVBQVdoRyxLQUFLMk4sRUFBZTdMLElBRS9CLE1BQU1DLEVBQVl5TSxFQUFhLEVBQUd4SSxHQUNsQ0EsRUFBV2hHLEtBQUsyTixFQUFlNUwsSUFFL0IsTUFBTUMsRUFBYXdNLEVBQWEsRUFBR3hJLEdBQ25DQSxFQUFXaEcsS0FBSzJOLEVBQWUzTCxJQUUvQixNQUFNQyxFQUFhdU0sRUFBYSxFQUFHeEksR0FDbkNBLEVBQVdoRyxLQUFLMk4sRUFBZTFMLElBRS9CLE1BQU1DLEVBQWFzTSxFQUFhLEVBQUd4SSxHQWdCbkMsT0FmQUEsRUFBV2hHLEtBQUsyTixFQUFlekwsSUFleEIsQ0FBRTVCLE9BYk0sQ0FDYm1CLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBR2U4RCxhQUFZLEVBR053SSxlQUFjYixpQkFBZ0IsRUFHbkRrQixFQUFnQnBQLElBTXBCLEdBQTJCLE1BSnJCQSxFQUFLYSxPQUFPLEdBQUcsR0FBSyxJQUFNYixFQUFLYSxPQUFPLEdBQUcsR0FBVyxJQUNqRCxLQUd1QixDQUM5QixJQUFJd08sRUFBVyxDQUFDclAsRUFBS3NQLFlBRXJCLElBQUssSUFBSTFQLEVBQUksRUFBR0EsRUFBSUksRUFBS2EsT0FBT2hCLE9BQVMsRUFBR0QsSUFBSyxDQUMvQyxNQUdNMlAsRUFBVyxDQUhKRixFQUFTelAsR0FBRyxHQUNaeVAsRUFBU3pQLEdBQUcsR0FBSyxHQUk5QnlQLEVBQVdBLEVBQVNwQixPQUFPLENBQUNzQixHQUM5QixDQUVBLE9BQU9GLENBQ1QsQ0FFQSxJQUFJQSxFQUFXLENBQUNyUCxFQUFLc1AsWUFFckIsSUFBSyxJQUFJMVAsRUFBSSxFQUFHQSxFQUFJSSxFQUFLYSxPQUFPaEIsT0FBUyxFQUFHRCxJQUFLLENBQy9DLE1BR00yUCxFQUFXLENBSEpGLEVBQVN6UCxHQUFHLEdBQUssRUFDakJ5UCxFQUFTelAsR0FBRyxJQUl6QnlQLEVBQVdBLEVBQVNwQixPQUFPLENBQUNzQixHQUM5QixDQUVBLE9BQU9GLENBQVEsRUF1QlhHLEVBQW1CLENBQUNDLEVBQVVsSixLQUNsQyxJQUFJMkksR0FBVSxFQUVkLE1BQU1RLEVBQWlCRCxFQUFTNU8sUUFFMUIsZUFBRThPLEdBQW1CRixFQUVyQkcsRUFBaUIsSUFBSXJKLEdBRTNCcUosRUFBZUQsR0FBa0IsR0FFakMsTUFBTUUsRUFBaUJqRixFQUFXZ0YsR0FFbEMsR0FDRXJNLEVBQVlXLGVBQWV3TCxHQUFnQjdQLFNBQzNDNlAsRUFBZTdQLE9BRWYsT0FBTzBHLEVBRVQsSUFBSyxJQUFJM0csRUFBSSxFQUFHQSxFQUFJOFAsRUFBZTdQLE9BQVFELElBQ3JDbEIsRUFBWWEsZ0JBQWdCc1EsRUFBZ0JILEVBQWU5UCxNQUM3RHNQLEdBQVUsR0FJZCxNQUFNWSxFQUFpQjVCLEVBQWV3QixHQUV0QyxPQUFnQixJQUFaUixHQUNGVSxFQUFlRCxHQUFrQkcsRUFDMUJGLEdBRUZySixDQUFVLEVBb0Rid0osRUFBZSxDQUFDbFAsRUFBUW1QLEtBRzVCLElBQUlDLEVBRUosR0FKQXJDLEVBQU85QyxlQUFlLElBSUgsSUFBZmtGLEVBQXFCLENBQ3ZCLE1BQU01SixFQUFZcUksSUFBWVUsaUJBQWlCdE8sT0FDL0NvUCxFQUFVOUksRUFBU3FCLFVBQ2pCb0YsRUFBT25FLFFBQVEsRUFBRzVJLEdBQ2xCK00sRUFBT25FLFFBQVEsR0FDZjVJLEVBQ0F1RixFQUVKLE1BQ0U2SixFQUFVOUksRUFBU3FCLFVBQ2pCb0YsRUFBT25FLFFBQVEsRUFBRzVJLEdBQ2xCK00sRUFBT25FLFFBQVEsR0FDZjVJLEVBQ0FBLEdBSUosTUFBTXFQLEVBQVlELEVBQVF0SCxZQUFZbEQsT0FDaEMwSyxFQUFTRixFQUFRdEgsWUFBWTNDLFVBQzdCb0ssRUFqWFUsRUFBQ0MsRUFBU0MsS0FDMUIsTUFBTUMsRUFBZUYsRUFBUTdPLFlBRXZCZ1AsRUFBZUYsRUFBUWhLLFNBb0I3QixNQUFPLENBQUVtSyxXQWxCVSxLQUNqQixJQUFJQyxHQUFhLEVBZWpCLE9BZEFKLEVBQVE5SixlQUVKNkosRUFBUXZLLFlBQVl6QyxVQUFVa04sS0FDaENwSixFQUFTMkYsVUFDVDNGLEVBQVM4RixZQUFZLFdBQVcsR0FDaEN5RCxHQUFhLEdBR1hKLEVBQVFqSyxTQUFTaEQsVUFBVW1OLEtBQzdCckosRUFBUzJGLFVBQ1QzRixFQUFTOEYsWUFBWSxXQUNyQnlELEdBQWEsR0FHUkEsQ0FBVSxFQUVFLEVBMFZEQyxDQUFVVCxFQUFXQyxHQW1CekMsTUFkaUIsRUFBQ1MsRUFBVUMsS0FDMUIsSUFBSyxJQUFJalIsRUFBSSxFQUFHQSxFQUFJaVIsRUFBYWpJLFdBQVcvSSxPQUFRRCxJQUNyQ2lSLEVBQWFqSSxXQUFXaEosR0FDaEMwSSxpQkFDSCxTQUNBLEtBQ0VzSSxFQUFTSCxZQUFZLEdBRXZCLENBQUVsSSxNQUFNLEdBRVosRUFFRnVJLENBQVNWLEVBaEJPSCxFQUFRdkgsZ0JBa0JqQixDQUFFd0gsWUFBV0MsU0FBUUMsY0FBYSxFQTBCckNXLEVBQXFCLENBQUNsUSxFQUFRbVAsRUFBWXpKLEVBQVl5SyxLQUMxRHBELEVBQU9uRSxRQUFRLEVBQUc1SSxHQUNsQitNLEVBQU81QyxhQXhIVyxFQUFDbkssRUFBUTBGLEVBQVk1QyxFQUFPc04sS0FDOUMsTUFBTTlJLEVBQWN0SCxFQUFPdUgsUUFBUTJGLEdBQXdCLGlCQUFWQSxFQUFHLEtBQzlDbk0sRUFBY2dKLEVBQVd6QyxHQUV6QitJLEVBQVVuSixJQUNkLE1BQU1vSixFQUFlcEosRUFBRXZJLE9BQU9ULFVBV3hCcVMsRUFUZ0IsQ0FBQzNOLElBRXJCLElBQUssSUFBSTdELEVBQUksRUFBR0EsRUFBSXVJLEVBQVl0SSxPQUFRRCxJQUFLLENBQzNDLE1BQU04SyxFQUFZdkMsRUFBWXZJLEdBQ3hCeVIsRUFBYSxDQUFDM0csRUFBVzlLLEdBQy9CLEdBQUlsQixFQUFZYSxnQkFBZ0JtTCxFQUFXakgsR0FBUSxPQUFPNE4sQ0FDNUQsR0FHZ0JDLENBQWM1UyxFQUFZd0IsYUFBYWlSLElBRW5EMUIsRUFBVyxDQUNmNU8sT0FBUXVRLEVBQVUsR0FDbEI5QixXQUFZOEIsRUFBVSxHQUFHLEdBQ3pCekIsZUFBZ0J5QixFQUFVLElBSzVCLE9BRkEzQixFQUFTNU8sT0FBU3VPLEVBQWFLLEdBRTNCRCxFQUFpQkMsRUFBVWxKLEtBQWdCQSxHQUU3Q3FILEVBQU85QyxlQUFlLEdBQ2ZtRyxFQW5GUyxFQUFDeEIsRUFBVTVPLEtBQy9CLE1BQU0wUSxFQUFhLElBQUkxUSxHQUl2QixPQUZBMFEsRUFBV0MsT0FBTy9CLEVBQVNFLGVBQWdCLEVBQUdGLEVBQVM1TyxRQUVoRDBRLENBQVUsRUErRVhFLENBQWNoQyxFQUFVNU8sSUFDeEIsRUFDQTJPLEVBQWlCQyxFQUFVbEosSUFDM0IsSUEvRWUsQ0FBQzFGLElBQ3RCLElBQUssSUFBSWpCLEVBQUksRUFBR0EsRUFBSWlCLEVBQU9oQixPQUFRRCxJQUFLLENBQ3RDLE1BQU1PLEVBQWF6QixFQUFZQyxhQUFha0MsRUFBT2pCLElBQzdDOFIsRUFBZXZTLFNBQVNDLHVCQUF1QmUsR0FBWSxHQUNqRXVSLEVBQWF0SCxVQUFVQyxJQUFJLG9CQUMzQnNILFlBQVcsS0FFVEQsRUFBYXRILFVBQVVXLE9BQU8sbUJBQW1CLEdBQ2hELElBQ0wsR0F5RVM2RyxDQUFlUixFQUFVLEdBQUcsRUFHckMsSUFBSyxJQUFJeFIsRUFBSSxFQUFHQSxFQUFJZ0MsRUFBWS9CLE9BQVFELElBQUssQ0FFM0MsTUFBTWlTLEVBQWVuVCxFQUFZQyxhQUFhaUQsRUFBWWhDLElBQ3BERSxFQUFVWCxTQUFTQyx1QkFBdUJ5UyxHQUFjbE8sR0FDMUQ3RCxHQUFTQSxFQUFRd0ksaUJBQWlCLFFBQVM0SSxFQUNqRCxDQUV1QixFQTJFdkJZLENBQVlqUixFQUFRMEYsRUFBWSxFQUFHd0ssR0FHbkMsTUFRTXpGLEVBQWNuTSxTQUFTQyx1QkFBdUIsZ0JBQWdCLEdBQzlEMlMsRUFBa0I1UyxTQUFTQyx1QkFBdUIsaUJBQWlCLEdBQ25Fb00sRUFDSnJNLFNBQVNDLHVCQUF1QixvQkFBb0IsR0FFbEQyUyxHQUNGQSxFQUFnQnpKLGlCQUFpQixTQUFTLEtBZHRCLENBQUMzRSxJQUNyQmlLLEVBQU85QyxlQWNTLEdBYmhCLE1BQU00RCxFQUFrQkQsSUFBWVUsaUJBQzlCNkMsRUFBa0J0RCxFQUFnQjdOLE9BQ2xDb1IsRUFBZ0J2RCxFQUFnQm5JLFdBQ3RDd0ssRUFBbUJpQixHQUFpQixFQUFPQyxFQUFjLEVBVXZEQyxFQUFnQixJQUdoQjFHLElBQ0ZBLEVBQWdCbEQsaUJBQ2QsU0FDQSxLQUNFc0YsRUFBT2xDLGdCQUFnQixHQUV6QixDQUFFbkQsTUFBTSxJQUVOeUksR0FBZXhGLEVBQWdCMkcsU0FHakM3RyxHQUNGQSxFQUFZaEQsaUJBQWlCLFNBQVMsS0FDcEN5SCxFQUFhbFAsRUFBUW1QLEVBQVcsR0FDaEMsRUFXTixNQUFPLENBQ0xELGVBQ0FxQyxTQVZlLEtBQ2YsTUFBTTFELEVBQWtCRCxJQUFZVSxpQkFDOUJwSSxFQUFlMkgsRUFBZ0I3TixRQUMvQixXQUFFMEYsR0FBZW1JLEVBRXZCcUMsRUFBbUJoSyxHQUFjLEVBQU9SLEVBQVcsRUFNbkRrSSxZQUNBc0MscUJBQ0EzQixlQUVILEVBemRnQixHQTJkUmdELFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdsb2JhbExvZ2ljID0gKCgpID0+IHtcbiAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIGFsbW9zdCBldmVyeSBvdGhlciBtb2R1bGUsIHNvIGkgbmVlZCB0byBoYXZlIHRoZW0gaGVyZSBpbiBvcmRlciB0byBpbnZva2UgdGhlbS5cblxuICBjb25zdCBpc1RhcmdldEluQXJyYXkgPSAoYXJyLCB0YXJnZXQpID0+IHtcbiAgICBsZXQgY29udGFpbnMgPSBmYWxzZTtcblxuICAgIGlmIChKU09OLnN0cmluZ2lmeShhcnIpID09PSBKU09OLnN0cmluZ2lmeSh0YXJnZXQpKSBjb250YWlucyA9IHRydWU7XG5cbiAgICBpZiAoIWFycikgcmV0dXJuIGNvbnRhaW5zO1xuXG4gICAgaWYgKCF0YXJnZXQpIHJldHVybiBjb250YWlucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYXJyW2ldO1xuXG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlbWVudCkgPT09IEpTT04uc3RyaW5naWZ5KHRhcmdldCkpIGNvbnRhaW5zID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbnM7XG4gIH07XG5cbiAgY29uc3QgY2xhc3NUb0FycmF5ID0gKGNsYXNzQ29vcmQpID0+IHtcbiAgICBjb25zdCBhcnJheUNvb3JkID0gW107XG5cbiAgICBjb25zdCB4ID0gY2xhc3NDb29yZC5zbGljZSgwLCAxKTtcbiAgICBjb25zdCB5ID0gY2xhc3NDb29yZC5zbGljZSgyLCAzKTtcblxuICAgIGFycmF5Q29vcmQucHVzaChOdW1iZXIoeCkpO1xuICAgIGFycmF5Q29vcmQucHVzaChOdW1iZXIoeSkpO1xuXG4gICAgcmV0dXJuIGFycmF5Q29vcmQ7XG4gIH07XG5cbiAgY29uc3QgY29vcmRUb0NsYXNzID0gKGFycikgPT4gYCR7YXJyLnNsaWNlKDAsIDEpfSwke2Fyci5zbGljZSgxLCAyKX1gO1xuXG4gIGNvbnN0IGNoYW5nZUNvb3JkQ29sb3IgPSAoY2xhc3NOYW1lLCBncmlkTnVtYmVyLCBjb2xvcikgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRDb29yZCA9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlbZ3JpZE51bWJlciAtIDFdO1xuXG4gICAgaWYgKGN1cnJlbnRDb29yZCkgY3VycmVudENvb3JkLnN0eWxlLmJvcmRlciA9IGAxcHggc29saWQgJHtjb2xvcn1gO1xuICB9O1xuXG4gIGNvbnN0IGluZGljYXRlU3VuayA9IChzaGlwLCBncmlkTnVtYmVyKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50Q29vcmRzIH0gPSBzaGlwO1xuXG4gICAgaWYgKHR5cGVvZiBjdXJyZW50Q29vcmRzWzBdID09PSBcIm51bWJlclwiKVxuICAgICAgLy8gd2hlbiB0aGUgc2hpcCBvbmx5IGhhcyBvbmUgY29vcmRpbmF0ZS5cbiAgICAgIGNoYW5nZUNvb3JkQ29sb3IoY29vcmRUb0NsYXNzKGN1cnJlbnRDb29yZHMpLCBncmlkTnVtYmVyLCBcInJlZFwiKTtcbiAgICBlbHNlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hhbmdlQ29vcmRDb2xvcihjb29yZFRvQ2xhc3MoY3VycmVudENvb3Jkc1tpXSksIGdyaWROdW1iZXIsIFwicmVkXCIpO1xuICAgICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaXNUYXJnZXRJbkFycmF5LFxuICAgIGNoYW5nZUNvb3JkQ29sb3IsXG4gICAgaW5kaWNhdGVTdW5rLFxuICAgIGNsYXNzVG9BcnJheSxcbiAgICBjb29yZFRvQ2xhc3MsXG4gIH07XG59KSgpO1xuXG5jb25zdCBtYWluT2JqZWN0cyA9ICgoKSA9PiB7XG4gIGNvbnN0IFNoaXAgPSAobGVuZ3RoTnVtYmVyLCBoaXRzTnVtYmVyLCBjb29yZHMpID0+IHtcbiAgICBjb25zdCBjdXJyZW50Q29vcmRzID0gY29vcmRzO1xuXG4gICAgY29uc3QgY2hlY2tTdW5rID0gKGxlbmd0aCwgaGl0cykgPT4ge1xuICAgICAgaWYgKGxlbmd0aCA9PT0gaGl0cykgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGxldCBzaGlwSGl0cyA9IGhpdHNOdW1iZXI7XG5cbiAgICBjb25zdCBzaGlwTGVuZ3RoID0gbGVuZ3RoTnVtYmVyO1xuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4gY2hlY2tTdW5rKHNoaXBMZW5ndGgsIHNoaXBIaXRzKTtcblxuICAgIGNvbnN0IGhpdCA9ICgpID0+IHNoaXBIaXRzKys7XG5cbiAgICBjb25zdCBjdXJyZW50SGl0cyA9ICgpID0+IHNoaXBIaXRzO1xuXG4gICAgcmV0dXJuIHsgaXNTdW5rLCBoaXQsIGN1cnJlbnRIaXRzLCBjdXJyZW50Q29vcmRzLCBzaGlwTGVuZ3RoIH07XG4gIH07XG5cbiAgY29uc3QgR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGRlcGxveVNoaXBzID0gKFxuICAgICAgY2FycmllckNvcmRzLFxuICAgICAgYmF0dGxlU2hpcENvcmRzLFxuICAgICAgYmF0dGxlU2hpcDFDb3JkcyxcbiAgICAgIGNydWlzZXJDb3JkcyxcbiAgICAgIGNydWlzZXIxQ29yZHMsXG4gICAgICBjcnVpc2VyMkNvcmRzLFxuICAgICAgZGVzdHJveWVyQ29yZHMsXG4gICAgICBkZXN0cm95ZXIxQ29yZHMsXG4gICAgICBkZXN0cm95ZXIyQ29yZHMsXG4gICAgICBkZXN0cm95ZXIzQ29yZHNcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0ge1xuICAgICAgICBjYXJyaWVyOiBjYXJyaWVyQ29yZHMsXG4gICAgICAgIGJhdHRsZVNoaXA6IGJhdHRsZVNoaXBDb3JkcyxcbiAgICAgICAgYmF0dGxlU2hpcDE6IGJhdHRsZVNoaXAxQ29yZHMsXG4gICAgICAgIGNydWlzZXI6IGNydWlzZXJDb3JkcyxcbiAgICAgICAgY3J1aXNlcjE6IGNydWlzZXIxQ29yZHMsXG4gICAgICAgIGNydWlzZXIyOiBjcnVpc2VyMkNvcmRzLFxuICAgICAgICBkZXN0cm95ZXI6IGRlc3Ryb3llckNvcmRzLFxuICAgICAgICBkZXN0cm95ZXIxOiBkZXN0cm95ZXIxQ29yZHMsXG4gICAgICAgIGRlc3Ryb3llcjI6IGRlc3Ryb3llcjJDb3JkcyxcbiAgICAgICAgZGVzdHJveWVyMzogZGVzdHJveWVyM0NvcmRzLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY2FycmllciA9IFNoaXAoNCwgMCwgY29vcmRpbmF0ZXMuY2Fycmllcik7XG5cbiAgICAgIGNvbnN0IGJhdHRsZVNoaXAgPSBTaGlwKDMsIDAsIGNvb3JkaW5hdGVzLmJhdHRsZVNoaXApO1xuXG4gICAgICBjb25zdCBiYXR0bGVTaGlwMSA9IFNoaXAoMywgMCwgY29vcmRpbmF0ZXMuYmF0dGxlU2hpcDEpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyID0gU2hpcCgyLCAwLCBjb29yZGluYXRlcy5jcnVpc2VyKTtcblxuICAgICAgY29uc3QgY3J1aXNlcjEgPSBTaGlwKDIsIDAsIGNvb3JkaW5hdGVzLmNydWlzZXIxKTtcblxuICAgICAgY29uc3QgY3J1aXNlcjIgPSBTaGlwKDIsIDAsIGNvb3JkaW5hdGVzLmNydWlzZXIyKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyID0gU2hpcCgxLCAwLCBjb29yZGluYXRlcy5kZXN0cm95ZXIpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIxID0gU2hpcCgxLCAwLCBjb29yZGluYXRlcy5kZXN0cm95ZXIxKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMiA9IFNoaXAoMSwgMCwgY29vcmRpbmF0ZXMuZGVzdHJveWVyMik7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjMgPSBTaGlwKDEsIDAsIGNvb3JkaW5hdGVzLmRlc3Ryb3llcjMpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXJyaWVyLFxuICAgICAgICBiYXR0bGVTaGlwLFxuICAgICAgICBiYXR0bGVTaGlwMSxcbiAgICAgICAgY3J1aXNlcixcbiAgICAgICAgY3J1aXNlcjEsXG4gICAgICAgIGNydWlzZXIyLFxuICAgICAgICBkZXN0cm95ZXIsXG4gICAgICAgIGRlc3Ryb3llcjEsXG4gICAgICAgIGRlc3Ryb3llcjIsXG4gICAgICAgIGRlc3Ryb3llcjMsXG4gICAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVjZWl2ZWRBdHRhY2tzID0gW107XG5cbiAgICBjb25zdCBzdWNjZXNzQXR0YWNrcyA9IFtdO1xuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh0YXJnZXRDb3JkcywgcGxheWVyU2hpcHMpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTaGlwcyA9IE9iamVjdC5lbnRyaWVzKHBsYXllclNoaXBzLmNvb3JkaW5hdGVzKTtcbiAgICAgIHJlY2VpdmVkQXR0YWNrcy5wdXNoKHRhcmdldENvcmRzKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50U2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBzaGlwQ29yZHMgPSBjdXJyZW50U2hpcHNbaV1bMV07XG5cbiAgICAgICAgY29uc3Qgc2hpcE5hbWUgPSBjdXJyZW50U2hpcHNbaV1bMF07XG5cbiAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShzaGlwQ29yZHMsIHRhcmdldENvcmRzKSkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgc3VjY2Vzc0F0dGFja3MucHVzaCh0YXJnZXRDb3Jkcyk7XG5cbiAgICAgICAgICAvLyBpZiB0aGUgdGFyZ2V0IGNvcmRzIG1hdGNoZXMgYSBzaGlwIGNvcmRzLlxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJjYXJyaWVyXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmNhcnJpZXIuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY2Fycmllci5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmNhcnJpZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJiYXR0bGVTaGlwXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmJhdHRsZVNoaXAuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuYmF0dGxlU2hpcC5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmJhdHRsZVNoaXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJiYXR0bGVTaGlwMVwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5iYXR0bGVTaGlwMS5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5iYXR0bGVTaGlwMS5pc1N1bmsoKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllclNoaXBzLmJhdHRsZVNoaXAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiY3J1aXNlclwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5jcnVpc2VyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmNydWlzZXIuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5jcnVpc2VyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiY3J1aXNlcjFcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuY3J1aXNlcjEuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY3J1aXNlcjEuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5jcnVpc2VyMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImNydWlzZXIyXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmNydWlzZXIyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmNydWlzZXIyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuY3J1aXNlcjI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJkZXN0cm95ZXJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmRlc3Ryb3llci5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmRlc3Ryb3llcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjFcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMS5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIxLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMi5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjNcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMy5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIzLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3VjY2VzcyA9PT0gdHJ1ZSkgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGNoZWNrU3VuayA9IChwbGF5ZXJTaGlwcykgPT4ge1xuICAgICAgY29uc3QgYXJlQWxsU3VuayA9IChzaGlwcykgPT4ge1xuICAgICAgICAvLyBlaXRoZXIgd2UgZGlkbid0IGRlZmluZWQgdGhlIGNvcmRzIG9mIGEgc2hpcCAodW5kZWZpbmVkKSwgb3IgaXQgaXMgYWN0dWFsbHkgc3Vuaywgd2UgdGFrZSB0aGF0IGFzIHRydWUuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAoIXNoaXBzLmNhcnJpZXIuY3VycmVudENvb3JkcyB8fCBzaGlwcy5jYXJyaWVyLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuYmF0dGxlU2hpcC5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmJhdHRsZVNoaXAuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5iYXR0bGVTaGlwMS5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmJhdHRsZVNoaXAxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuY3J1aXNlci5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNydWlzZXIuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5jcnVpc2VyMS5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNydWlzZXIxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuY3J1aXNlcjIuY3VycmVudENvb3JkcyB8fCBzaGlwcy5jcnVpc2VyMi5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmRlc3Ryb3llci5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmRlc3Ryb3llci5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmRlc3Ryb3llcjEuY3VycmVudENvb3JkcyB8fCBzaGlwcy5kZXN0cm95ZXIxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuZGVzdHJveWVyMi5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmRlc3Ryb3llcjIuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5kZXN0cm95ZXIzLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuZGVzdHJveWVyMy5pc1N1bmsoKSlcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBhcmVBbGxTdW5rKHBsYXllclNoaXBzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICBkZXBsb3lTaGlwcyxcbiAgICAgIHJlY2VpdmVkQXR0YWNrcyxcbiAgICAgIHN1Y2Nlc3NBdHRhY2tzLFxuICAgICAgY2hlY2tTdW5rLFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIHsgU2hpcCwgR2FtZWJvYXJkIH07XG59KSgpO1xuXG5jb25zdCBwbGF5ZXJMb2dpYyA9ICgoKSA9PiB7XG4gIGNvbnN0IHZpc3VhbEluZGljYXRvcnMgPSAoY29vcmQsIHdhc1N1Y2Nlc3NmdWwsIHRhcmdldCkgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgaWYgKHRhcmdldCA9PT0gXCJjcHVcIikgaW5kZXggPSAxO1xuXG4gICAgY29uc3QgY3VycmVudE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvb3JkKVtpbmRleF07XG5cbiAgICBpZiAoY3VycmVudE5vZGUpIHtcbiAgICAgIGlmICh3YXNTdWNjZXNzZnVsID09PSBmYWxzZSkgY3VycmVudE5vZGUudGV4dENvbnRlbnQgPSBcIuKAolwiO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGN1cnJlbnROb2RlLnRleHRDb250ZW50ID0gXCJYXCI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZU5vZGVMaXN0ZW5lcnMgPSAoY29vcmQsIHRhcmdldCkgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgaWYgKHRhcmdldCA9PT0gXCJjcHVcIikgaW5kZXggPSAxO1xuXG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZCk7XG5cbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjb29yZGluYXRlKVtpbmRleF07XG5cbiAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5yZXBsYWNlV2l0aChlbGVtZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVDb29yZCA9IChjb29yZCkgPT4ge1xuICAgIGlmIChjb29yZFswXSA8IDAgfHwgY29vcmRbMV0gPCAwIHx8IGNvb3JkWzBdID4gOSB8fCBjb29yZFsxXSA+IDkpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVDb29yZHMgPSAoY29vcmRzKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGVkQ29vcmRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWxpZGF0ZUNvb3JkKGNvb3Jkc1tpXSkpIHZhbGlkYXRlZENvb3Jkcy5wdXNoKGNvb3Jkc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZWRDb29yZHM7XG4gIH07XG5cbiAgY29uc3QgcmV0dXJuU2lkZXMgPSAobm9kZUNvb3JkKSA9PiB7XG4gICAgY29uc3QgY29vcmRzID0gW107XG5cbiAgICBjb25zdCB1cCA9IFtub2RlQ29vcmRbMF0gLSAxLCBub2RlQ29vcmRbMV1dO1xuICAgIGNvbnN0IGRvd24gPSBbbm9kZUNvb3JkWzBdICsgMSwgbm9kZUNvb3JkWzFdXTtcbiAgICBjb25zdCByaWdodCA9IFtub2RlQ29vcmRbMF0sIG5vZGVDb29yZFsxXSArIDFdO1xuICAgIGNvbnN0IGxlZnQgPSBbbm9kZUNvb3JkWzBdLCBub2RlQ29vcmRbMV0gLSAxXTtcblxuICAgIGNvb3Jkcy5wdXNoKHVwLCBkb3duLCByaWdodCwgbGVmdCk7XG5cbiAgICByZXR1cm4gY29vcmRzO1xuICB9O1xuXG4gIGNvbnN0IGF0dGFja0Fyb3VuZCA9IChcbiAgICBub2RlQ29vcmRzLFxuICAgIGF0dGFja0Z1bmN0aW9uLFxuICAgIHNoaXBzLFxuICAgIHRhcmdldCxcbiAgICBzdWNjZXNzQXR0YWNrc1xuICApID0+IHtcbiAgICBjb25zdCBhcm91bmRDb29yZHMgPSBbXTtcblxuICAgIGlmICh0eXBlb2Ygbm9kZUNvb3Jkc1swXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyb3VuZENvb3Jkcy5wdXNoKHJldHVyblNpZGVzKG5vZGVDb29yZHNbaV0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXJvdW5kQ29vcmRzLnB1c2gocmV0dXJuU2lkZXMobm9kZUNvb3JkcykpOyAvLyB3aGVuIHRoZSBzaGlwIGhhcyBvbmx5IG9uZSBjb29yZC5cbiAgICB9XG5cbiAgICBjb25zdCBmbGF0QXJvdW5kQ29vcmRzID0gdmFsaWRhdGVDb29yZHMoYXJvdW5kQ29vcmRzLmZsYXQoKSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZsYXRBcm91bmRDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KHN1Y2Nlc3NBdHRhY2tzLCBmbGF0QXJvdW5kQ29vcmRzW2ldKSkge1xuICAgICAgICAvLyBhdm9pZCBtb2RpZnlpbmcgc3VjY2Vzc2Z1bCBhdHRhY2tzLlxuICAgICAgICB2aXN1YWxJbmRpY2F0b3JzKGZsYXRBcm91bmRDb29yZHNbaV0sIGZhbHNlLCB0YXJnZXQpO1xuICAgICAgICByZW1vdmVOb2RlTGlzdGVuZXJzKGZsYXRBcm91bmRDb29yZHNbaV0sIHRhcmdldCk7XG4gICAgICAgIGF0dGFja0Z1bmN0aW9uKGZsYXRBcm91bmRDb29yZHNbaV0sIHNoaXBzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmV0dXJuQ29ybmVycyA9IChub2RlKSA9PiB7XG4gICAgY29uc3QgY29ybmVycyA9IFtdO1xuXG4gICAgY29uc3QgY29ybmVyMSA9IFtub2RlWzBdICsgMSwgbm9kZVsxXSArIDFdO1xuICAgIGNvbnN0IGNvcm5lcjIgPSBbbm9kZVswXSArIDEsIG5vZGVbMV0gKyAtMV07XG4gICAgY29uc3QgY29ybmVyMyA9IFtub2RlWzBdIC0gMSwgbm9kZVsxXSArIDFdO1xuICAgIGNvbnN0IGNvcm5lcjQgPSBbbm9kZVswXSAtIDEsIG5vZGVbMV0gLSAxXTtcblxuICAgIGNvcm5lcnMucHVzaChjb3JuZXIxLCBjb3JuZXIyLCBjb3JuZXIzLCBjb3JuZXI0KTtcblxuICAgIHJldHVybiBjb3JuZXJzO1xuICB9O1xuXG4gIGNvbnN0IGF0dGFja0Nvcm5lcnMgPSAobm9kZUNvb3JkLCBhdHRhY2tGdW5jdGlvbiwgdGFyZ2V0KSA9PiB7XG4gICAgY29uc3QgY29ybmVycyA9IHJldHVybkNvcm5lcnMobm9kZUNvb3JkKTtcblxuICAgIGNvbnN0IHZhbGlkQ29ybmVycyA9IHZhbGlkYXRlQ29vcmRzKGNvcm5lcnMpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWxpZENvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZpc3VhbEluZGljYXRvcnModmFsaWRDb3JuZXJzW2ldLCBmYWxzZSwgdGFyZ2V0KTtcbiAgICAgIHJlbW92ZU5vZGVMaXN0ZW5lcnModmFsaWRDb3JuZXJzW2ldLCB0YXJnZXQpO1xuICAgICAgYXR0YWNrRnVuY3Rpb24odmFsaWRDb3JuZXJzW2ldLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgUGxheWVyID0gKG5hbWUsIHNoaXBzQ29vcmRzKSA9PiB7XG4gICAgY29uc3QgcGxheWVyTmFtZSA9IG5hbWU7XG5cbiAgICBjb25zdCBwbGF5ZXJDb29yZHMgPSBzaGlwc0Nvb3JkcztcblxuICAgIGNvbnN0IHBsYXllckJvYXJkID0gbWFpbk9iamVjdHMuR2FtZWJvYXJkKCk7XG5cbiAgICBjb25zdCBwbGF5ZXJTaGlwcyA9IHBsYXllckJvYXJkLmRlcGxveVNoaXBzKC4uLnNoaXBzQ29vcmRzKTtcblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgICBjb25zdCByZWNlaXZlZEF0dGFjayA9IHBsYXllckJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzLCBwbGF5ZXJTaGlwcyk7XG5cbiAgICAgIGlmIChyZWNlaXZlZEF0dGFjaykge1xuICAgICAgICAvLyBpZiByZWNlaXZlZEF0dGFjayBpcyBhIHRydWUgdmFsdWUsIGl0IG1lYW5zIHRoYXQgaXQgY29udGFpbnMgYSBzdW5rZWQgc2hpcC5cbiAgICAgICAgZ2xvYmFsTG9naWMuaW5kaWNhdGVTdW5rKHJlY2VpdmVkQXR0YWNrLCAxKTtcbiAgICAgICAgYXR0YWNrQXJvdW5kKFxuICAgICAgICAgIHJlY2VpdmVkQXR0YWNrLmN1cnJlbnRDb29yZHMsXG4gICAgICAgICAgcGxheWVyQm9hcmQucmVjZWl2ZUF0dGFjayxcbiAgICAgICAgICBwbGF5ZXJTaGlwcyxcbiAgICAgICAgICBcInBsYXllclwiLFxuICAgICAgICAgIHBsYXllckJvYXJkLnN1Y2Nlc3NBdHRhY2tzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBwbGF5ZXJOYW1lLFxuICAgICAgcGxheWVyQ29vcmRzLFxuICAgICAgcGxheWVyQm9hcmQsXG4gICAgICBwbGF5ZXJTaGlwcyxcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBjcHVQbGF5ZXIgPSAoaHVtYW5QbGF5ZXIsIHNoaXBzQ29yZHMpID0+IHtcbiAgICBjb25zdCByaXZhbFBsYXllciA9IGh1bWFuUGxheWVyO1xuXG4gICAgY29uc3QgY3B1Q29vcmRzID0gc2hpcHNDb3JkcztcblxuICAgIGNvbnN0IGNwdUJvYXJkID0gbWFpbk9iamVjdHMuR2FtZWJvYXJkKCk7XG5cbiAgICBjb25zdCBjcHVTaGlwcyA9IGNwdUJvYXJkLmRlcGxveVNoaXBzKC4uLnNoaXBzQ29yZHMpO1xuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgICAgY29uc3QgcmVjZWl2ZWRBdHRhY2sgPSBjcHVCb2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzLCBjcHVTaGlwcyk7XG5cbiAgICAgIGlmIChyZWNlaXZlZEF0dGFjaykge1xuICAgICAgICAvLyBpZiByZWNlaXZlZEF0dGFjayBpcyBhIHRydWUgdmFsdWUsIGl0IG1lYW5zIHRoYXQgaXQgY29udGFpbnMgYSBzdW5rZWQgc2hpcC5cbiAgICAgICAgZ2xvYmFsTG9naWMuaW5kaWNhdGVTdW5rKHJlY2VpdmVkQXR0YWNrLCAyKTtcbiAgICAgICAgYXR0YWNrQXJvdW5kKFxuICAgICAgICAgIHJlY2VpdmVkQXR0YWNrLmN1cnJlbnRDb29yZHMsXG4gICAgICAgICAgY3B1Qm9hcmQucmVjZWl2ZUF0dGFjayxcbiAgICAgICAgICBjcHVTaGlwcyxcbiAgICAgICAgICBcImNwdVwiLFxuICAgICAgICAgIGNwdUJvYXJkLnN1Y2Nlc3NBdHRhY2tzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHVzZWRDb29yZHMgPSBbXTtcblxuICAgIGNvbnN0IGF0dGFja1BsYXllciA9IChjb29yZHMsIGlnbm9yZUNvb3JkcykgPT4ge1xuICAgICAgY29uc3QgcmFuZG9tSW50ID0gKG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcblxuICAgICAgY29uc3QgcmFuZG9tQ29vcmRzID0gW3JhbmRvbUludCgxMCksIHJhbmRvbUludCgxMCldO1xuXG4gICAgICAvLyBjYWxsIHRoZSBmdW5jdGlvbiBhZ2FpbiBhbmQgZ2VuZXJhdGUgbmV3IHJhbmRvbSBjb29yZHMgaWYgdGhlIGF0dGFjayBoYXMgYWxyZWFkeSBiZSBkb25lIGluIHRoYXQgY29vcmRpbmF0ZS5cblxuICAgICAgaWYgKFxuICAgICAgICBnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkodXNlZENvb3JkcywgcmFuZG9tQ29vcmRzKSAmJlxuICAgICAgICBpZ25vcmVDb29yZHMgIT09IHRydWVcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIGF0dGFja1BsYXllcigpO1xuXG4gICAgICBjb25zdCBhdHRhY2tMb2dpYyA9IChjb29yZGluYXRlcykgPT4ge1xuICAgICAgICByaXZhbFBsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgdXNlZENvb3Jkcy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgY29uc3Qgcml2YWxQbGF5ZXJIaXRzID0gcml2YWxQbGF5ZXIucGxheWVyQm9hcmQuc3VjY2Vzc0F0dGFja3M7XG5cbiAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShyaXZhbFBsYXllckhpdHMsIGNvb3JkaW5hdGVzKSkge1xuICAgICAgICAgIC8vIGNoZWNrIGlmIGl0IHdhcyBhIHN1Y2Nlc3NmdWwgYXR0YWNrIG9yIG5vdC5cbiAgICAgICAgICB2aXN1YWxJbmRpY2F0b3JzKGNvb3JkaW5hdGVzLCB0cnVlLCBcInBsYXllclwiKTtcbiAgICAgICAgICBhdHRhY2tDb3JuZXJzKGNvb3JkaW5hdGVzLCBhdHRhY2tQbGF5ZXIsIFwicGxheWVyXCIpO1xuICAgICAgICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlzdWFsSW5kaWNhdG9ycyhjb29yZGluYXRlcywgZmFsc2UsIFwicGxheWVyXCIpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGNvb3Jkcykge1xuICAgICAgICAvLyB3aGVuIHRoZSBjb29yZHMgYXJlIGluZGljYXRlZCBtYW51YWxseS5cbiAgICAgICAgcmV0dXJuIGF0dGFja0xvZ2ljKGNvb3Jkcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXR0YWNrTG9naWMocmFuZG9tQ29vcmRzKTsgLy8gd2hlbiB0aGUgY29vcmRzIGFyZSBnZW5lcmF0ZWQgcmFuZG9tbHkuXG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBhdHRhY2tQbGF5ZXIsXG4gICAgICBjcHVCb2FyZCxcbiAgICAgIGNwdVNoaXBzLFxuICAgICAgY3B1Q29vcmRzLFxuICAgICAgdXNlZENvb3JkcyxcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIFBsYXllcixcbiAgICBjcHVQbGF5ZXIsXG4gICAgdmlzdWFsSW5kaWNhdG9ycyxcbiAgICBhdHRhY2tDb3JuZXJzLFxuICAgIGF0dGFja0Fyb3VuZCxcbiAgICByZXR1cm5Db3JuZXJzLFxuICAgIHJldHVyblNpZGVzLFxuICAgIHZhbGlkYXRlQ29vcmRzLFxuICB9O1xufSkoKTtcblxuY29uc3QgR2FtZSA9ICgoKSA9PiB7XG4gIGNvbnN0IG5ld0dhbWUgPSAocGxheWVyTmFtZSwgcGxheWVyQ29vcmRzLCBjcHVDb29yZHMpID0+IHtcbiAgICBjb25zdCBQbGF5ZXIgPSBwbGF5ZXJMb2dpYy5QbGF5ZXIocGxheWVyTmFtZSwgcGxheWVyQ29vcmRzKTtcblxuICAgIGNvbnN0IGNwdVBsYXllciA9IHBsYXllckxvZ2ljLmNwdVBsYXllcihQbGF5ZXIsIGNwdUNvb3Jkcyk7XG5cbiAgICByZXR1cm4geyBQbGF5ZXIsIGNwdVBsYXllciB9O1xuICB9O1xuXG4gIHJldHVybiB7IG5ld0dhbWUgfTtcbn0pKCk7XG5cbmNvbnN0IERPTUxvZ2ljID0gKCgpID0+IHtcbiAgY29uc3QgZGlzcGxheUdyaWQgPSAoZ3JpZDEsIGdyaWQyKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlR3JpZCA9IChzaXplKSA9PiB7XG4gICAgICBjb25zdCByZWN1cnNpdmUgPSAoeVBvcykgPT4ge1xuICAgICAgICBpZiAoeVBvcyA9PT0gc2l6ZSkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIGdyaWRFbGVtZW50LmNsYXNzTmFtZSA9IGAke3lQb3N9LCR7aX1gO1xuXG4gICAgICAgICAgY29uc3QgZ3JpZEVsZW1lbnQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBncmlkRWxlbWVudDIuY2xhc3NOYW1lID0gYCR7eVBvc30sJHtpfWA7XG5cbiAgICAgICAgICBpZiAoZ3JpZDEpIGdyaWQxLmFwcGVuZENoaWxkKGdyaWRFbGVtZW50KTtcbiAgICAgICAgICBpZiAoZ3JpZDIpIGdyaWQyLmFwcGVuZENoaWxkKGdyaWRFbGVtZW50Mik7XG4gICAgICAgIH1cblxuICAgICAgICByZWN1cnNpdmUoeVBvcyArIDEpO1xuICAgICAgfTtcbiAgICAgIHJlY3Vyc2l2ZSgwKTtcbiAgICB9O1xuXG4gICAgY3JlYXRlR3JpZCgxMCk7XG4gIH07XG5cbiAgY29uc3QgZmxhdENvb3JkcyA9IChjb29yZHNBcnIpID0+IHtcbiAgICBjb25zdCBvbmVEaW1lbnNpb25Db29yZHMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb29yZHMgPSBjb29yZHNBcnJbaV07XG5cbiAgICAgIGlmICh0eXBlb2YgY29vcmRzWzBdID09PSBcIm9iamVjdFwiKSBvbmVEaW1lbnNpb25Db29yZHMucHVzaCguLi5jb29yZHMpO1xuICAgICAgLy8gaWYgdGhlIHNoaXBzIGhhdmUgbW9yZSB0aGFuIG9uZSBjb29yZGluYXRlLlxuICAgICAgZWxzZSBvbmVEaW1lbnNpb25Db29yZHMucHVzaChjb29yZHMpO1xuICAgIH1cbiAgICByZXR1cm4gb25lRGltZW5zaW9uQ29vcmRzO1xuICB9O1xuXG4gIGNvbnN0IGdlbkluZGljYXRvcnMgPSAoeENvbnRhaW5lciwgeUNvbnRhaW5lcikgPT4ge1xuICAgIGNvbnN0IGdyaWRJbmRpY2F0b3JzWCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xuICAgIGNvbnN0IGdyaWRJbmRpY2F0b3JzWSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xuXG4gICAgZ3JpZEluZGljYXRvcnNYLmNsYXNzTGlzdC5hZGQoXCJYXCIpO1xuICAgIGdyaWRJbmRpY2F0b3JzWS5jbGFzc0xpc3QuYWRkKFwiWVwiKTtcblxuICAgIGNvbnN0IGFscGhhYmV0ID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkhcIiwgXCJJXCIsIFwiSlwiXTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDEwOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGk7XG4gICAgICBncmlkSW5kaWNhdG9yc1kuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsZW1lbnQyLnRleHRDb250ZW50ID0gYWxwaGFiZXRbaSAtIDFdO1xuICAgICAgZ3JpZEluZGljYXRvcnNYLmFwcGVuZENoaWxkKGVsZW1lbnQyKTtcbiAgICB9XG5cbiAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRJbmRpY2F0b3JzWCk7XG4gICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZChncmlkSW5kaWNhdG9yc1kpO1xuICB9O1xuXG4gIGNvbnN0IFVJTG9naWMgPSAobm9kZXMsIGdhbWVJbmZvKSA9PiB7XG4gICAgY29uc3QgcGxheWVyMUNvb3JkcyA9IGdhbWVJbmZvLlBsYXllci5wbGF5ZXJTaGlwcy5jb29yZGluYXRlcztcblxuICAgIGNvbnN0IHBsYXllcjJDb29yZHMgPSBnYW1lSW5mby5jcHVQbGF5ZXIuY3B1U2hpcHMuY29vcmRpbmF0ZXM7XG5cbiAgICBjb25zdCBhdHRhY2tQbGF5ZXIgPSAoY29vcmQpID0+IGdhbWVJbmZvLlBsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkKTtcblxuICAgIGNvbnN0IGF0dGFja0NwdSA9IChjb29yZCkgPT4gZ2FtZUluZm8uY3B1UGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmQpO1xuXG4gICAgY29uc3QgYXR0YWNrT25DbGljayA9IChzaGlwQ29vcmRzLCBub2RlQ29vcmQsIGF0dGFja0Z1bmN0aW9uKSA9PiB7XG4gICAgICAvLyBpZiB0aGUgcGxheWVyIGhhcyBhIHNoaXAgaW4gdGhlIGNsaWNrZWQgY29vcmRpbmF0ZSwgYXR0YWNrIHRoZSBwbGF5ZXIgdG8gdGhhdCBzcGVjaWZpYyBjb29yZC5cbiAgICAgIGxldCB3YXNTdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KE9iamVjdC52YWx1ZXMoc2hpcENvb3JkcyksIG5vZGVDb29yZCkpIHtcbiAgICAgICAgLy8gd2hlbiB0aGUgbm9kZUNvb3JkIGlzIGluc2lkZSBvZiBhIG9uZS1jb29yZGluYXRlIHNoaXAsIHRoaXMgY29uZGl0aW9uYWwgaXMgdXNlZC5cbiAgICAgICAgYXR0YWNrRnVuY3Rpb24obm9kZUNvb3JkKTtcbiAgICAgICAgd2FzU3VjY2Vzc2Z1bCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gd2hlbiB0aGUgbm9kZUNvb3JkIGlzIGluc2lkZSBvZiBhIG11bHRpcGxlLWNvb3JkaW5hdGUgc2hpcC5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcENvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGNvb3JkcyBhcnJheSBvZiBlYWNoIHNoaXAsIHVudGlsIHRoZSBub2RlQ29vcmQgaXMgZm91bmQuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBzaGlwQ29vcmRzW2ldO1xuICAgICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGN1cnJlbnRDb29yZHMsIG5vZGVDb29yZCkpIHtcbiAgICAgICAgICBhdHRhY2tGdW5jdGlvbihub2RlQ29vcmQpO1xuICAgICAgICAgIHdhc1N1Y2Nlc3NmdWwgPSB0cnVlO1xuXG4gICAgICAgICAgYnJlYWs7IC8vIHN0b3AgbG9vcGluZyB0aHJvdWdoIHRoZSBzaGlwcyBjb29yZHMgdG8gb3B0aW1pemUgdGltZSBjb21wbGV4aXR5LlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gd2FzU3VjY2Vzc2Z1bDtcbiAgICB9O1xuXG4gICAgLy8gbm90ZSwgdGhlIGF0dGFja09uQ2xpY2sgZnVuY3Rpb24gd2lsbCBhbHdheXMgY2FsbCB0aGUgYXR0YWNrRnVuY3Rpb24gb24gYSBzdWNjZXNzZnVsIGF0dGFjay5cbiAgICAvLyB0aGF0J3Mgd2h5IHdlIHdpbGwgbmVlZCB0aGUgbmV4dCBmdW5jdGlvbi5cblxuICAgIGNvbnN0IG1pc3NlZEF0dGFja09uQ2xpY2sgPSAobm9kZUNvb3JkLCBhdHRhY2tGdW5jdGlvbikgPT4ge1xuICAgICAgYXR0YWNrRnVuY3Rpb24obm9kZUNvb3JkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgZGV0ZWN0QXR0YWNrcyA9IChlKSA9PiB7XG4gICAgICBjb25zdCBwYXJlbnRDbGFzcyA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lO1xuXG4gICAgICBjb25zdCBub2RlQ2xhc3MgPSBlLnRhcmdldC5jbGFzc05hbWU7XG5cbiAgICAgIGNvbnN0IG5vZGVDb29yZCA9IGdsb2JhbExvZ2ljLmNsYXNzVG9BcnJheShub2RlQ2xhc3MpO1xuXG4gICAgICBpZiAocGFyZW50Q2xhc3MgPT09IFwiZ3JpZC0xXCIpIHtcbiAgICAgICAgLy8gaWYgdGhlIGNsaWNrZWQgY29vcmRpbmF0ZSBpcyBpbnNpZGUgb2YgZ3JpZC0xLCB3ZSBrbm93IHRoYXQgaXQgaXMgYW4gYXR0YWNrIHRvIHBsYXllcjEuXG5cbiAgICAgICAgY29uc3QgY2xlYW5Db29yZHMgPSBPYmplY3QudmFsdWVzKHBsYXllcjFDb29yZHMpLmZpbHRlcihcbiAgICAgICAgICAoY29vcmRzKSA9PiBjb29yZHMgIT09IHVuZGVmaW5lZFxuICAgICAgICApOyAvLyBmaWx0ZXIgdW5kZWZpbmVkIGNvb3Jkcy5cblxuICAgICAgICBpZiAoYXR0YWNrT25DbGljayhjbGVhbkNvb3Jkcywgbm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIHRydWUsIFwicGxheWVyXCIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLmF0dGFja0Nvcm5lcnMobm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIsIFwicGxheWVyXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NlZEF0dGFja09uQ2xpY2sobm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLnZpc3VhbEluZGljYXRvcnMobm9kZUNsYXNzLCBmYWxzZSwgXCJwbGF5ZXJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudENsYXNzID09PSBcImdyaWQtMlwiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuQ29vcmRzID0gT2JqZWN0LnZhbHVlcyhwbGF5ZXIyQ29vcmRzKS5maWx0ZXIoXG4gICAgICAgICAgKGNvb3JkcykgPT4gY29vcmRzICE9PSB1bmRlZmluZWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoYXR0YWNrT25DbGljayhjbGVhbkNvb3Jkcywgbm9kZUNvb3JkLCBhdHRhY2tDcHUpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIHRydWUsIFwiY3B1XCIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLmF0dGFja0Nvcm5lcnMobm9kZUNvb3JkLCBhdHRhY2tDcHUsIFwiY3B1XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NlZEF0dGFja09uQ2xpY2sobm9kZUNvb3JkLCBhdHRhY2tDcHUpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLnZpc3VhbEluZGljYXRvcnMobm9kZUNsYXNzLCBmYWxzZSwgXCJjcHVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZXRlY3RBdHRhY2tzLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IChcbiAgICBncmlkQ29udGFpbmVyMSxcbiAgICBncmlkQ29udGFpbmVyMixcbiAgICBwbGF5ZXJDb29yZHMsXG4gICAgY3B1Q29vcmRzXG4gICkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRHYW1lID0gR2FtZS5uZXdHYW1lKFwiZXhhbXBsZVwiLCBwbGF5ZXJDb29yZHMsIGNwdUNvb3Jkcyk7XG5cbiAgICBpZiAoZ3JpZENvbnRhaW5lcjEuY2xhc3NOYW1lICE9PSBcInNob3duLWdyaWRcIikge1xuICAgICAgVUlMb2dpYyhncmlkQ29udGFpbmVyMS5jaGlsZE5vZGVzLCBjdXJyZW50R2FtZSk7XG4gICAgfVxuXG4gICAgaWYgKGdyaWRDb250YWluZXIyLmNsYXNzTmFtZSAhPT0gXCJzaG93bi1ncmlkXCIpIHtcbiAgICAgIFVJTG9naWMoZ3JpZENvbnRhaW5lcjIuY2hpbGROb2RlcywgY3VycmVudEdhbWUpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGN1cnJlbnRHYW1lLCBncmlkQ29udGFpbmVyMSwgZ3JpZENvbnRhaW5lcjIgfTtcbiAgfTtcblxuICBjb25zdCBnZW5ET01FbGVtZW50cyA9ICgpID0+IHtcbiAgICBjb25zdCBzaG93U2hpcHMgPSAoY3VycmVudENvb3JkcywgZ3JpZE51bWJlcikgPT4ge1xuICAgICAgY29uc3QgY29vcmRzID0gZmxhdENvb3JkcyhjdXJyZW50Q29vcmRzKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ2xvYmFsTG9naWMuY2hhbmdlQ29vcmRDb2xvcihcbiAgICAgICAgICBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY29vcmRzW2ldKSxcbiAgICAgICAgICBncmlkTnVtYmVyLFxuICAgICAgICAgIFwiZ3JlZW5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBkZWxldGVFbGVtZW50cyA9IChpbmRleCkgPT4ge1xuICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLWNvbnRhaW5lclwiKVtpbmRleF07XG4gICAgICBpZiAobWFpbkNvbnRhaW5lcikgbWFpbkNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuR3JpZCA9IChwbGF5ZXJJbmRleCwgY29vcmRzKSA9PiB7XG4gICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG4gICAgICBtYWluQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwibWFpbi1jb250YWluZXJcIjtcblxuICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuICAgICAgaWYgKG1haW4pIG1haW4uYXBwZW5kQ2hpbGQobWFpbkNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IGdyaWRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGdyaWRzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZ3JpZHMtY29udGFpbmVyXCI7XG5cbiAgICAgIGlmIChtYWluQ29udGFpbmVyKSBtYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRzQ29udGFpbmVyKTtcblxuICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgIG5hbWUudGV4dENvbnRlbnQgPSBgUGxheWVyJ3MgJHtwbGF5ZXJJbmRleH0gR3JpZGA7XG4gICAgICBncmlkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lKTtcblxuICAgICAgY29uc3QgZ3JpZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZ3JpZFdyYXBwZXIuY2xhc3NOYW1lID0gXCJncmlkLXdyYXBwZXJcIjtcblxuICAgICAgZ2VuSW5kaWNhdG9ycyhncmlkc0NvbnRhaW5lciwgZ3JpZFdyYXBwZXIpOyAvLyBnZW4gaW5kaWNhdG9ycyBoZXJlIHRvIHB1dCBcIlhcIiBjb250YWluZXIgYWJvdmUgdGhlIGdyaWQuXG5cbiAgICAgIGdyaWRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRXcmFwcGVyKTtcblxuICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBncmlkLmNsYXNzTmFtZSA9IGBncmlkLSR7cGxheWVySW5kZXh9YDtcbiAgICAgIGdyaWRXcmFwcGVyLmFwcGVuZENoaWxkKGdyaWQpO1xuXG4gICAgICBpZiAocGxheWVySW5kZXggPT09IDEpIERPTUxvZ2ljLmRpc3BsYXlHcmlkKGdyaWQsIG51bGwpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIERPTUxvZ2ljLmRpc3BsYXlHcmlkKG51bGwsIGdyaWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29vcmRzKSB7XG4gICAgICAgIGdyaWQuY2xhc3NOYW1lID0gYHNob3duLWdyaWRgO1xuICAgICAgICBzaG93U2hpcHMoY29vcmRzLCBwbGF5ZXJJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBncmlkO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5TdGFydEJ1dHRvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHN0YXJ0QnV0dG9uLmNsYXNzTmFtZSA9IFwic3RhcnQtYnV0dG9uXCI7XG4gICAgICBzdGFydEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU3RhcnQgR2FtZVwiO1xuICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJ1dHRvbi13cmFwcGVyXCIpWzBdO1xuICAgICAgaWYgKGJ1dHRvbkNvbnRhaW5lcikgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXJ0QnV0dG9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQ29vcmRJbnB1dHMgPSAoKSA9PiB7XG5cbiAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWFpbi1jb250YWluZXJcIilbMF07XG5cbiAgICAgIGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICBpbnB1dFRpdGxlLmNsYXNzTGlzdC5hZGQoYGlucHV0cy1jb250YWluZXJgKTtcbiAgICAgIGlucHV0VGl0bGUuaHRtbEZvciA9IFwic2VsZWN0LXNoaXBzXCJcbiAgICAgIGlucHV0VGl0bGUudGV4dENvbnRlbnQgPSBcIlNldCBJbml0aWFsIENvb3JkXCJcbiAgICAgIG1haW5Db250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXRUaXRsZSk7XG5cbiAgICAgIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgICAgc2VsZWN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGBzZWxlY3Qtc2hpcHNgKTtcbiAgICAgIGlucHV0VGl0bGUuYXBwZW5kQ2hpbGQoc2VsZWN0RWxlbWVudCk7XG5cbiAgICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBpbnB1dFdyYXBwZXIuY2xhc3NMaXN0LmFkZChgaW5wdXQtd3JhcHBlcmApO1xuICAgICAgaW5wdXRUaXRsZS5hcHBlbmRDaGlsZChpbnB1dFdyYXBwZXIpO1xuXG4gICAgICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBpbnB1dDEuY2xhc3NMaXN0LmFkZChgY29vcmRzLWlucHV0YCk7XG4gICAgICBpbnB1dFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQxKTtcblxuICAgICAgY29uc3QgaW5wdXRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBpbnB1dFRleHQuY2xhc3NMaXN0LmFkZChgaW5wdXQtdGV4dGApO1xuICAgICAgaW5wdXRUZXh0LnRleHRDb250ZW50ID0gXCIsXCJcbiAgICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xuXG4gICAgICBjb25zdCBpbnB1dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBpbnB1dDIuY2xhc3NMaXN0LmFkZChgY29vcmRzLWlucHV0YCk7XG4gICAgICBpbnB1dFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQyKTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGBhcHBseS1jb29yZHNgKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQXBwbHlcIlxuICAgICAgaW5wdXRUaXRsZS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xuXG4gICAgICBjb25zdCBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uMS52YWx1ZSA9IFwiY2FycmllclwiXG4gICAgICBvcHRpb24xLnRleHRDb250ZW50ID0gXCJDYXJyaWVyXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjEpXG5cbiAgICAgIGNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpXG4gICAgICBvcHRpb24yLnZhbHVlID0gXCJiYXR0bGVzaGlwMVwiXG4gICAgICBvcHRpb24yLnRleHRDb250ZW50ID0gXCJCYXR0bGVzaGlwIDFcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uMilcblxuICAgICAgY29uc3Qgb3B0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIilcbiAgICAgIG9wdGlvbjMudmFsdWUgPSBcImJhdHRsZXNoaXAyXCJcbiAgICAgIG9wdGlvbjMudGV4dENvbnRlbnQgPSBcIkJhdHRsZXNoaXAgMlwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24zKVxuXG4gICAgICBjb25zdCBvcHRpb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uNC52YWx1ZSA9IFwiY3J1aXNlcjFcIlxuICAgICAgb3B0aW9uNC50ZXh0Q29udGVudCA9IFwiQ3J1aXNlciAxXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjQpXG5cbiAgICAgIGNvbnN0IG9wdGlvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpXG4gICAgICBvcHRpb241LnZhbHVlID0gXCJjcnVpc2VyMlwiXG4gICAgICBvcHRpb241LnRleHRDb250ZW50ID0gXCJDcnVpc2VyIDJcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uNSlcblxuICAgICAgY29uc3Qgb3B0aW9uNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIilcbiAgICAgIG9wdGlvbjYudmFsdWUgPSBcImNydWlzZXIzXCJcbiAgICAgIG9wdGlvbjYudGV4dENvbnRlbnQgPSBcIkNydWlzZXIgM1wiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb242KVxuXG4gICAgICBjb25zdCBvcHRpb243ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uNy52YWx1ZSA9IFwiZGVzdHJveWVyMVwiXG4gICAgICBvcHRpb243LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgMVwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb243KVxuXG4gICAgICBjb25zdCBvcHRpb244ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uOC52YWx1ZSA9IFwiZGVzdHJveWVyMlwiXG4gICAgICBvcHRpb244LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgMlwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb244KVxuXG4gICAgICBjb25zdCBvcHRpb245ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgb3B0aW9uOS52YWx1ZSA9IFwiZGVzdHJveWVyM1wiXG4gICAgICBvcHRpb245LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgM1wiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb245KVxuXG4gICAgICBjb25zdCBvcHRpb24xMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIilcbiAgICAgIG9wdGlvbjEwLnZhbHVlID0gXCJkZXN0cm95ZXI0XCJcbiAgICAgIG9wdGlvbjEwLnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgNFwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24xMClcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQnV0dG9uV3JhcHBlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYnV0dG9uV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uLXdyYXBwZXJcIik7XG5cbiAgICAgIGNvbnN0IGdyaWRzQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWRzLWNvbnRhaW5lclwiKVswXTtcblxuICAgICAgaWYgKGdyaWRzQ29udGFpbmVyKSBncmlkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25XcmFwcGVyKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuUmFuZG9taXplQnV0dG9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmFuZG9tQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHJhbmRvbUJ1dHRvbi5jbGFzc05hbWUgPSBcInJhbmRvbS1idXR0b25cIjtcbiAgICAgIHJhbmRvbUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUmFuZG9taXplXCI7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnV0dG9uLXdyYXBwZXJcIilbMF07XG4gICAgICBpZiAoYnV0dG9uQ29udGFpbmVyKSBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmFuZG9tQnV0dG9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQ3VzdG9taXplQnV0dG9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9taXplQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGN1c3RvbWl6ZUJ1dHRvbi5jbGFzc05hbWUgPSBcImN1c3RvbWl6ZS1idXR0b25cIjtcbiAgICAgIGN1c3RvbWl6ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3VzdG9taXplXCI7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnV0dG9uLXdyYXBwZXJcIilbMF07XG4gICAgICBpZiAoYnV0dG9uQ29udGFpbmVyKSBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY3VzdG9taXplQnV0dG9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQnV0dG9ucyA9ICgpID0+IHtcbiAgICAgIGdlbkJ1dHRvbldyYXBwZXIoKTtcbiAgICAgIGdlblJhbmRvbWl6ZUJ1dHRvbigpO1xuICAgICAgZ2VuU3RhcnRCdXR0b24oKTtcbiAgICAgIGdlbkN1c3RvbWl6ZUJ1dHRvbigpO1xuICAgIH07XG5cbiAgICByZXR1cm4geyBnZW5HcmlkLCBkZWxldGVFbGVtZW50cywgZ2VuQnV0dG9ucywgZ2VuQ29vcmRJbnB1dHMgfTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVNb2RhbCA9ICh3aW5uZXIsIGNwdVdpbikgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpYWxvZ1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIik7XG4gICAgYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG5cbiAgICBjb25zdCBtb2RhbFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKG1vZGFsVGV4dCk7XG5cbiAgICBpZiAoIWNwdVdpbikgbW9kYWxUZXh0LnRleHRDb250ZW50ID0gYENvbmdyYXR1bGF0aW9ucyAke3dpbm5lcn0sIHlvdSB3b24hYDtcbiAgICBlbHNlIHtcbiAgICAgIG1vZGFsVGV4dC50ZXh0Q29udGVudCA9IGAke3dpbm5lcn0gd29uLCB0cnkgYWdhaW4hYDtcbiAgICB9XG5cbiAgICBjb25zdCByZWxvYWRHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICByZWxvYWRHYW1lQnV0dG9uLnRleHRDb250ZW50ID0gXCJOZXcgR2FtZVwiO1xuXG4gICAgY29uc3QgcmVsb2FkUGFnZSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblxuICAgIHJlbG9hZEdhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbG9hZFBhZ2UpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKHJlbG9hZEdhbWVCdXR0b24pO1xuXG4gICAgaWYgKG1vZGFsKSBtb2RhbC5zaG93TW9kYWwoKTtcbiAgfTtcblxuICBjb25zdCBlbmRHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IHBsYXllcjFHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWQtMVwiKVswXTtcblxuICAgIGNvbnN0IHBsYXllcjJHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWQtMlwiKVswXTtcblxuICAgIC8vIGNsb25lZCBlbGVtZW50cyBkbyBub3QgY2FycnkgZXZlbnQgbGlzdGVuZXJzLlxuXG4gICAgaWYgKHBsYXllcjFHcmlkKSBwbGF5ZXIxR3JpZC5yZXBsYWNlV2l0aChwbGF5ZXIxR3JpZC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgaWYgKHBsYXllcjJHcmlkKSBwbGF5ZXIyR3JpZC5yZXBsYWNlV2l0aChwbGF5ZXIyR3JpZC5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9O1xuXG4gIHJldHVybiB7IHN0YXJ0R2FtZSwgZGlzcGxheUdyaWQsIGdlbkRPTUVsZW1lbnRzLCBlbmRHYW1lLCBjcmVhdGVNb2RhbCB9O1xufSkoKTtcblxuY29uc3QgR2FtZUxvb3AgPSAoKCkgPT4ge1xuICBjb25zdCBnZW5ET00gPSBET01Mb2dpYy5nZW5ET01FbGVtZW50cygpO1xuXG4gIGNvbnN0IGdhbWVUdXJucyA9IChwbGF5ZXIxLCBwbGF5ZXIyKSA9PiB7XG4gICAgY29uc3QgcGxheWVyMVNoaXBzID0gcGxheWVyMS5wbGF5ZXJTaGlwcztcblxuICAgIGNvbnN0IHBsYXllcjJTaGlwcyA9IHBsYXllcjIuY3B1U2hpcHM7XG5cbiAgICBjb25zdCB0dXJuc0xvZ2ljID0gKCkgPT4ge1xuICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgIHBsYXllcjIuYXR0YWNrUGxheWVyKCk7XG5cbiAgICAgIGlmIChwbGF5ZXIxLnBsYXllckJvYXJkLmNoZWNrU3VuayhwbGF5ZXIxU2hpcHMpKSB7XG4gICAgICAgIERPTUxvZ2ljLmVuZEdhbWUoKTtcbiAgICAgICAgRE9NTG9naWMuY3JlYXRlTW9kYWwoXCJQbGF5ZXIyXCIsIHRydWUpO1xuICAgICAgICBpc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBsYXllcjIuY3B1Qm9hcmQuY2hlY2tTdW5rKHBsYXllcjJTaGlwcykpIHtcbiAgICAgICAgRE9NTG9naWMuZW5kR2FtZSgpO1xuICAgICAgICBET01Mb2dpYy5jcmVhdGVNb2RhbChcIlBsYXllcjFcIik7XG4gICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNHYW1lT3ZlcjtcbiAgICB9O1xuICAgIHJldHVybiB7IHR1cm5zTG9naWMgfTtcbiAgfTtcblxuICBjb25zdCBmbGF0Q29vcmRzID0gKGVsZW1lbnRzKSA9PiB7XG4gICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBtdWx0aXBsZUNvb3JkU2hpcHMgPSBlbGVtZW50cy5maWx0ZXIoXG4gICAgICAgIChlbCkgPT4gdHlwZW9mIGVsWzBdID09PSBcIm9iamVjdFwiXG4gICAgICApO1xuXG4gICAgICBjb25zdCBvbmVDb29yZFNoaXBzID0gZWxlbWVudHMuZmlsdGVyKChlbCkgPT4gdHlwZW9mIGVsWzBdID09PSBcIm51bWJlclwiKTtcblxuICAgICAgY29uc3QgZmxhdHRlZENvb3JkcyA9IG11bHRpcGxlQ29vcmRTaGlwcy5mbGF0KCkuY29uY2F0KG9uZUNvb3JkU2hpcHMpO1xuXG4gICAgICByZXR1cm4gZmxhdHRlZENvb3JkcztcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3Vycm91bmRDb29yZHMgPSAobm9kZUNvb3JkKSA9PiB7XG4gICAgY29uc3QgZ2V0U3VycnVvbmRzID0gKG5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdXJyb3VuZHMgPSBbXG4gICAgICAgIC4uLnBsYXllckxvZ2ljLnJldHVybkNvcm5lcnMobm9kZSksXG4gICAgICAgIC4uLnBsYXllckxvZ2ljLnJldHVyblNpZGVzKG5vZGUpLFxuICAgICAgICBub2RlLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIHBsYXllckxvZ2ljLnZhbGlkYXRlQ29vcmRzKGN1cnJlbnRTdXJyb3VuZHMpO1xuICAgIH07XG5cbiAgICBjb25zdCBjb29yZHMgPSBbXTtcblxuICAgIGlmICh0eXBlb2Ygbm9kZUNvb3JkWzBdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyBvbmUtY29vcmQgc2hpcFxuICAgICAgY29uc3Qgc3Vycm91bmQgPSBnZXRTdXJydW9uZHMobm9kZUNvb3JkKTtcbiAgICAgIGNvb3Jkcy5wdXNoKC4uLnN1cnJvdW5kKTtcblxuICAgICAgY29uc3Qgbm9SZXBlYXRTdHJpbmcgPSBuZXcgU2V0KGNvb3Jkcy5tYXAoKHgpID0+IEpTT04uc3RyaW5naWZ5KHgpKSk7XG5cbiAgICAgIGNvbnN0IG5vUmVwZWF0Q29vcmRzID0gWy4uLm5vUmVwZWF0U3RyaW5nXS5tYXAoKHgpID0+IEpTT04ucGFyc2UoeCkpO1xuICAgICAgcmV0dXJuIG5vUmVwZWF0Q29vcmRzO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUNvb3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Q29vcmQgPSBub2RlQ29vcmRbaV07XG4gICAgICBjb25zdCBzdXJyb3VuZCA9IGdldFN1cnJ1b25kcyhjdXJyZW50Q29vcmQpO1xuXG4gICAgICBjb29yZHMucHVzaCguLi5zdXJyb3VuZCk7XG4gICAgfVxuICAgIGNvbnN0IG5vUmVwZWF0U3RyaW5nID0gbmV3IFNldChjb29yZHMubWFwKCh4KSA9PiBKU09OLnN0cmluZ2lmeSh4KSkpO1xuXG4gICAgY29uc3Qgbm9SZXBlYXRDb29yZHMgPSBbLi4ubm9SZXBlYXRTdHJpbmddLm1hcCgoeCkgPT4gSlNPTi5wYXJzZSh4KSk7XG5cbiAgICByZXR1cm4gbm9SZXBlYXRDb29yZHM7XG4gIH07XG5cbiAgY29uc3QgZ2VuQ29vcmRzID0gKCkgPT4ge1xuICAgIGNvbnN0IHJhbmRvbUludCA9IChtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG5cbiAgICBjb25zdCByYW5kb21PcmllbnRhdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG51bWJlciA9IHJhbmRvbUludCgyKTtcblxuICAgICAgaWYgKG51bWJlciA9PT0gMCkgcmV0dXJuIFwiaFwiO1xuICAgICAgcmV0dXJuIFwidlwiO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5SYW5kb21Db29yZHMgPSAob3JpZW50YXRpb24sIHNpemUsIHByZXZpb3VzQ29vcmRzKSA9PiB7XG4gICAgICBpZiAocHJldmlvdXNDb29yZHMpIHtcbiAgICAgICAgY29uc3QgdmVydGljYWxDb29yZHMgPSBbcHJldmlvdXNDb29yZHNbMF0gKyAxLCBwcmV2aW91c0Nvb3Jkc1sxXV07XG4gICAgICAgIGNvbnN0IGhvcml6b250YWxDb29yZHMgPSBbcHJldmlvdXNDb29yZHNbMF0sIHByZXZpb3VzQ29vcmRzWzFdICsgMV07XG5cbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSBcInZcIikgcmV0dXJuIHZlcnRpY2FsQ29vcmRzO1xuXG4gICAgICAgIHJldHVybiBob3Jpem9udGFsQ29vcmRzO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmFuZG9tQ29vcmRzO1xuXG4gICAgICAvLyBzdWJzdHJhY3QgdGhlIHNpemUgZGVwZW5kaW5nIG9uIHRoZSBvcmllbnRhdGlvbiwgaW4gb3JkZXIgdG8gaGF2ZSBzcGFjZSBmb3IgdGhlIG5leHQgY29vcmRzIG9mIHRoZSBzaGlwLlxuICAgICAgaWYgKG9yaWVudGF0aW9uID09PSBcInZcIilcbiAgICAgICAgcmFuZG9tQ29vcmRzID0gW3JhbmRvbUludCgxMCAtIHNpemUpLCByYW5kb21JbnQoMTApXTtcbiAgICAgIGVsc2Uge1xuICAgICAgICByYW5kb21Db29yZHMgPSBbcmFuZG9tSW50KDEwKSwgcmFuZG9tSW50KDEwIC0gc2l6ZSldO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2l6ZSA9PT0gMSkgcmFuZG9tQ29vcmRzID0gW3JhbmRvbUludCgxMCksIHJhbmRvbUludCgxMCldO1xuXG4gICAgICByZXR1cm4gcmFuZG9tQ29vcmRzO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5TaGlwQ29vcmQgPSAoc2l6ZSwgdXNlZENvb3JkcykgPT4ge1xuICAgICAgY29uc3Qgc2hpcENvb3JkcyA9IFtdO1xuXG4gICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG5cbiAgICAgIGNvbnN0IGludmFsaWRDb29yZHMgPSBmbGF0Q29vcmRzKHVzZWRDb29yZHMpO1xuXG4gICAgICBjb25zdCBnZW5Jbml0aWFsQ29vcmRzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjb29yZHMgPSBnZW5SYW5kb21Db29yZHMob3JpZW50YXRpb24sIHNpemUpO1xuXG4gICAgICAgIGlmICghZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGludmFsaWRDb29yZHMsIGNvb3JkcykpIHtcbiAgICAgICAgICAvLyB2YWxpZGF0ZSB0aGF0IHRoZSBpbml0aWFsIGNvb3JkIGlzIGluIGEgdmFsaWQgcG9zaXRpb25cbiAgICAgICAgICBzaGlwQ29vcmRzLnB1c2goY29vcmRzKTtcbiAgICAgICAgfSBlbHNlIGdlbkluaXRpYWxDb29yZHMoKTsgLy8gaWYgdGhlIGdlbmVyYXRlZCBjb29yZHMgYXJlIGFscmVhZHkgdXNlZCwgZ2VuZXJhdGUgbmV3IGNvb3Jkcy5cbiAgICAgIH07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQ29vcmRzID0gc2hpcENvb3Jkc1tzaGlwQ29vcmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBjb29yZHMgPSBnZW5SYW5kb21Db29yZHMob3JpZW50YXRpb24sIHNpemUsIHByZXZpb3VzQ29vcmRzKTtcblxuICAgICAgICBpZiAocHJldmlvdXNDb29yZHMpIHtcbiAgICAgICAgICBzaGlwQ29vcmRzLnB1c2goY29vcmRzKTtcbiAgICAgICAgfSBlbHNlIGdlbkluaXRpYWxDb29yZHMoKTtcbiAgICAgIH1cblxuICAgICAgLy8gbXVsdGlwbGUgY29vcmRpbmF0ZSBzaGlwXG4gICAgICBpZiAoc2hpcENvb3Jkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzaGlwQ29vcmRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzaGlwQ29vcmRzW2luZGV4XTtcbiAgICAgICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGludmFsaWRDb29yZHMsIGVsZW1lbnQpKVxuICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOyAvLyBpZiBvbmUgZWxlbWVudCBvZiB0aGUgc2hpcCBoYXMgYSBpbnZhbGlkIHBvc2l0aW9uLCBpc1ZhbGlkIGlzIGZhbHNlLlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgPT09IGZhbHNlKSByZXR1cm4gZ2VuU2hpcENvb3JkKHNpemUsIGludmFsaWRDb29yZHMpOyAvLyBhbmQgd2hlbiBpc1ZhbGlkIGlzIGZhbHNlLCB3ZSByZWN1cnNpdmVseSBjaGFuZ2UgdGhlIHNoaXAgcG9zaXRpb24sIHVudGlsIGl0IGlzIHZhbGlkLlxuXG4gICAgICAgIHJldHVybiBzaGlwQ29vcmRzO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmUgY29vcmRpbmF0ZSBzaGlwLlxuICAgICAgcmV0dXJuIHNoaXBDb29yZHNbMF07XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkJhdHRsZXNoaXBzID0gKCkgPT4ge1xuICAgICAgY29uc3QgdXNlZENvb3JkcyA9IFtdO1xuXG4gICAgICBjb25zdCBjYXJyaWVyID0gZ2VuU2hpcENvb3JkKDQsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGNhcnJpZXIpKTtcblxuICAgICAgY29uc3QgYmF0dGxlU2hpcCA9IGdlblNoaXBDb29yZCgzLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhiYXR0bGVTaGlwKSk7XG5cbiAgICAgIGNvbnN0IGJhdHRsZVNoaXAxID0gZ2VuU2hpcENvb3JkKDMsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGJhdHRsZVNoaXAxKSk7XG5cbiAgICAgIGNvbnN0IGNydWlzZXIgPSBnZW5TaGlwQ29vcmQoMiwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoY3J1aXNlcikpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMSA9IGdlblNoaXBDb29yZCgyLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhjcnVpc2VyMSkpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMiA9IGdlblNoaXBDb29yZCgyLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhjcnVpc2VyMikpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIgPSBnZW5TaGlwQ29vcmQoMSwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoZGVzdHJveWVyKSk7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjEgPSBnZW5TaGlwQ29vcmQoMSwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoZGVzdHJveWVyMSkpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIyID0gZ2VuU2hpcENvb3JkKDEsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGRlc3Ryb3llcjIpKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMyA9IGdlblNoaXBDb29yZCgxLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhkZXN0cm95ZXIzKSk7XG5cbiAgICAgIGNvbnN0IGNvb3JkcyA9IFtcbiAgICAgICAgY2FycmllcixcbiAgICAgICAgYmF0dGxlU2hpcCxcbiAgICAgICAgYmF0dGxlU2hpcDEsXG4gICAgICAgIGNydWlzZXIsXG4gICAgICAgIGNydWlzZXIxLFxuICAgICAgICBjcnVpc2VyMixcbiAgICAgICAgZGVzdHJveWVyLFxuICAgICAgICBkZXN0cm95ZXIxLFxuICAgICAgICBkZXN0cm95ZXIyLFxuICAgICAgICBkZXN0cm95ZXIzLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIHsgY29vcmRzLCB1c2VkQ29vcmRzIH07XG4gICAgfTtcblxuICAgIHJldHVybiB7IGdlbkJhdHRsZXNoaXBzLCBnZW5TaGlwQ29vcmQsIHN1cnJvdW5kQ29vcmRzIH07XG4gIH07XG5cbiAgY29uc3Qgcm90YXRlQ29vcmRzID0gKHNoaXApID0+IHtcbiAgICBjb25zdCBjaGVja09yaWVudGF0aW9uID0gKCkgPT4ge1xuICAgICAgaWYgKHNoaXAuY29vcmRzWzBdWzBdICsgMSA9PT0gc2hpcC5jb29yZHNbMV1bMF0pIHJldHVybiBcInZcIjtcbiAgICAgIHJldHVybiBcImhcIjtcbiAgICB9O1xuXG4gICAgaWYgKGNoZWNrT3JpZW50YXRpb24oKSA9PT0gXCJ2XCIpIHtcbiAgICAgIGxldCBuZXdBcnJheSA9IFtzaGlwLmZpcnN0Q29vcmRdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuY29vcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCB5UG9zID0gbmV3QXJyYXlbaV1bMF07XG4gICAgICAgIGNvbnN0IHhQb3MgPSBuZXdBcnJheVtpXVsxXSArIDE7XG5cbiAgICAgICAgY29uc3QgbmV3Q29vcmQgPSBbeVBvcywgeFBvc107XG5cbiAgICAgICAgbmV3QXJyYXkgPSBuZXdBcnJheS5jb25jYXQoW25ld0Nvb3JkXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdBcnJheTtcbiAgICB9XG5cbiAgICBsZXQgbmV3QXJyYXkgPSBbc2hpcC5maXJzdENvb3JkXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5jb29yZHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjb25zdCB5UG9zID0gbmV3QXJyYXlbaV1bMF0gKyAxO1xuICAgICAgY29uc3QgeFBvcyA9IG5ld0FycmF5W2ldWzFdO1xuXG4gICAgICBjb25zdCBuZXdDb29yZCA9IFt5UG9zLCB4UG9zXTtcblxuICAgICAgbmV3QXJyYXkgPSBuZXdBcnJheS5jb25jYXQoW25ld0Nvb3JkXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0FycmF5O1xuICB9O1xuXG4gIGNvbnN0IHJlcGxhY2VDb29yZHMgPSAoc2hpcEluZm8sIGNvb3JkcykgPT4ge1xuICAgIGNvbnN0IGNvb3Jkc0NvcHkgPSBbLi4uY29vcmRzXTtcblxuICAgIGNvb3Jkc0NvcHkuc3BsaWNlKHNoaXBJbmZvLmNvb3Jkc1Bvc2l0aW9uLCAxLCBzaGlwSW5mby5jb29yZHMpOyAvLyByZXBsYWNlIHRoZSBvbGQgY29vcmRzIGZvciB0aGUgcm90YXRlZCBjb29yZHMuXG5cbiAgICByZXR1cm4gY29vcmRzQ29weTtcbiAgfTtcblxuICBjb25zdCB0cmlnZ2VySW52YWxpZCA9IChjb29yZHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2xhc3NDb29yZCA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZHNbaV0pO1xuICAgICAgY29uc3QgY29vcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc0Nvb3JkKVswXTtcbiAgICAgIGNvb3JkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW52YWxpZC1yb3RhdGlvblwiKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBiZWNhdXNlIHdlIGtub3cgZXhhY3RseSB3aGVuIHRoZSBhbmltYXRpb24gd2lsbCBlbmQsIHdlIGNhbiBzZXQgYSB0aW1lb3V0LlxuICAgICAgICBjb29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWQtcm90YXRpb25cIik7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVSb3RhdGlvbiA9IChzaGlwSW5mbywgdXNlZENvb3JkcykgPT4ge1xuICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcblxuICAgIGNvbnN0IG9jY3VwaWVkQ29vcmRzID0gc2hpcEluZm8uY29vcmRzO1xuXG4gICAgY29uc3QgeyBjb29yZHNQb3NpdGlvbiB9ID0gc2hpcEluZm87XG5cbiAgICBjb25zdCB1c2VkQ29vcmRzQ29weSA9IFsuLi51c2VkQ29vcmRzXTtcblxuICAgIHVzZWRDb29yZHNDb3B5W2Nvb3Jkc1Bvc2l0aW9uXSA9IFtdOyAvLyB3ZSBjbGVhciB0aGUgdXNlZENvb3JkcyBvZiB0aGUgY3VycmVudCBzaGlwLCBzbyB3ZSBjYW4gdmFsaWRhdGUgd2l0aG91dCB0aGVtIGluIHRoZSBsb29wLlxuXG4gICAgY29uc3QgZmxhdFVzZWRDb29yZHMgPSBmbGF0Q29vcmRzKHVzZWRDb29yZHNDb3B5KTtcblxuICAgIGlmIChcbiAgICAgIHBsYXllckxvZ2ljLnZhbGlkYXRlQ29vcmRzKG9jY3VwaWVkQ29vcmRzKS5sZW5ndGggIT09XG4gICAgICBvY2N1cGllZENvb3Jkcy5sZW5ndGhcbiAgICApXG4gICAgICByZXR1cm4gdXNlZENvb3JkczsgLy8gY2hlY2sgaWYgdGhlc2UgY29vcmRzIGFyZW4ndCBvdXQgb2YgdGhlIGdyaWQuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9jY3VwaWVkQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGZsYXRVc2VkQ29vcmRzLCBvY2N1cGllZENvb3Jkc1tpXSkpIHtcbiAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvb3Jkc1N1cnJvdW5kID0gc3Vycm91bmRDb29yZHMob2NjdXBpZWRDb29yZHMpO1xuXG4gICAgaWYgKGlzVmFsaWQgPT09IHRydWUpIHtcbiAgICAgIHVzZWRDb29yZHNDb3B5W2Nvb3Jkc1Bvc2l0aW9uXSA9IGNvb3Jkc1N1cnJvdW5kO1xuICAgICAgcmV0dXJuIHVzZWRDb29yZHNDb3B5O1xuICAgIH1cbiAgICByZXR1cm4gdXNlZENvb3JkcztcbiAgfTtcblxuICBjb25zdCByb3RhdGVTaGlwcyA9IChjb29yZHMsIHVzZWRDb29yZHMsIGluZGV4LCByZXN0YXJ0R3JpZCkgPT4ge1xuICAgIGNvbnN0IGNsZWFuQ29vcmRzID0gY29vcmRzLmZpbHRlcigoZWwpID0+IHR5cGVvZiBlbFswXSA9PT0gXCJvYmplY3RcIik7IC8vIHdlIGZpbHRlciB0aGUgb25lLWNvb3JkaW5hdGUgc2hpcHMsIGJlY2F1c2UgdGhleSBkb24ndCBuZWVkIHJvdGF0aW9uXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRzKGNsZWFuQ29vcmRzKTtcblxuICAgIGNvbnN0IHJvdGF0ZSA9IChlKSA9PiB7XG4gICAgICBjb25zdCBjbGlja2VkQ29vcmQgPSBlLnRhcmdldC5jbGFzc05hbWU7XG5cbiAgICAgIGNvbnN0IGdldFNoaXBDb29yZHMgPSAoY29vcmQpID0+IHtcbiAgICAgICAgLy8gdGhpcyBmdW5jdGlvbiBzZWFyY2hlcyBmb3IgdGhlIGFyZ3VtZW50IGNvb3JkaW5hdGUgaW5zaWRlIG9mIHRoZSBmdWxsIGNvb3JkcyBhcnJheSwgYWxsIG9mIHRoaXMsIGluIG9yZGVyIHRvIHJldHVybiB0aGUgZnVsbCBjb29yZHMgb2YgdGhlIGNsaWNrZWQgY29vcmQuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5Db29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjb29yZHNBcnIgPSBjbGVhbkNvb3Jkc1tpXTtcbiAgICAgICAgICBjb25zdCBjb29yZHNJbmZvID0gW2Nvb3Jkc0FyciwgaV07XG4gICAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShjb29yZHNBcnIsIGNvb3JkKSkgcmV0dXJuIGNvb3Jkc0luZm87XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGZ1bGxBcnJheSA9IGdldFNoaXBDb29yZHMoZ2xvYmFsTG9naWMuY2xhc3NUb0FycmF5KGNsaWNrZWRDb29yZCkpO1xuXG4gICAgICBjb25zdCBzaGlwSW5mbyA9IHtcbiAgICAgICAgY29vcmRzOiBmdWxsQXJyYXlbMF0sXG4gICAgICAgIGZpcnN0Q29vcmQ6IGZ1bGxBcnJheVswXVswXSxcbiAgICAgICAgY29vcmRzUG9zaXRpb246IGZ1bGxBcnJheVsxXSxcbiAgICAgIH07XG5cbiAgICAgIHNoaXBJbmZvLmNvb3JkcyA9IHJvdGF0ZUNvb3JkcyhzaGlwSW5mbyk7XG5cbiAgICAgIGlmICh2YWxpZGF0ZVJvdGF0aW9uKHNoaXBJbmZvLCB1c2VkQ29vcmRzKSAhPT0gdXNlZENvb3Jkcykge1xuICAgICAgICAvLyB0aGlzIG1lYW5zIHRoYXQgdGhlIHVzZWQgY29vcmRzIHdlcmUgY2hhbmdlZCwgc28gaXQgd2FzIGEgdmFsaWQgcm90YXRpb24uXG4gICAgICAgIGdlbkRPTS5kZWxldGVFbGVtZW50cygwKTsgLy8gZGVsZXRlIG9sZCBncmlkXG4gICAgICAgIHJldHVybiByZXN0YXJ0R3JpZChcbiAgICAgICAgICByZXBsYWNlQ29vcmRzKHNoaXBJbmZvLCBjb29yZHMpLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlUm90YXRpb24oc2hpcEluZm8sIHVzZWRDb29yZHMpLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTsgLy8gZ2VuIG5ldyBncmlkIHdpdGggdGhlIHJvdGF0ZWQgY29vcmQuXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJpZ2dlckludmFsaWQoZnVsbEFycmF5WzBdKTtcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gc2VsZWN0IGV2ZXJ5IHNoaXAtb2NjdXBpZWQgY29vcmRcbiAgICAgIGNvbnN0IGVsZW1lbnRDbGFzcyA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZGluYXRlc1tpXSk7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlbGVtZW50Q2xhc3MpW2luZGV4XTtcbiAgICAgIGlmIChlbGVtZW50KSBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByb3RhdGUpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHJvdGF0ZUNvb3JkcyB9O1xuICB9O1xuXG4gIGNvbnN0IHNpbmdsZVBsYXllciA9IChjb29yZHMsIHNhbWVDb29yZHMpID0+IHtcbiAgICBnZW5ET00uZGVsZXRlRWxlbWVudHMoMCk7IC8vIGNsZWFyIHByZXZpb3VzIGVsZW1lbnRzXG5cbiAgICBsZXQgbmV3R2FtZTtcblxuICAgIGlmIChzYW1lQ29vcmRzICE9PSB0cnVlKSB7XG4gICAgICBjb25zdCBjcHVDb29yZHMgPSBnZW5Db29yZHMoKS5nZW5CYXR0bGVzaGlwcygpLmNvb3JkczsgLy8gZ2VuIHJhbmRvbSBjb29yZHMuXG4gICAgICBuZXdHYW1lID0gRE9NTG9naWMuc3RhcnRHYW1lKFxuICAgICAgICBnZW5ET00uZ2VuR3JpZCgxLCBjb29yZHMpLFxuICAgICAgICBnZW5ET00uZ2VuR3JpZCgyKSxcbiAgICAgICAgY29vcmRzLFxuICAgICAgICBjcHVDb29yZHNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0dhbWUgPSBET01Mb2dpYy5zdGFydEdhbWUoXG4gICAgICAgIGdlbkRPTS5nZW5HcmlkKDEsIGNvb3JkcyksXG4gICAgICAgIGdlbkRPTS5nZW5HcmlkKDIpLFxuICAgICAgICBjb29yZHMsXG4gICAgICAgIGNvb3Jkc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwbGF5ZXJPYmogPSBuZXdHYW1lLmN1cnJlbnRHYW1lLlBsYXllcjtcbiAgICBjb25zdCBjcHVPYmogPSBuZXdHYW1lLmN1cnJlbnRHYW1lLmNwdVBsYXllcjtcbiAgICBjb25zdCBjdXJyZW50VHVybiA9IGdhbWVUdXJucyhwbGF5ZXJPYmosIGNwdU9iaiwgMCk7XG4gICAgY29uc3QgY3B1R3JpZCA9IG5ld0dhbWUuZ3JpZENvbnRhaW5lcjI7XG5cbiAgICAvLyByZWNlaXZlIGNvb3JkcywgZ3JpZCBjb250YWluZXJzIGFuZCBzdGFydCB0aGUgZ2FtZS5cblxuICAgIGNvbnN0IHR1cm5Mb29wID0gKGdhbWVUdXJuLCB0b0F0dGFja0dyaWQpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9BdHRhY2tHcmlkLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRvQXR0YWNrR3JpZC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGdhbWVUdXJuLnR1cm5zTG9naWMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0dXJuTG9vcChjdXJyZW50VHVybiwgY3B1R3JpZCk7XG5cbiAgICByZXR1cm4geyBwbGF5ZXJPYmosIGNwdU9iaiwgY3VycmVudFR1cm4gfTtcbiAgfTtcblxuICAvKlxuICBjb25zdCBkcmFnQW5kRHJvcCA9IChlbGVtZW50cykgPT4ge1xuICAgIGNvbnN0IGNvb3JkTGlzdCA9IGZsYXRDb29yZHMoZWxlbWVudHMpO1xuXG4gICAgY29uc3QgZHJhZ1N0YXJ0ID0gKGUpID0+IHt9O1xuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSAoZSkgPT4ge307XG5cbiAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzIHRvIGVhY2ggZWxlbWVudC5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50TmFtZSA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZExpc3RbaV0pO1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudE5hbWUpWzBdO1xuXG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBkcmFnU3RhcnQpO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGRyYWdEcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gICovXG5cbiAgY29uc3QgZ2VuSW5pdGlhbEVsZW1lbnRzID0gKGNvb3Jkcywgc2FtZUNvb3JkcywgdXNlZENvb3JkcywgY3VzdG9taXplT3BlbikgPT4ge1xuICAgIGdlbkRPTS5nZW5HcmlkKDEsIGNvb3Jkcyk7XG4gICAgZ2VuRE9NLmdlbkJ1dHRvbnMoKTtcbiAgICByb3RhdGVTaGlwcyhjb29yZHMsIHVzZWRDb29yZHMsIDAsIGdlbkluaXRpYWxFbGVtZW50cyk7XG4gICAgLy8gZHJhZ0FuZERyb3AoY29vcmRzKTtcblxuICAgIGNvbnN0IHJhbmRvbWl6ZUdyaWQgPSAoaW5kZXgpID0+IHtcbiAgICAgIGdlbkRPTS5kZWxldGVFbGVtZW50cyhpbmRleCk7XG4gICAgICBjb25zdCBnZW5SYW5kb21Db29yZHMgPSBnZW5Db29yZHMoKS5nZW5CYXR0bGVzaGlwcygpO1xuICAgICAgY29uc3QgbmV3UmFuZG9tQ29vcmRzID0gZ2VuUmFuZG9tQ29vcmRzLmNvb3JkcztcbiAgICAgIGNvbnN0IG5ld1VzZWRDb29yZHMgPSBnZW5SYW5kb21Db29yZHMudXNlZENvb3JkcztcbiAgICAgIGdlbkluaXRpYWxFbGVtZW50cyhuZXdSYW5kb21Db29yZHMsIGZhbHNlLCBuZXdVc2VkQ29vcmRzKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic3RhcnQtYnV0dG9uXCIpWzBdO1xuICAgIGNvbnN0IHJhbmRvbWl6ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyYW5kb20tYnV0dG9uXCIpWzBdO1xuICAgIGNvbnN0IGN1c3RvbWl6ZUJ1dHRvbiA9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY3VzdG9taXplLWJ1dHRvblwiKVswXTtcblxuICAgIGlmIChyYW5kb21pemVCdXR0b24pXG4gICAgICByYW5kb21pemVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcmFuZG9taXplR3JpZCgwKTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGN1c3RvbWl6ZUJ1dHRvbikge1xuICAgICAgY3VzdG9taXplQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGdlbkRPTS5nZW5Db29yZElucHV0cygpO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b21pemVPcGVuKSBjdXN0b21pemVCdXR0b24uY2xpY2soKVxuICAgIH1cblxuICAgIGlmIChzdGFydEJ1dHRvbilcbiAgICAgIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHNpbmdsZVBsYXllcihjb29yZHMsIHNhbWVDb29yZHMpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBET00gPSAoKSA9PiB7XG4gICAgY29uc3QgZ2VuUmFuZG9tQ29vcmRzID0gZ2VuQ29vcmRzKCkuZ2VuQmF0dGxlc2hpcHMoKTtcbiAgICBjb25zdCByYW5kb21Db29yZHMgPSBnZW5SYW5kb21Db29yZHMuY29vcmRzO1xuICAgIGNvbnN0IHsgdXNlZENvb3JkcyB9ID0gZ2VuUmFuZG9tQ29vcmRzO1xuXG4gICAgZ2VuSW5pdGlhbEVsZW1lbnRzKHJhbmRvbUNvb3JkcywgZmFsc2UsIHVzZWRDb29yZHMpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2luZ2xlUGxheWVyLFxuICAgIHNldHVwRE9NLFxuICAgIGdlbkNvb3JkcyxcbiAgICBnZW5Jbml0aWFsRWxlbWVudHMsXG4gICAgcm90YXRlQ29vcmRzLFxuICB9O1xufSkoKTtcblxuR2FtZUxvb3Auc2V0dXBET00oKTtcblxuZXhwb3J0IHsgbWFpbk9iamVjdHMsIHBsYXllckxvZ2ljLCBHYW1lLCBET01Mb2dpYywgR2FtZUxvb3AsIGdsb2JhbExvZ2ljIH07XG4iXSwibmFtZXMiOlsiZ2xvYmFsTG9naWMiLCJjb29yZFRvQ2xhc3MiLCJhcnIiLCJzbGljZSIsImNoYW5nZUNvb3JkQ29sb3IiLCJjbGFzc05hbWUiLCJncmlkTnVtYmVyIiwiY29sb3IiLCJjdXJyZW50Q29vcmQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImJvcmRlciIsImlzVGFyZ2V0SW5BcnJheSIsInRhcmdldCIsImNvbnRhaW5zIiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJsZW5ndGgiLCJlbGVtZW50IiwiaW5kaWNhdGVTdW5rIiwic2hpcCIsImN1cnJlbnRDb29yZHMiLCJjbGFzc1RvQXJyYXkiLCJjbGFzc0Nvb3JkIiwiYXJyYXlDb29yZCIsIngiLCJ5IiwicHVzaCIsIk51bWJlciIsIm1haW5PYmplY3RzIiwiU2hpcCIsImxlbmd0aE51bWJlciIsImhpdHNOdW1iZXIiLCJjb29yZHMiLCJzaGlwSGl0cyIsInNoaXBMZW5ndGgiLCJpc1N1bmsiLCJoaXQiLCJjdXJyZW50SGl0cyIsIkdhbWVib2FyZCIsInJlY2VpdmVkQXR0YWNrcyIsInN1Y2Nlc3NBdHRhY2tzIiwicmVjZWl2ZUF0dGFjayIsInRhcmdldENvcmRzIiwicGxheWVyU2hpcHMiLCJjdXJyZW50U2hpcHMiLCJPYmplY3QiLCJlbnRyaWVzIiwiY29vcmRpbmF0ZXMiLCJzdWNjZXNzIiwic2hpcENvcmRzIiwic2hpcE5hbWUiLCJjYXJyaWVyIiwiYmF0dGxlU2hpcCIsImJhdHRsZVNoaXAxIiwiY3J1aXNlciIsImNydWlzZXIxIiwiY3J1aXNlcjIiLCJkZXN0cm95ZXIiLCJkZXN0cm95ZXIxIiwiZGVzdHJveWVyMiIsImRlc3Ryb3llcjMiLCJkZXBsb3lTaGlwcyIsImNhcnJpZXJDb3JkcyIsImJhdHRsZVNoaXBDb3JkcyIsImJhdHRsZVNoaXAxQ29yZHMiLCJjcnVpc2VyQ29yZHMiLCJjcnVpc2VyMUNvcmRzIiwiY3J1aXNlcjJDb3JkcyIsImRlc3Ryb3llckNvcmRzIiwiZGVzdHJveWVyMUNvcmRzIiwiZGVzdHJveWVyMkNvcmRzIiwiZGVzdHJveWVyM0NvcmRzIiwiY2hlY2tTdW5rIiwic2hpcHMiLCJwbGF5ZXJMb2dpYyIsInZpc3VhbEluZGljYXRvcnMiLCJjb29yZCIsIndhc1N1Y2Nlc3NmdWwiLCJpbmRleCIsImN1cnJlbnROb2RlIiwidGV4dENvbnRlbnQiLCJyZW1vdmVOb2RlTGlzdGVuZXJzIiwiY29vcmRpbmF0ZSIsInJlcGxhY2VXaXRoIiwiY2xvbmVOb2RlIiwidmFsaWRhdGVDb29yZHMiLCJ2YWxpZGF0ZWRDb29yZHMiLCJyZXR1cm5TaWRlcyIsIm5vZGVDb29yZCIsInVwIiwiZG93biIsInJpZ2h0IiwibGVmdCIsImF0dGFja0Fyb3VuZCIsIm5vZGVDb29yZHMiLCJhdHRhY2tGdW5jdGlvbiIsImFyb3VuZENvb3JkcyIsImZsYXRBcm91bmRDb29yZHMiLCJmbGF0IiwicmV0dXJuQ29ybmVycyIsIm5vZGUiLCJjb3JuZXJzIiwiY29ybmVyMSIsImNvcm5lcjIiLCJjb3JuZXIzIiwiY29ybmVyNCIsImF0dGFja0Nvcm5lcnMiLCJ2YWxpZENvcm5lcnMiLCJQbGF5ZXIiLCJuYW1lIiwic2hpcHNDb29yZHMiLCJwbGF5ZXJOYW1lIiwicGxheWVyQ29vcmRzIiwicGxheWVyQm9hcmQiLCJyZWNlaXZlZEF0dGFjayIsImNwdVBsYXllciIsImh1bWFuUGxheWVyIiwic2hpcHNDb3JkcyIsInJpdmFsUGxheWVyIiwiY3B1Q29vcmRzIiwiY3B1Qm9hcmQiLCJjcHVTaGlwcyIsInVzZWRDb29yZHMiLCJhdHRhY2tQbGF5ZXIiLCJpZ25vcmVDb29yZHMiLCJyYW5kb21JbnQiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db29yZHMiLCJyaXZhbFBsYXllckhpdHMiLCJhdHRhY2tMb2dpYyIsIkdhbWUiLCJET01Mb2dpYyIsIlVJTG9naWMiLCJub2RlcyIsImdhbWVJbmZvIiwicGxheWVyMUNvb3JkcyIsInBsYXllcjJDb29yZHMiLCJhdHRhY2tDcHUiLCJhdHRhY2tPbkNsaWNrIiwic2hpcENvb3JkcyIsInZhbHVlcyIsIm1pc3NlZEF0dGFja09uQ2xpY2siLCJkZXRlY3RBdHRhY2tzIiwiZSIsInBhcmVudENsYXNzIiwicGFyZW50RWxlbWVudCIsIm5vZGVDbGFzcyIsImNsZWFuQ29vcmRzIiwiZmlsdGVyIiwidW5kZWZpbmVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJzdGFydEdhbWUiLCJncmlkQ29udGFpbmVyMSIsImdyaWRDb250YWluZXIyIiwiY3VycmVudEdhbWUiLCJjaGlsZE5vZGVzIiwiZGlzcGxheUdyaWQiLCJncmlkMSIsImdyaWQyIiwic2l6ZSIsInJlY3Vyc2l2ZSIsInlQb3MiLCJncmlkRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJncmlkRWxlbWVudDIiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUdyaWQiLCJnZW5ET01FbGVtZW50cyIsImdlbkdyaWQiLCJwbGF5ZXJJbmRleCIsIm1haW5Db250YWluZXIiLCJtYWluIiwicXVlcnlTZWxlY3RvciIsImdyaWRzQ29udGFpbmVyIiwiZ3JpZFdyYXBwZXIiLCJ4Q29udGFpbmVyIiwieUNvbnRhaW5lciIsImdyaWRJbmRpY2F0b3JzWCIsImdyaWRJbmRpY2F0b3JzWSIsImNsYXNzTGlzdCIsImFkZCIsImFscGhhYmV0IiwiZWxlbWVudDIiLCJnZW5JbmRpY2F0b3JzIiwiZ3JpZCIsImNvb3Jkc0FyciIsIm9uZURpbWVuc2lvbkNvb3JkcyIsImZsYXRDb29yZHMiLCJzaG93U2hpcHMiLCJkZWxldGVFbGVtZW50cyIsInJlbW92ZSIsImdlbkJ1dHRvbnMiLCJidXR0b25XcmFwcGVyIiwiZ2VuQnV0dG9uV3JhcHBlciIsInJhbmRvbUJ1dHRvbiIsImJ1dHRvbkNvbnRhaW5lciIsImdlblJhbmRvbWl6ZUJ1dHRvbiIsInN0YXJ0QnV0dG9uIiwiZ2VuU3RhcnRCdXR0b24iLCJjdXN0b21pemVCdXR0b24iLCJnZW5DdXN0b21pemVCdXR0b24iLCJnZW5Db29yZElucHV0cyIsImlucHV0VGl0bGUiLCJodG1sRm9yIiwic2VsZWN0RWxlbWVudCIsImlucHV0V3JhcHBlciIsImlucHV0MSIsImlucHV0VGV4dCIsImlucHV0MiIsInN1Ym1pdEJ1dHRvbiIsIm9wdGlvbjEiLCJ2YWx1ZSIsIm9wdGlvbjIiLCJvcHRpb24zIiwib3B0aW9uNCIsIm9wdGlvbjUiLCJvcHRpb242Iiwib3B0aW9uNyIsIm9wdGlvbjgiLCJvcHRpb245Iiwib3B0aW9uMTAiLCJlbmRHYW1lIiwicGxheWVyMUdyaWQiLCJwbGF5ZXIyR3JpZCIsImNyZWF0ZU1vZGFsIiwid2lubmVyIiwiY3B1V2luIiwiYm9keSIsIm1vZGFsIiwibW9kYWxUZXh0IiwicmVsb2FkR2FtZUJ1dHRvbiIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwic2hvd01vZGFsIiwiZ2VuRE9NIiwiZWxlbWVudHMiLCJtdWx0aXBsZUNvb3JkU2hpcHMiLCJlbCIsIm9uZUNvb3JkU2hpcHMiLCJjb25jYXQiLCJzdXJyb3VuZENvb3JkcyIsImdldFN1cnJ1b25kcyIsImN1cnJlbnRTdXJyb3VuZHMiLCJzdXJyb3VuZCIsIlNldCIsIm1hcCIsInBhcnNlIiwiZ2VuQ29vcmRzIiwiZ2VuUmFuZG9tQ29vcmRzIiwib3JpZW50YXRpb24iLCJwcmV2aW91c0Nvb3JkcyIsInZlcnRpY2FsQ29vcmRzIiwiaG9yaXpvbnRhbENvb3JkcyIsImdlblNoaXBDb29yZCIsImludmFsaWRDb29yZHMiLCJnZW5Jbml0aWFsQ29vcmRzIiwiaXNWYWxpZCIsImdlbkJhdHRsZXNoaXBzIiwicm90YXRlQ29vcmRzIiwibmV3QXJyYXkiLCJmaXJzdENvb3JkIiwibmV3Q29vcmQiLCJ2YWxpZGF0ZVJvdGF0aW9uIiwic2hpcEluZm8iLCJvY2N1cGllZENvb3JkcyIsImNvb3Jkc1Bvc2l0aW9uIiwidXNlZENvb3Jkc0NvcHkiLCJmbGF0VXNlZENvb3JkcyIsImNvb3Jkc1N1cnJvdW5kIiwic2luZ2xlUGxheWVyIiwic2FtZUNvb3JkcyIsIm5ld0dhbWUiLCJwbGF5ZXJPYmoiLCJjcHVPYmoiLCJjdXJyZW50VHVybiIsInBsYXllcjEiLCJwbGF5ZXIyIiwicGxheWVyMVNoaXBzIiwicGxheWVyMlNoaXBzIiwidHVybnNMb2dpYyIsImlzR2FtZU92ZXIiLCJnYW1lVHVybnMiLCJnYW1lVHVybiIsInRvQXR0YWNrR3JpZCIsInR1cm5Mb29wIiwiZ2VuSW5pdGlhbEVsZW1lbnRzIiwiY3VzdG9taXplT3BlbiIsInJlc3RhcnRHcmlkIiwicm90YXRlIiwiY2xpY2tlZENvb3JkIiwiZnVsbEFycmF5IiwiY29vcmRzSW5mbyIsImdldFNoaXBDb29yZHMiLCJjb29yZHNDb3B5Iiwic3BsaWNlIiwicmVwbGFjZUNvb3JkcyIsImNvb3JkRWxlbWVudCIsInNldFRpbWVvdXQiLCJ0cmlnZ2VySW52YWxpZCIsImVsZW1lbnRDbGFzcyIsInJvdGF0ZVNoaXBzIiwicmFuZG9taXplQnV0dG9uIiwibmV3UmFuZG9tQ29vcmRzIiwibmV3VXNlZENvb3JkcyIsInJhbmRvbWl6ZUdyaWQiLCJjbGljayIsInNldHVwRE9NIl0sInNvdXJjZVJvb3QiOiIifQ==