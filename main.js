(()=>{"use strict";const e=(()=>{const e=e=>`${e.slice(0,1)},${e.slice(1,2)}`,t=(e,t,r)=>{const n=document.getElementsByClassName(e)[t-1];n&&(n.style.border=`1px solid ${r}`)};return{isTargetInArray:(e,t)=>{let r=!1;if(JSON.stringify(e)===JSON.stringify(t)&&(r=!0),!e)return r;if(!t)return r;for(let n=0;n<e.length;n++){const s=e[n];JSON.stringify(s)===JSON.stringify(t)&&(r=!0)}return r},changeCoordColor:t,indicateSunk:(r,n)=>{const{currentCoords:s}=r;if("number"==typeof s[0])t(e(s),n,"red");else for(let r=0;r<s.length;r++)t(e(s[r]),n,"red")},classToArray:e=>{const t=[],r=e.slice(0,1),n=e.slice(2,3);return t.push(Number(r)),t.push(Number(n)),t},coordToClass:e}})(),t=(()=>{const t=(e,t,r)=>{let n=t;const s=e;return{isSunk:()=>s===n,hit:()=>n++,currentHits:()=>n,currentCoords:r,shipLength:s}};return{Ship:t,Gameboard:()=>{const r=[],n=[];return{receiveAttack:(t,s)=>{const o=Object.entries(s.coordinates);r.push(t);for(let r=0;r<o.length;r++){let c=!1;const a=o[r][1],i=o[r][0];if(e.isTargetInArray(a,t)){if(c=!0,n.push(t),"carrier"===i&&(s.carrier.hit(),s.carrier.isSunk()))return s.carrier;if("battleShip"===i&&(s.battleShip.hit(),s.battleShip.isSunk()))return s.battleShip;if("battleShip1"===i&&(s.battleShip1.hit(),s.battleShip1.isSunk()))return s.battleShip1;if("cruiser"===i&&(s.cruiser.hit(),s.cruiser.isSunk()))return s.cruiser;if("cruiser1"===i&&(s.cruiser1.hit(),s.cruiser1.isSunk()))return s.cruiser1;if("cruiser2"===i&&(s.cruiser2.hit(),s.cruiser2.isSunk()))return s.cruiser2;if("destroyer"===i&&(s.destroyer.hit(),s.destroyer.isSunk()))return s.destroyer;if("destroyer1"===i&&(s.destroyer1.hit(),s.destroyer1.isSunk()))return s.destroyer1;if("destroyer2"===i&&(s.destroyer2.hit(),s.destroyer2.isSunk()))return s.destroyer2;if("destroyer3"===i&&(s.destroyer3.hit(),s.destroyer3.isSunk()))return s.destroyer3}if(!0===c)break}},deployShips:(e,r,n,s,o,c,a,i,d,l)=>{const u={carrier:e,battleShip:r,battleShip1:n,cruiser:s,cruiser1:o,cruiser2:c,destroyer:a,destroyer1:i,destroyer2:d,destroyer3:l};return{carrier:t(4,0,u.carrier),battleShip:t(3,0,u.battleShip),battleShip1:t(3,0,u.battleShip1),cruiser:t(2,0,u.cruiser),cruiser1:t(2,0,u.cruiser1),cruiser2:t(2,0,u.cruiser2),destroyer:t(1,0,u.destroyer),destroyer1:t(1,0,u.destroyer1),destroyer2:t(1,0,u.destroyer2),destroyer3:t(1,0,u.destroyer3),coordinates:u}},receivedAttacks:r,successAttacks:n,checkSunk:e=>{return!((t=e).carrier.currentCoords&&!t.carrier.isSunk()||t.battleShip.currentCoords&&!t.battleShip.isSunk()||t.battleShip1.currentCoords&&!t.battleShip1.isSunk()||t.cruiser.currentCoords&&!t.cruiser.isSunk()||t.cruiser1.currentCoords&&!t.cruiser1.isSunk()||t.cruiser2.currentCoords&&!t.cruiser2.isSunk()||t.destroyer.currentCoords&&!t.destroyer.isSunk()||t.destroyer1.currentCoords&&!t.destroyer1.isSunk()||t.destroyer2.currentCoords&&!t.destroyer2.isSunk()||t.destroyer3.currentCoords&&!t.destroyer3.isSunk());var t}}}}})(),r=(()=>{const r=(e,t,r)=>{let n=0;"cpu"===r&&(n=1);const s=document.getElementsByClassName(e)[n];s&&(s.textContent=!1===t?"â€¢":"X")},n=(t,r)=>{let n=0;"cpu"===r&&(n=1);const s=e.coordToClass(t),o=document.getElementsByClassName(s)[n];o&&o.replaceWith(o.cloneNode(!0))},s=e=>{const t=[];for(let n=0;n<e.length;n++)(r=e[n])[0]<0||r[1]<0||r[0]>9||r[1]>9||t.push(e[n]);var r;return t},o=e=>{const t=[],r=[e[0]-1,e[1]],n=[e[0]+1,e[1]],s=[e[0],e[1]+1],o=[e[0],e[1]-1];return t.push(r,n,s,o),t},c=(t,c,a,i,d)=>{const l=[];if("object"==typeof t[0])for(let e=0;e<t.length;e++)l.push(o(t[e]));else l.push(o(t));const u=s(l.flat());for(let t=0;t<u.length;t++)e.isTargetInArray(d,u[t])||(r(u[t],!1,i),n(u[t],i),c(u[t],a))},a=e=>{const t=[],r=[e[0]+1,e[1]+1],n=[e[0]+1,e[1]+-1],s=[e[0]-1,e[1]+1],o=[e[0]-1,e[1]-1];return t.push(r,n,s,o),t},i=(e,t,o)=>{const c=a(e),i=s(c);for(let e=0;e<i.length;e++)r(i[e],!1,o),n(i[e],o),t(i[e],!0)};return{Player:(r,n)=>{const s=r,o=n,a=t.Gameboard(),i=a.deployShips(...n);return{playerName:s,playerCoords:o,playerBoard:a,playerShips:i,receiveAttack:t=>{const r=a.receiveAttack(t,i);r&&(e.indicateSunk(r,1),c(r.currentCoords,a.receiveAttack,i,"player",a.successAttacks))}}},cpuPlayer:(n,o)=>{const a=n,d=o,l=t.Gameboard(),u=l.deployShips(...o),p=[],m=a.playerBoard.receivedAttacks,h=a.playerBoard.successAttacks,y=(t,n)=>{const o=e=>Math.floor(Math.random()*e),c=[o(10),o(10)],d=t=>(a.receiveAttack(t),e.isTargetInArray(h,t)?(r(t,!0,"player"),i(t,y,"player"),p.push(t),!0):(p.push(t),r(t,!1,"player"),!1));return e.isTargetInArray(m,c)&&!0!==n?y():t?d(t):p[0]&&h[0]&&p[p.length-1]===h[h.length-1]?((t,r,n)=>{const o=[t[0]-1,t[1]],c=[t[0]+1,t[1]],a=[t[0],t[1]+1],i=[t[0],t[1]-1],d=((t,r)=>{const n=[],s=r.filter((e=>void 0!==e));for(let r=0;r<t.length;r++){const o=t[r];e.isTargetInArray(s,o)||n.push(o)}return n})(s([o,c,a,i]),m);return 0===d.length?r(n):r(d[(l=d.length,Math.floor(Math.random()*l))]);var l})(h[h.length-1],y,c):d(c)};return{attackPlayer:y,cpuBoard:l,cpuShips:u,cpuCoords:d,receiveAttack:t=>{const r=l.receiveAttack(t,u);r&&(e.indicateSunk(r,2),c(r.currentCoords,l.receiveAttack,u,"cpu",l.successAttacks))}}},visualIndicators:r,attackCorners:i,attackAround:c,returnCorners:a,returnSides:o,validateCoords:s}})(),n=(e,t,n)=>{const s=r.Player(e,t);return{Player:s,cpuPlayer:r.cpuPlayer(s,n)}},s=(()=>{const t=(t,n)=>{const s=n.Player.playerShips.coordinates,o=n.cpuPlayer.cpuShips.coordinates,c=e=>n.Player.receiveAttack(e),a=e=>n.cpuPlayer.receiveAttack(e),i=(t,r,n)=>{let s=!1;if(e.isTargetInArray(Object.values(t),r))return n(r),s=!0,!0;for(let o=0;o<t.length;o++){const c=t[o];if(e.isTargetInArray(c,r)){n(r),s=!0;break}}return s},d=(e,t)=>(t(e),!1),l=t=>{const n=t.target.parentElement.className,l=t.target.className,u=e.classToArray(l);if("grid-1"===n){const e=Object.values(s).filter((e=>void 0!==e));!0===i(e,u,c)?(r.visualIndicators(l,!0,"player"),r.attackCorners(u,c,"player")):(d(u,c),r.visualIndicators(l,!1,"player"))}if("grid-2"===n){const e=Object.values(o).filter((e=>void 0!==e));!0===i(e,u,a)?(r.visualIndicators(l,!0,"cpu"),r.attackCorners(u,a,"cpu")):(d(u,a),r.visualIndicators(l,!1,"cpu"))}};for(let e=0;e<t.length;e++)t[e].addEventListener("click",l,{once:!0})},o=e=>{if(e){const t=e.filter((e=>"object"==typeof e[0])),r=e.filter((e=>"number"==typeof e[0]));return t.flat().concat(r)}},c=e=>{const t=e=>{const t=[...r.returnCorners(e),...r.returnSides(e),e];return r.validateCoords(t)},n=[];if("object"!=typeof e[0]){const r=t(e);return n.push(...r),[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))}for(let r=0;r<e.length;r++){const s=t(e[r]);n.push(...s)}return[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))},a=(e,t)=>{let r,n,s=[e.firstCoord];for(let o=0;o<e.coords.length-1;o++){"v"==(t?e.coords[0][0]+1===e.coords[1][0]?"h":"v":e.coords[0][0]+1===e.coords[1][0]?"v":"h")?(r=s[o][0],n=s[o][1]+1):(r=s[o][0]+1,n=s[o][1]);const c=[r,n];s=s.concat([c])}return s},i=(e,t)=>{const r=[...t];return r.splice(e.coordsPosition,1,e.coords),r},d=(t,n)=>{let s=!0;const a=t.coords,{coordsPosition:i}=t,d=[...n];d[i]=[];const l=o(d);if(r.validateCoords(a).length!==a.length)return n;if("number"==typeof a[0])e.isTargetInArray(l,a)&&(s=!1);else for(let t=0;t<a.length;t++)e.isTargetInArray(l,a[t])&&(s=!1);const u=c(a);return!0===s?(d[i]=u,d):n},l=(t,r)=>{let n;for(let s=0;s<t.length;s++)n="number"==typeof t[s]?e.coordToClass(t):e.coordToClass(t[s]),document.getElementsByClassName(n)[0].style.borderColor=r},u=()=>document.getElementsByClassName("select-ships")[0].selectedIndex,p=(e,t)=>{const r=t[e];return((e,t)=>{const r=e;for(let e=0;e<r.length;e++){const t=r[e];l(t,"green")}})(t),l(r,"rgb(37, 214, 199)"),r},m=(e,t,r,n)=>{const s=[Number(e),Number(t)],o=document.getElementsByClassName("grid-wrapper")[0];return n.deleteShownGrid(0),n.genGridOnly(1,o,r),p(u(),r),l(s,"rgb(216, 65, 5)"),s},h=(e,t,r,n,s,o)=>{const c={coords:r[e],firstCoord:t,coordsPosition:e},l=a(c,!0),u={coords:l,firstCoord:l[0],coordsPosition:e},p=(e,t,r,n)=>{if(d(e,t)!==t)return n.deleteElements(0),s(i(e,r),!1,d(e,t),!0)};return"number"==typeof r[e][0]?(c.coords=c.firstCoord,p(c,n,r,o)):p(u,n,r,o),{updateGrid:p}};return{startGame:(e,r,s,o)=>{const c=n("example",s,o);return"shown-grid"!==e.className&&t(e.childNodes,c),"shown-grid"!==r.className&&t(r.childNodes,c),{currentGame:c,gridContainer1:e,gridContainer2:r}},displayGrid:(e,t)=>{(r=>{const n=r=>{if(10!==r){for(let n=0;n<10;n++){const s=document.createElement("div");s.className=`${r},${n}`;const o=document.createElement("div");o.className=`${r},${n}`,e&&e.appendChild(s),t&&t.appendChild(o)}n(r+1)}};n(0)})()},genDOMElements:()=>{const t=(t,r,n)=>{const o=document.createElement("div");return o.className=`grid-${t}`,r.appendChild(o),1===t?s.displayGrid(o,null):s.displayGrid(null,o),n&&(o.className="shown-grid",((t,r)=>{const n=(e=>{const t=[];for(let r=0;r<e.length;r++){const n=e[r];"object"==typeof n[0]?t.push(...n):t.push(n)}return t})(t);for(let t=0;t<n.length;t++)e.changeCoordColor(e.coordToClass(n[t]),r,"green")})(n,t)),o};return{genGrid:(e,r)=>{const n=document.createElement("section");n.className="main-container";const s=document.querySelector("main");s&&s.appendChild(n);const o=document.createElement("div");o.className="grids-container",n&&n.appendChild(o);const c=document.createElement("h3");c.textContent=`Player's ${e} Grid`,o.appendChild(c);const a=document.createElement("div");return a.className="grid-wrapper",((e,t)=>{const r=document.createElement("section"),n=document.createElement("section");r.classList.add("X"),n.classList.add("Y");for(let e=0;e<=9;e++){const t=document.createElement("div");t.textContent=e,n.appendChild(t);const s=document.createElement("div");s.textContent=e,r.appendChild(s)}e.appendChild(r),t.appendChild(n)})(o,a),o.appendChild(a),t(e,a,r)},deleteElements:e=>{const t=document.getElementsByClassName("main-container")[e];t&&t.remove()},genButtons:()=>{(()=>{const e=document.createElement("div");e.classList.add("button-wrapper");const t=document.getElementsByClassName("grids-container")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="random-button",e.textContent="Randomize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="start-button",e.textContent="Start Game";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="customize-button",e.textContent="Customize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})()},genCoordInputs:()=>{const e=document.getElementsByClassName("main-container")[0],t=document.createElement("label");t.classList.add("inputs-container"),t.htmlFor="select-ships",t.textContent="Set Initial Coord",e.appendChild(t);const r=document.createElement("select");r.classList.add("select-ships"),t.appendChild(r);const n=document.createElement("div");n.classList.add("input-wrapper"),t.appendChild(n);const s=document.createElement("input");s.classList.add("coords-input"),n.appendChild(s);const o=document.createElement("p");o.classList.add("input-text"),o.textContent=",",n.appendChild(o);const c=document.createElement("input");c.classList.add("coords-input"),n.appendChild(c);const a=document.createElement("button");a.classList.add("apply-coords"),a.textContent="Apply",t.appendChild(a);const i=document.createElement("option");i.value="carrier",i.textContent="Carrier",r.appendChild(i);const d=document.createElement("option");d.value="battleship1",d.textContent="Battleship 1",r.appendChild(d);const l=document.createElement("option");l.value="battleship2",l.textContent="Battleship 2",r.appendChild(l);const u=document.createElement("option");u.value="cruiser1",u.textContent="Cruiser 1",r.appendChild(u);const p=document.createElement("option");p.value="cruiser2",p.textContent="Cruiser 2",r.appendChild(p);const m=document.createElement("option");m.value="cruiser3",m.textContent="Cruiser 3",r.appendChild(m);const h=document.createElement("option");h.value="destroyer1",h.textContent="Destroyer 1",r.appendChild(h);const y=document.createElement("option");y.value="destroyer2",y.textContent="Destroyer 2",r.appendChild(y);const C=document.createElement("option");C.value="destroyer3",C.textContent="Destroyer 3",r.appendChild(C);const g=document.createElement("option");g.value="destroyer4",g.textContent="Destroyer 4",r.appendChild(g);const f=/^\d+$/,v=e=>!!`${e.target.value}${e.key}`.match(f)||(e.preventDefault(),e.stopPropagation(),!1);c.setAttribute("maxlength","1"),s.setAttribute("maxlength","1"),s.addEventListener("keypress",v),c.addEventListener("keypress",v)},genGridOnly:t,deleteShownGrid:e=>{const t=document.getElementsByClassName("shown-grid")[e];t&&t.remove()}}},endGame:()=>{const e=document.getElementsByClassName("grid-1")[0],t=document.getElementsByClassName("grid-2")[0];e&&e.replaceWith(e.cloneNode(!0)),t&&t.replaceWith(t.cloneNode(!0))},createModal:(e,t)=>{const r=document.querySelector("body"),n=document.createElement("dialog");n.classList.add("modal"),r.appendChild(n);const s=document.createElement("div");n.appendChild(s),s.textContent=t?`${e} won, try again!`:`Congratulations ${e}, you won!`;const o=document.createElement("button");o.textContent="New Game",o.addEventListener("click",(()=>window.location.reload())),n.appendChild(o),n&&n.showModal()},genCoords:()=>{const t=e=>Math.floor(Math.random()*e),r=(e,r,n)=>{if(n){const t=[n[0]+1,n[1]],r=[n[0],n[1]+1];return"v"===e?t:r}let s;return s="v"===e?[t(10-r),t(10)]:[t(10),t(10-r)],1===r&&(s=[t(10),t(10)]),s},n=(s,c)=>{const a=[],i=0===t(2)?"h":"v",d=o(c),l=()=>{const t=r(i,s);e.isTargetInArray(d,t)?l():a.push(t)};for(let e=0;e<s;e++){const e=a[a.length-1],t=r(i,s,e);e?a.push(t):l()}if(1!==a.length){let t=!0;for(let r=0;r<a.length;r++){const n=a[r];e.isTargetInArray(d,n)&&(t=!1)}return!1===t?n(s,d):a}return a[0]};return{genBattleships:()=>{const e=[],t=n(4,e);e.push(c(t));const r=n(3,e);e.push(c(r));const s=n(3,e);e.push(c(s));const o=n(2,e);e.push(c(o));const a=n(2,e);e.push(c(a));const i=n(2,e);e.push(c(i));const d=n(1,e);e.push(c(d));const l=n(1,e);e.push(c(l));const u=n(1,e);e.push(c(u));const p=n(1,e);return e.push(c(p)),{coords:[t,r,s,o,a,i,d,l,u,p],usedCoords:e}},genShipCoord:n,surroundCoords:c}},rotateShips:(t,r,n,s,c)=>{const l=t.filter((e=>"object"==typeof e[0])),u=o(l),p=n=>{const o=n.target.className,u=((t,r)=>{for(let n=0;n<r.length;n++){const s=r[n],o=[s,n];if(e.isTargetInArray(s,t))return o}})(e.classToArray(o),l),p={coords:u[0],firstCoord:u[0][0],coordsPosition:u[1]};if(p.coords=a(p),d(p,r)!==r){const e=document.getElementsByClassName("inputs-container")[0];return c.deleteElements(0),s(i(p,t),!1,d(p,r),e)}return(t=>{for(let r=0;r<t.length;r++){const n=e.coordToClass(t[r]),s=document.getElementsByClassName(n)[0];s.classList.add("invalid-rotation"),setTimeout((()=>{s.classList.remove("invalid-rotation")}),1e3)}})(u[0])};for(let t=0;t<u.length;t++){const r=e.coordToClass(u[t]),s=document.getElementsByClassName(r)[n];s&&s.addEventListener("click",p)}},rotateCoords:a,changeInitialCoord:h,setupEventListeners:(e,t,r,n,o,c,a)=>{const i=document.getElementsByClassName("start-button")[0],d=document.getElementsByClassName("random-button")[0],y=document.getElementsByClassName("customize-button")[0];d&&d.addEventListener("click",(()=>{((e,t,r)=>{r.deleteElements(0);const n=s.genCoords().genBattleships();t(n.coords,!1,n.usedCoords)})(0,c,n)})),y&&(y.addEventListener("click",(()=>{n.genCoordInputs(),((e,t,r,n)=>{const s=document.getElementsByClassName("apply-coords")[0];s&&s.addEventListener("click",(()=>{const s=document.getElementsByClassName("coords-input"),o=[Number(s[0].value),Number(s[1].value)];h(u(),o,e,t,r,n)}));const o=document.getElementsByClassName("select-ships")[0];l(e[0],"rgb(37, 214, 199)"),o&&o.addEventListener("click",(()=>{const t=document.getElementsByClassName("select-ships")[0].selectedIndex;p(t,e)}));const c=document.getElementsByClassName("coords-input")[0],a=document.getElementsByClassName("coords-input")[1];c.addEventListener("input",(()=>{c.value&&a.value&&m(c.value,a.value,e,n)})),a.addEventListener("input",(()=>{c.value&&a.value&&m(c.value,a.value,e,n)}))})(e,r,c,n)}),{once:!0}),o&&y.click()),i&&i.addEventListener("click",(()=>{a(e,t,n)}))}}})();(()=>{const e=(e,t)=>{const r=e.playerShips,n=t.cpuShips,o=()=>{let o=!1;return t.attackPlayer()&&e.playerBoard.checkSunk(r)&&(s.endGame(),s.createModal("Player2",!0),o=!0),t.cpuBoard.checkSunk(n)&&(s.endGame(),s.createModal("Player1"),o=!0),o};return{turnLoop:e=>{for(let t=0;t<e.childNodes.length;t++)e.childNodes[t].addEventListener("click",(()=>{o()}),{once:!0})}}},t=(t,r,n)=>{let o;if(n){if(n.deleteElements(0),!0!==r){const e=s.genCoords().genBattleships().coords;n&&(o=s.startGame(n.genGrid(1,t),n.genGrid(2),t,e))}else o=s.startGame(n.genGrid(1,t),n.genGrid(2),t,t);const c=o.currentGame.Player,a=o.currentGame.cpuPlayer,i=e(c,a),d=o.gridContainer2;return e(c,a).turnLoop(d),{playerObj:c,cpuObj:a,currentTurn:i}}},r=(e,n,o,c)=>{const a=s.genDOMElements();return a.genGrid(1,e),a.genButtons(),s.rotateShips(e,o,0,r,a),s.setupEventListeners(e,n,o,a,c,r,t),{currentDOM:a}};return{singlePlayer:t,setupDOM:()=>{const e=s.genCoords().genBattleships(),t=e.coords,{usedCoords:n}=e;return r(t,!1,n),{usedCoords:n}},genInitialElements:r}})().setupDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUSxHQUNuQi9NLEVBQ0FBLEdBSUosTUFBTW1VLEVBQVlELEVBQVFySSxZQUFZakgsT0FDaEN3UCxFQUFTRixFQUFRckksWUFBWTFHLFVBQzdCa1AsRUFBY2IsRUFBVVcsRUFBV0MsR0FDbkNFLEVBQVVKLEVBQVF0SSxlQUt4QixPQUZBNEgsRUFBVVcsRUFBV0MsR0FBUUwsU0FBU08sR0FFL0IsQ0FBRUgsWUFBV0MsU0FBUUMsY0FDOUIsR0FHSTFCLEVBQXFCLENBQ3pCM1MsRUFDQXlTLEVBQ0EvTCxFQUNBZ00sS0FFQSxNQUFNL0gsRUFBYTNELEVBQVN5RixpQkFnQjVCLE9BZEE5QixFQUFXb0MsUUFBUSxFQUFHL00sR0FDdEIySyxFQUFXbUQsYUFDWDlHLEVBQVM2SyxZQUFZN1IsRUFBUTBHLEVBQVksRUFBR2lNLEVBQW9CaEksR0FDaEUzRCxFQUFTd0wsb0JBQ1B4UyxFQUNBeVMsRUFDQS9MLEVBQ0FpRSxFQUNBK0gsRUFDQUMsRUFDQXNCLEdBSUssQ0FBRXRKLGFBQVksRUFhdkIsTUFBTyxDQUNMc0osZUFDQU0sU0FaZSxLQUNmLE1BQU1uRCxFQUFrQnBLLEVBQVNtSyxZQUFZUyxpQkFDdkN4TCxFQUFlZ0wsRUFBZ0JwUixRQUMvQixXQUFFMEcsR0FBZTBLLEVBSXZCLE9BRkF1QixFQUFtQnZNLEdBQWMsRUFBT00sR0FFakMsQ0FBRUEsYUFBWSxFQU1yQmlNLHFCQUVILEVBekhnQixHQTJIUjRCLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdsb2JhbExvZ2ljID0gKCgpID0+IHtcbiAgLy8gdGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIGluIGFsbW9zdCBldmVyeSBvdGhlciBtb2R1bGUsIHNvIGkgbmVlZCB0byBoYXZlIHRoZW0gaGVyZSBpbiBvcmRlciB0byBpbnZva2UgdGhlbS5cblxuICBjb25zdCBpc1RhcmdldEluQXJyYXkgPSAoYXJyLCB0YXJnZXQpID0+IHtcbiAgICBsZXQgY29udGFpbnMgPSBmYWxzZTtcblxuICAgIGlmIChKU09OLnN0cmluZ2lmeShhcnIpID09PSBKU09OLnN0cmluZ2lmeSh0YXJnZXQpKSBjb250YWlucyA9IHRydWU7XG5cbiAgICBpZiAoIWFycikgcmV0dXJuIGNvbnRhaW5zO1xuXG4gICAgaWYgKCF0YXJnZXQpIHJldHVybiBjb250YWlucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gYXJyW2ldO1xuXG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZWxlbWVudCkgPT09IEpTT04uc3RyaW5naWZ5KHRhcmdldCkpIGNvbnRhaW5zID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbnM7XG4gIH07XG5cbiAgY29uc3QgY2xhc3NUb0FycmF5ID0gKGNsYXNzQ29vcmQpID0+IHtcbiAgICBjb25zdCBhcnJheUNvb3JkID0gW107XG5cbiAgICBjb25zdCB4ID0gY2xhc3NDb29yZC5zbGljZSgwLCAxKTtcbiAgICBjb25zdCB5ID0gY2xhc3NDb29yZC5zbGljZSgyLCAzKTtcblxuICAgIGFycmF5Q29vcmQucHVzaChOdW1iZXIoeCkpO1xuICAgIGFycmF5Q29vcmQucHVzaChOdW1iZXIoeSkpO1xuXG4gICAgcmV0dXJuIGFycmF5Q29vcmQ7XG4gIH07XG5cbiAgY29uc3QgY29vcmRUb0NsYXNzID0gKGFycikgPT4gYCR7YXJyLnNsaWNlKDAsIDEpfSwke2Fyci5zbGljZSgxLCAyKX1gO1xuXG4gIGNvbnN0IGNoYW5nZUNvb3JkQ29sb3IgPSAoY2xhc3NOYW1lLCBncmlkTnVtYmVyLCBjb2xvcikgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRDb29yZCA9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSlbZ3JpZE51bWJlciAtIDFdO1xuXG4gICAgaWYgKGN1cnJlbnRDb29yZCkgY3VycmVudENvb3JkLnN0eWxlLmJvcmRlciA9IGAxcHggc29saWQgJHtjb2xvcn1gO1xuICB9O1xuXG4gIGNvbnN0IGluZGljYXRlU3VuayA9IChzaGlwLCBncmlkTnVtYmVyKSA9PiB7XG4gICAgY29uc3QgeyBjdXJyZW50Q29vcmRzIH0gPSBzaGlwO1xuXG4gICAgaWYgKHR5cGVvZiBjdXJyZW50Q29vcmRzWzBdID09PSBcIm51bWJlclwiKVxuICAgICAgLy8gd2hlbiB0aGUgc2hpcCBvbmx5IGhhcyBvbmUgY29vcmRpbmF0ZS5cbiAgICAgIGNoYW5nZUNvb3JkQ29sb3IoY29vcmRUb0NsYXNzKGN1cnJlbnRDb29yZHMpLCBncmlkTnVtYmVyLCBcInJlZFwiKTtcbiAgICBlbHNlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hhbmdlQ29vcmRDb2xvcihjb29yZFRvQ2xhc3MoY3VycmVudENvb3Jkc1tpXSksIGdyaWROdW1iZXIsIFwicmVkXCIpO1xuICAgICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaXNUYXJnZXRJbkFycmF5LFxuICAgIGNoYW5nZUNvb3JkQ29sb3IsXG4gICAgaW5kaWNhdGVTdW5rLFxuICAgIGNsYXNzVG9BcnJheSxcbiAgICBjb29yZFRvQ2xhc3MsXG4gIH07XG59KSgpO1xuXG5jb25zdCBtYWluT2JqZWN0cyA9ICgoKSA9PiB7XG4gIGNvbnN0IFNoaXAgPSAobGVuZ3RoTnVtYmVyLCBoaXRzTnVtYmVyLCBjb29yZHMpID0+IHtcbiAgICBjb25zdCBjdXJyZW50Q29vcmRzID0gY29vcmRzO1xuXG4gICAgY29uc3QgY2hlY2tTdW5rID0gKGxlbmd0aCwgaGl0cykgPT4ge1xuICAgICAgaWYgKGxlbmd0aCA9PT0gaGl0cykgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGxldCBzaGlwSGl0cyA9IGhpdHNOdW1iZXI7XG5cbiAgICBjb25zdCBzaGlwTGVuZ3RoID0gbGVuZ3RoTnVtYmVyO1xuXG4gICAgY29uc3QgaXNTdW5rID0gKCkgPT4gY2hlY2tTdW5rKHNoaXBMZW5ndGgsIHNoaXBIaXRzKTtcblxuICAgIGNvbnN0IGhpdCA9ICgpID0+IHNoaXBIaXRzKys7XG5cbiAgICBjb25zdCBjdXJyZW50SGl0cyA9ICgpID0+IHNoaXBIaXRzO1xuXG4gICAgcmV0dXJuIHsgaXNTdW5rLCBoaXQsIGN1cnJlbnRIaXRzLCBjdXJyZW50Q29vcmRzLCBzaGlwTGVuZ3RoIH07XG4gIH07XG5cbiAgY29uc3QgR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGRlcGxveVNoaXBzID0gKFxuICAgICAgY2FycmllckNvcmRzLFxuICAgICAgYmF0dGxlU2hpcENvcmRzLFxuICAgICAgYmF0dGxlU2hpcDFDb3JkcyxcbiAgICAgIGNydWlzZXJDb3JkcyxcbiAgICAgIGNydWlzZXIxQ29yZHMsXG4gICAgICBjcnVpc2VyMkNvcmRzLFxuICAgICAgZGVzdHJveWVyQ29yZHMsXG4gICAgICBkZXN0cm95ZXIxQ29yZHMsXG4gICAgICBkZXN0cm95ZXIyQ29yZHMsXG4gICAgICBkZXN0cm95ZXIzQ29yZHNcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0ge1xuICAgICAgICBjYXJyaWVyOiBjYXJyaWVyQ29yZHMsXG4gICAgICAgIGJhdHRsZVNoaXA6IGJhdHRsZVNoaXBDb3JkcyxcbiAgICAgICAgYmF0dGxlU2hpcDE6IGJhdHRsZVNoaXAxQ29yZHMsXG4gICAgICAgIGNydWlzZXI6IGNydWlzZXJDb3JkcyxcbiAgICAgICAgY3J1aXNlcjE6IGNydWlzZXIxQ29yZHMsXG4gICAgICAgIGNydWlzZXIyOiBjcnVpc2VyMkNvcmRzLFxuICAgICAgICBkZXN0cm95ZXI6IGRlc3Ryb3llckNvcmRzLFxuICAgICAgICBkZXN0cm95ZXIxOiBkZXN0cm95ZXIxQ29yZHMsXG4gICAgICAgIGRlc3Ryb3llcjI6IGRlc3Ryb3llcjJDb3JkcyxcbiAgICAgICAgZGVzdHJveWVyMzogZGVzdHJveWVyM0NvcmRzLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY2FycmllciA9IFNoaXAoNCwgMCwgY29vcmRpbmF0ZXMuY2Fycmllcik7XG5cbiAgICAgIGNvbnN0IGJhdHRsZVNoaXAgPSBTaGlwKDMsIDAsIGNvb3JkaW5hdGVzLmJhdHRsZVNoaXApO1xuXG4gICAgICBjb25zdCBiYXR0bGVTaGlwMSA9IFNoaXAoMywgMCwgY29vcmRpbmF0ZXMuYmF0dGxlU2hpcDEpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyID0gU2hpcCgyLCAwLCBjb29yZGluYXRlcy5jcnVpc2VyKTtcblxuICAgICAgY29uc3QgY3J1aXNlcjEgPSBTaGlwKDIsIDAsIGNvb3JkaW5hdGVzLmNydWlzZXIxKTtcblxuICAgICAgY29uc3QgY3J1aXNlcjIgPSBTaGlwKDIsIDAsIGNvb3JkaW5hdGVzLmNydWlzZXIyKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyID0gU2hpcCgxLCAwLCBjb29yZGluYXRlcy5kZXN0cm95ZXIpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIxID0gU2hpcCgxLCAwLCBjb29yZGluYXRlcy5kZXN0cm95ZXIxKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMiA9IFNoaXAoMSwgMCwgY29vcmRpbmF0ZXMuZGVzdHJveWVyMik7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjMgPSBTaGlwKDEsIDAsIGNvb3JkaW5hdGVzLmRlc3Ryb3llcjMpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjYXJyaWVyLFxuICAgICAgICBiYXR0bGVTaGlwLFxuICAgICAgICBiYXR0bGVTaGlwMSxcbiAgICAgICAgY3J1aXNlcixcbiAgICAgICAgY3J1aXNlcjEsXG4gICAgICAgIGNydWlzZXIyLFxuICAgICAgICBkZXN0cm95ZXIsXG4gICAgICAgIGRlc3Ryb3llcjEsXG4gICAgICAgIGRlc3Ryb3llcjIsXG4gICAgICAgIGRlc3Ryb3llcjMsXG4gICAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVjZWl2ZWRBdHRhY2tzID0gW107XG5cbiAgICBjb25zdCBzdWNjZXNzQXR0YWNrcyA9IFtdO1xuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh0YXJnZXRDb3JkcywgcGxheWVyU2hpcHMpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTaGlwcyA9IE9iamVjdC5lbnRyaWVzKHBsYXllclNoaXBzLmNvb3JkaW5hdGVzKTtcbiAgICAgIHJlY2VpdmVkQXR0YWNrcy5wdXNoKHRhcmdldENvcmRzKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50U2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBzaGlwQ29yZHMgPSBjdXJyZW50U2hpcHNbaV1bMV07XG5cbiAgICAgICAgY29uc3Qgc2hpcE5hbWUgPSBjdXJyZW50U2hpcHNbaV1bMF07XG5cbiAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShzaGlwQ29yZHMsIHRhcmdldENvcmRzKSkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgc3VjY2Vzc0F0dGFja3MucHVzaCh0YXJnZXRDb3Jkcyk7XG5cbiAgICAgICAgICAvLyBpZiB0aGUgdGFyZ2V0IGNvcmRzIG1hdGNoZXMgYSBzaGlwIGNvcmRzLlxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJjYXJyaWVyXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmNhcnJpZXIuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY2Fycmllci5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmNhcnJpZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJiYXR0bGVTaGlwXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmJhdHRsZVNoaXAuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuYmF0dGxlU2hpcC5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmJhdHRsZVNoaXA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJiYXR0bGVTaGlwMVwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5iYXR0bGVTaGlwMS5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5iYXR0bGVTaGlwMS5pc1N1bmsoKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHBsYXllclNoaXBzLmJhdHRsZVNoaXAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiY3J1aXNlclwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5jcnVpc2VyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmNydWlzZXIuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5jcnVpc2VyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiY3J1aXNlcjFcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuY3J1aXNlcjEuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY3J1aXNlcjEuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5jcnVpc2VyMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImNydWlzZXIyXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmNydWlzZXIyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmNydWlzZXIyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuY3J1aXNlcjI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJkZXN0cm95ZXJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmRlc3Ryb3llci5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmRlc3Ryb3llcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjFcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMS5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIxLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMi5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llcjNcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuZGVzdHJveWVyMy5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5kZXN0cm95ZXIzLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyMztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3VjY2VzcyA9PT0gdHJ1ZSkgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGNoZWNrU3VuayA9IChwbGF5ZXJTaGlwcykgPT4ge1xuICAgICAgY29uc3QgYXJlQWxsU3VuayA9IChzaGlwcykgPT4ge1xuICAgICAgICAvLyBlaXRoZXIgd2UgZGlkbid0IGRlZmluZWQgdGhlIGNvcmRzIG9mIGEgc2hpcCAodW5kZWZpbmVkKSwgb3IgaXQgaXMgYWN0dWFsbHkgc3Vuaywgd2UgdGFrZSB0aGF0IGFzIHRydWUuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAoIXNoaXBzLmNhcnJpZXIuY3VycmVudENvb3JkcyB8fCBzaGlwcy5jYXJyaWVyLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuYmF0dGxlU2hpcC5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmJhdHRsZVNoaXAuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5iYXR0bGVTaGlwMS5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmJhdHRsZVNoaXAxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuY3J1aXNlci5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNydWlzZXIuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5jcnVpc2VyMS5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNydWlzZXIxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuY3J1aXNlcjIuY3VycmVudENvb3JkcyB8fCBzaGlwcy5jcnVpc2VyMi5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmRlc3Ryb3llci5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmRlc3Ryb3llci5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmRlc3Ryb3llcjEuY3VycmVudENvb3JkcyB8fCBzaGlwcy5kZXN0cm95ZXIxLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuZGVzdHJveWVyMi5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmRlc3Ryb3llcjIuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5kZXN0cm95ZXIzLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuZGVzdHJveWVyMy5pc1N1bmsoKSlcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBhcmVBbGxTdW5rKHBsYXllclNoaXBzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgICBkZXBsb3lTaGlwcyxcbiAgICAgIHJlY2VpdmVkQXR0YWNrcyxcbiAgICAgIHN1Y2Nlc3NBdHRhY2tzLFxuICAgICAgY2hlY2tTdW5rLFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIHsgU2hpcCwgR2FtZWJvYXJkIH07XG59KSgpO1xuXG5jb25zdCBwbGF5ZXJMb2dpYyA9ICgoKSA9PiB7XG4gIGNvbnN0IHZpc3VhbEluZGljYXRvcnMgPSAoY29vcmQsIHdhc1N1Y2Nlc3NmdWwsIHRhcmdldCkgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgaWYgKHRhcmdldCA9PT0gXCJjcHVcIikgaW5kZXggPSAxO1xuXG4gICAgY29uc3QgY3VycmVudE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvb3JkKVtpbmRleF07XG5cbiAgICBpZiAoY3VycmVudE5vZGUpIHtcbiAgICAgIGlmICh3YXNTdWNjZXNzZnVsID09PSBmYWxzZSkgY3VycmVudE5vZGUudGV4dENvbnRlbnQgPSBcIuKAolwiO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGN1cnJlbnROb2RlLnRleHRDb250ZW50ID0gXCJYXCI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZU5vZGVMaXN0ZW5lcnMgPSAoY29vcmQsIHRhcmdldCkgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgaWYgKHRhcmdldCA9PT0gXCJjcHVcIikgaW5kZXggPSAxO1xuXG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZCk7XG5cbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjb29yZGluYXRlKVtpbmRleF07XG5cbiAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5yZXBsYWNlV2l0aChlbGVtZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVDb29yZCA9IChjb29yZCkgPT4ge1xuICAgIGlmIChjb29yZFswXSA8IDAgfHwgY29vcmRbMV0gPCAwIHx8IGNvb3JkWzBdID4gOSB8fCBjb29yZFsxXSA+IDkpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVDb29yZHMgPSAoY29vcmRzKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGVkQ29vcmRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWxpZGF0ZUNvb3JkKGNvb3Jkc1tpXSkpIHZhbGlkYXRlZENvb3Jkcy5wdXNoKGNvb3Jkc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0ZWRDb29yZHM7XG4gIH07XG5cbiAgY29uc3QgcmV0dXJuU2lkZXMgPSAobm9kZUNvb3JkKSA9PiB7XG4gICAgY29uc3QgY29vcmRzID0gW107XG5cbiAgICBjb25zdCB1cCA9IFtub2RlQ29vcmRbMF0gLSAxLCBub2RlQ29vcmRbMV1dO1xuICAgIGNvbnN0IGRvd24gPSBbbm9kZUNvb3JkWzBdICsgMSwgbm9kZUNvb3JkWzFdXTtcbiAgICBjb25zdCByaWdodCA9IFtub2RlQ29vcmRbMF0sIG5vZGVDb29yZFsxXSArIDFdO1xuICAgIGNvbnN0IGxlZnQgPSBbbm9kZUNvb3JkWzBdLCBub2RlQ29vcmRbMV0gLSAxXTtcblxuICAgIGNvb3Jkcy5wdXNoKHVwLCBkb3duLCByaWdodCwgbGVmdCk7XG5cbiAgICByZXR1cm4gY29vcmRzO1xuICB9O1xuXG4gIGNvbnN0IGF0dGFja0Fyb3VuZCA9IChcbiAgICBub2RlQ29vcmRzLFxuICAgIGF0dGFja0Z1bmN0aW9uLFxuICAgIHNoaXBzLFxuICAgIHRhcmdldCxcbiAgICBzdWNjZXNzQXR0YWNrc1xuICApID0+IHtcbiAgICBjb25zdCBhcm91bmRDb29yZHMgPSBbXTtcblxuICAgIGlmICh0eXBlb2Ygbm9kZUNvb3Jkc1swXSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyb3VuZENvb3Jkcy5wdXNoKHJldHVyblNpZGVzKG5vZGVDb29yZHNbaV0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXJvdW5kQ29vcmRzLnB1c2gocmV0dXJuU2lkZXMobm9kZUNvb3JkcykpOyAvLyB3aGVuIHRoZSBzaGlwIGhhcyBvbmx5IG9uZSBjb29yZC5cbiAgICB9XG5cbiAgICBjb25zdCBmbGF0QXJvdW5kQ29vcmRzID0gdmFsaWRhdGVDb29yZHMoYXJvdW5kQ29vcmRzLmZsYXQoKSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZsYXRBcm91bmRDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KHN1Y2Nlc3NBdHRhY2tzLCBmbGF0QXJvdW5kQ29vcmRzW2ldKSkge1xuICAgICAgICAvLyBhdm9pZCBtb2RpZnlpbmcgc3VjY2Vzc2Z1bCBhdHRhY2tzLlxuICAgICAgICB2aXN1YWxJbmRpY2F0b3JzKGZsYXRBcm91bmRDb29yZHNbaV0sIGZhbHNlLCB0YXJnZXQpO1xuICAgICAgICByZW1vdmVOb2RlTGlzdGVuZXJzKGZsYXRBcm91bmRDb29yZHNbaV0sIHRhcmdldCk7XG4gICAgICAgIGF0dGFja0Z1bmN0aW9uKGZsYXRBcm91bmRDb29yZHNbaV0sIHNoaXBzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmV0dXJuQ29ybmVycyA9IChub2RlKSA9PiB7XG4gICAgY29uc3QgY29ybmVycyA9IFtdO1xuXG4gICAgY29uc3QgY29ybmVyMSA9IFtub2RlWzBdICsgMSwgbm9kZVsxXSArIDFdO1xuICAgIGNvbnN0IGNvcm5lcjIgPSBbbm9kZVswXSArIDEsIG5vZGVbMV0gKyAtMV07XG4gICAgY29uc3QgY29ybmVyMyA9IFtub2RlWzBdIC0gMSwgbm9kZVsxXSArIDFdO1xuICAgIGNvbnN0IGNvcm5lcjQgPSBbbm9kZVswXSAtIDEsIG5vZGVbMV0gLSAxXTtcblxuICAgIGNvcm5lcnMucHVzaChjb3JuZXIxLCBjb3JuZXIyLCBjb3JuZXIzLCBjb3JuZXI0KTtcblxuICAgIHJldHVybiBjb3JuZXJzO1xuICB9O1xuXG4gIGNvbnN0IGF0dGFja0Nvcm5lcnMgPSAobm9kZUNvb3JkLCBhdHRhY2tGdW5jdGlvbiwgdGFyZ2V0KSA9PiB7XG4gICAgY29uc3QgY29ybmVycyA9IHJldHVybkNvcm5lcnMobm9kZUNvb3JkKTtcblxuICAgIGNvbnN0IHZhbGlkQ29ybmVycyA9IHZhbGlkYXRlQ29vcmRzKGNvcm5lcnMpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWxpZENvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZpc3VhbEluZGljYXRvcnModmFsaWRDb3JuZXJzW2ldLCBmYWxzZSwgdGFyZ2V0KTtcbiAgICAgIHJlbW92ZU5vZGVMaXN0ZW5lcnModmFsaWRDb3JuZXJzW2ldLCB0YXJnZXQpO1xuICAgICAgYXR0YWNrRnVuY3Rpb24odmFsaWRDb3JuZXJzW2ldLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cblxuICBjb25zdCBub3RSZXBlYXRlZENvb3JkcyA9IChjb29yZHMsIGZ1bGxDb29yZHMpID0+IHtcblxuICAgIGNvbnN0IG5vUmVwZWF0ID0gW11cblxuICAgIGNvbnN0IHVzZWRDb29yZHMgPSBmdWxsQ29vcmRzLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQgIT09IHVuZGVmaW5lZClcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Q29vcmQgPSBjb29yZHNbaV07XG4gICAgICBpZiAoIWdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheSh1c2VkQ29vcmRzLCBjdXJyZW50Q29vcmQpKSBub1JlcGVhdC5wdXNoKGN1cnJlbnRDb29yZClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9SZXBlYXRcbiAgfVxuXG4gIGNvbnN0IFBsYXllciA9IChuYW1lLCBzaGlwc0Nvb3JkcykgPT4ge1xuICAgIGNvbnN0IHBsYXllck5hbWUgPSBuYW1lO1xuXG4gICAgY29uc3QgcGxheWVyQ29vcmRzID0gc2hpcHNDb29yZHM7XG5cbiAgICBjb25zdCBwbGF5ZXJCb2FyZCA9IG1haW5PYmplY3RzLkdhbWVib2FyZCgpO1xuXG4gICAgY29uc3QgcGxheWVyU2hpcHMgPSBwbGF5ZXJCb2FyZC5kZXBsb3lTaGlwcyguLi5zaGlwc0Nvb3Jkcyk7XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkcykgPT4ge1xuICAgICAgY29uc3QgcmVjZWl2ZWRBdHRhY2sgPSBwbGF5ZXJCb2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkcywgcGxheWVyU2hpcHMpO1xuXG4gICAgICBpZiAocmVjZWl2ZWRBdHRhY2spIHtcbiAgICAgICAgLy8gaWYgcmVjZWl2ZWRBdHRhY2sgaXMgYSB0cnVlIHZhbHVlLCBpdCBtZWFucyB0aGF0IGl0IGNvbnRhaW5zIGEgc3Vua2VkIHNoaXAuXG4gICAgICAgIGdsb2JhbExvZ2ljLmluZGljYXRlU3VuayhyZWNlaXZlZEF0dGFjaywgMSk7XG4gICAgICAgIGF0dGFja0Fyb3VuZChcbiAgICAgICAgICByZWNlaXZlZEF0dGFjay5jdXJyZW50Q29vcmRzLFxuICAgICAgICAgIHBsYXllckJvYXJkLnJlY2VpdmVBdHRhY2ssXG4gICAgICAgICAgcGxheWVyU2hpcHMsXG4gICAgICAgICAgXCJwbGF5ZXJcIixcbiAgICAgICAgICBwbGF5ZXJCb2FyZC5zdWNjZXNzQXR0YWNrc1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGxheWVyTmFtZSxcbiAgICAgIHBsYXllckNvb3JkcyxcbiAgICAgIHBsYXllckJvYXJkLFxuICAgICAgcGxheWVyU2hpcHMsXG4gICAgICByZWNlaXZlQXR0YWNrLFxuICAgIH07XG4gIH07XG5cblxuICBjb25zdCBjcHVQbGF5ZXIgPSAoaHVtYW5QbGF5ZXIsIHNoaXBzQ29yZHMpID0+IHtcbiAgICBjb25zdCByaXZhbFBsYXllciA9IGh1bWFuUGxheWVyO1xuXG4gICAgY29uc3QgY3B1Q29vcmRzID0gc2hpcHNDb3JkcztcblxuICAgIGNvbnN0IGNwdUJvYXJkID0gbWFpbk9iamVjdHMuR2FtZWJvYXJkKCk7XG5cbiAgICBjb25zdCBjcHVTaGlwcyA9IGNwdUJvYXJkLmRlcGxveVNoaXBzKC4uLnNoaXBzQ29yZHMpO1xuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgICAgY29uc3QgcmVjZWl2ZWRBdHRhY2sgPSBjcHVCb2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzLCBjcHVTaGlwcyk7XG5cbiAgICAgIGlmIChyZWNlaXZlZEF0dGFjaykge1xuICAgICAgICAvLyBpZiByZWNlaXZlZEF0dGFjayBpcyBhIHRydWUgdmFsdWUsIGl0IG1lYW5zIHRoYXQgaXQgY29udGFpbnMgYSBzdW5rZWQgc2hpcC5cbiAgICAgICAgZ2xvYmFsTG9naWMuaW5kaWNhdGVTdW5rKHJlY2VpdmVkQXR0YWNrLCAyKTtcbiAgICAgICAgYXR0YWNrQXJvdW5kKFxuICAgICAgICAgIHJlY2VpdmVkQXR0YWNrLmN1cnJlbnRDb29yZHMsXG4gICAgICAgICAgY3B1Qm9hcmQucmVjZWl2ZUF0dGFjayxcbiAgICAgICAgICBjcHVTaGlwcyxcbiAgICAgICAgICBcImNwdVwiLFxuICAgICAgICAgIGNwdUJvYXJkLnN1Y2Nlc3NBdHRhY2tzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjcHVIaXRzID0gW107IC8vIHRoaXMgYXJyYXkgZG8gbm90IGNvbnRhaW5zIGNvcm5lckhpdHMuXG4gICAgY29uc3Qgcml2YWxIaXRzID0gcml2YWxQbGF5ZXIucGxheWVyQm9hcmQucmVjZWl2ZWRBdHRhY2tzXG4gICAgY29uc3Qgcml2YWxTdWNjZXNzSGl0cyA9IHJpdmFsUGxheWVyLnBsYXllckJvYXJkLnN1Y2Nlc3NBdHRhY2tzO1xuXG4gICAgY29uc3QgdHJ5Q2xvc2VBdHRhY2sgPSAoY3VycmVudENvb3JkLCBhdHRhY2tGdW5jdGlvbiwgcmFuZG9tQ29vcmQpID0+IHtcblxuICAgICAgY29uc3QgcmFuZG9tSW50ID0gKG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgICAgIC8vIGdldCB0aGUgNCBwb3NzaWJsZSBzaWRlc1xuICAgICAgY29uc3QgdXAgPSBbY3VycmVudENvb3JkWzBdIC0gMSwgY3VycmVudENvb3JkWzFdXTtcbiAgICAgIGNvbnN0IGRvd24gPSBbY3VycmVudENvb3JkWzBdICsgMSwgY3VycmVudENvb3JkWzFdXTtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gW2N1cnJlbnRDb29yZFswXSwgY3VycmVudENvb3JkWzFdICsgMV07XG4gICAgICBjb25zdCBsZWZ0ID0gW2N1cnJlbnRDb29yZFswXSwgY3VycmVudENvb3JkWzFdIC0gMV07XG5cbiAgICAgIGNvbnN0IGF0dGFja3MgPSBbdXAsIGRvd24sIHJpZ2h0LCBsZWZ0XVxuXG4gICAgICBjb25zdCByZW1vdmVPdXRNb3ZlcyA9IHZhbGlkYXRlQ29vcmRzKGF0dGFja3MpXG5cbiAgICAgIGNvbnN0IHBvc3NpYmxlQXR0YWNrcyA9IG5vdFJlcGVhdGVkQ29vcmRzKHJlbW92ZU91dE1vdmVzLCByaXZhbEhpdHMpXG5cbiAgICAgIGlmIChwb3NzaWJsZUF0dGFja3MubGVuZ3RoID09PSAwKS8vIGlmIHBvc3NpYmxlQXR0YWNrcyBpcyB6ZXJvLCBpdCBtZWFucyB0aGF0IHdlIGNhbid0IG1ha2UgYSBjbG9zZSBhdHRhY2suXG4gICAgICAgIHJldHVybiBhdHRhY2tGdW5jdGlvbihyYW5kb21Db29yZClcblxuICAgICAgLy8gc2VsZWN0IGEgcmFuZG9tIHNpZGVcbiAgICAgIGNvbnN0IHJhbmRvbUNob2ljZSA9IHBvc3NpYmxlQXR0YWNrc1tyYW5kb21JbnQocG9zc2libGVBdHRhY2tzLmxlbmd0aCldO1xuXG4gICAgICByZXR1cm4gYXR0YWNrRnVuY3Rpb24ocmFuZG9tQ2hvaWNlKVxuXG4gICAgfVxuXG4gICAgY29uc3QgYXR0YWNrUGxheWVyID0gKGNvb3JkcywgaWdub3JlQ29vcmRzKSA9PiB7XG5cbiAgICAgIGNvbnN0IHJhbmRvbUludCA9IChtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG4gICAgICBjb25zdCByYW5kb21Db29yZHMgPSBbcmFuZG9tSW50KDEwKSwgcmFuZG9tSW50KDEwKV07XG5cbiAgICAgIGNvbnN0IGF0dGFja0xvZ2ljID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICAgIHJpdmFsUGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuXG4gICAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkocml2YWxTdWNjZXNzSGl0cywgY29vcmRpbmF0ZXMpKSB7IC8vIHN1Y2Nlc3NmdWwgYXR0YWNrXG4gICAgICAgICAgdmlzdWFsSW5kaWNhdG9ycyhjb29yZGluYXRlcywgdHJ1ZSwgXCJwbGF5ZXJcIik7XG4gICAgICAgICAgYXR0YWNrQ29ybmVycyhjb29yZGluYXRlcywgYXR0YWNrUGxheWVyLCBcInBsYXllclwiKTtcbiAgICAgICAgICBjcHVIaXRzLnB1c2goY29vcmRpbmF0ZXMpXG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIC8vIGZhaWxlZCBhdHRhY2tcbiAgICAgICAgY3B1SGl0cy5wdXNoKGNvb3JkaW5hdGVzKVxuICAgICAgICB2aXN1YWxJbmRpY2F0b3JzKGNvb3JkaW5hdGVzLCBmYWxzZSwgXCJwbGF5ZXJcIik7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgaWYgKCAvLyBjYWxsIHRoZSBmdW5jdGlvbiByZWN1cnNpdmVseSBhbmQgZ2VuZXJhdGUgbmV3IHJhbmRvbSBjb29yZHMgaWYgdGhlIGF0dGFjayBoYXMgYWxyZWFkeSBiZSBkb25lIGluIHRoYXQgY29vcmRpbmF0ZS5cbiAgICAgICAgZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KHJpdmFsSGl0cywgcmFuZG9tQ29vcmRzKSAmJlxuICAgICAgICBpZ25vcmVDb29yZHMgIT09IHRydWVcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIGF0dGFja1BsYXllcigpO1xuXG4gICAgICBpZiAoY29vcmRzKSAvLyB3aGVuIHRoZSBjb29yZHMgYXJlIGluZGljYXRlZCBtYW51YWxseS5cbiAgICAgICAgcmV0dXJuIGF0dGFja0xvZ2ljKGNvb3Jkcyk7XG5cbiAgICAgIGlmIChjcHVIaXRzWzBdICYmIHJpdmFsU3VjY2Vzc0hpdHNbMF0pXG4gICAgICAgIGlmICgoY3B1SGl0c1tjcHVIaXRzLmxlbmd0aCAtIDFdID09PSByaXZhbFN1Y2Nlc3NIaXRzW3JpdmFsU3VjY2Vzc0hpdHMubGVuZ3RoIC0gMV0pKSAgLy8gaWYgdGhlIGxhc3QgaGl0IHdhcyBhIHN1Y2Nlc3NmdWwgYXR0YWNrLlxuICAgICAgICAgIHJldHVybiB0cnlDbG9zZUF0dGFjayhyaXZhbFN1Y2Nlc3NIaXRzW3JpdmFsU3VjY2Vzc0hpdHMubGVuZ3RoIC0gMV0sIGF0dGFja1BsYXllciwgcmFuZG9tQ29vcmRzKVxuXG4gICAgICByZXR1cm4gYXR0YWNrTG9naWMocmFuZG9tQ29vcmRzKTsgLy8gd2hlbiB0aGUgY29vcmRzIGFyZSBnZW5lcmF0ZWQgcmFuZG9tbHkuXG4gICAgfTtcblxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGF0dGFja1BsYXllcixcbiAgICAgIGNwdUJvYXJkLFxuICAgICAgY3B1U2hpcHMsXG4gICAgICBjcHVDb29yZHMsXG4gICAgICByZWNlaXZlQXR0YWNrLFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBQbGF5ZXIsXG4gICAgY3B1UGxheWVyLFxuICAgIHZpc3VhbEluZGljYXRvcnMsXG4gICAgYXR0YWNrQ29ybmVycyxcbiAgICBhdHRhY2tBcm91bmQsXG4gICAgcmV0dXJuQ29ybmVycyxcbiAgICByZXR1cm5TaWRlcyxcbiAgICB2YWxpZGF0ZUNvb3JkcyxcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IEdhbWUgPSAoKCkgPT4ge1xuICBjb25zdCBuZXdHYW1lID0gKHBsYXllck5hbWUsIHBsYXllckNvb3JkcywgY3B1Q29vcmRzKSA9PiB7XG4gICAgY29uc3QgUGxheWVyID0gcGxheWVyTG9naWMuUGxheWVyKHBsYXllck5hbWUsIHBsYXllckNvb3Jkcyk7XG5cbiAgICBjb25zdCBjcHVQbGF5ZXIgPSBwbGF5ZXJMb2dpYy5jcHVQbGF5ZXIoUGxheWVyLCBjcHVDb29yZHMpO1xuXG4gICAgcmV0dXJuIHsgUGxheWVyLCBjcHVQbGF5ZXIgfTtcbiAgfTtcblxuICByZXR1cm4geyBuZXdHYW1lIH07XG59KSgpO1xuXG5jb25zdCBET01Mb2dpYyA9ICgoKSA9PiB7XG4gIGNvbnN0IGRpc3BsYXlHcmlkID0gKGdyaWQxLCBncmlkMikgPT4ge1xuICAgIGNvbnN0IGNyZWF0ZUdyaWQgPSAoc2l6ZSkgPT4ge1xuICAgICAgY29uc3QgcmVjdXJzaXZlID0gKHlQb3MpID0+IHtcbiAgICAgICAgaWYgKHlQb3MgPT09IHNpemUpIHJldHVybjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGdyaWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBncmlkRWxlbWVudC5jbGFzc05hbWUgPSBgJHt5UG9zfSwke2l9YDtcblxuICAgICAgICAgIGNvbnN0IGdyaWRFbGVtZW50MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZ3JpZEVsZW1lbnQyLmNsYXNzTmFtZSA9IGAke3lQb3N9LCR7aX1gO1xuXG4gICAgICAgICAgaWYgKGdyaWQxKSBncmlkMS5hcHBlbmRDaGlsZChncmlkRWxlbWVudCk7XG4gICAgICAgICAgaWYgKGdyaWQyKSBncmlkMi5hcHBlbmRDaGlsZChncmlkRWxlbWVudDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjdXJzaXZlKHlQb3MgKyAxKTtcbiAgICAgIH07XG4gICAgICByZWN1cnNpdmUoMCk7XG4gICAgfTtcblxuICAgIGNyZWF0ZUdyaWQoMTApO1xuICB9O1xuXG4gIGNvbnN0IGdlbkluZGljYXRvcnMgPSAoeENvbnRhaW5lciwgeUNvbnRhaW5lcikgPT4ge1xuICAgIGNvbnN0IGdyaWRJbmRpY2F0b3JzWCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xuICAgIGNvbnN0IGdyaWRJbmRpY2F0b3JzWSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xuXG4gICAgZ3JpZEluZGljYXRvcnNYLmNsYXNzTGlzdC5hZGQoXCJYXCIpO1xuICAgIGdyaWRJbmRpY2F0b3JzWS5jbGFzc0xpc3QuYWRkKFwiWVwiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDk7IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gaTtcbiAgICAgIGdyaWRJbmRpY2F0b3JzWS5hcHBlbmRDaGlsZChlbGVtZW50KTtcblxuICAgICAgY29uc3QgZWxlbWVudDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWxlbWVudDIudGV4dENvbnRlbnQgPSBpO1xuICAgICAgZ3JpZEluZGljYXRvcnNYLmFwcGVuZENoaWxkKGVsZW1lbnQyKTtcbiAgICB9XG5cbiAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRJbmRpY2F0b3JzWCk7XG4gICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZChncmlkSW5kaWNhdG9yc1kpO1xuICB9O1xuXG4gIGNvbnN0IFVJTG9naWMgPSAobm9kZXMsIGdhbWVJbmZvKSA9PiB7XG4gICAgY29uc3QgcGxheWVyMUNvb3JkcyA9IGdhbWVJbmZvLlBsYXllci5wbGF5ZXJTaGlwcy5jb29yZGluYXRlcztcblxuICAgIGNvbnN0IHBsYXllcjJDb29yZHMgPSBnYW1lSW5mby5jcHVQbGF5ZXIuY3B1U2hpcHMuY29vcmRpbmF0ZXM7XG5cbiAgICBjb25zdCBhdHRhY2tQbGF5ZXIgPSAoY29vcmQpID0+IGdhbWVJbmZvLlBsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkKTtcblxuICAgIGNvbnN0IGF0dGFja0NwdSA9IChjb29yZCkgPT4gZ2FtZUluZm8uY3B1UGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmQpO1xuXG4gICAgY29uc3QgYXR0YWNrT25DbGljayA9IChzaGlwQ29vcmRzLCBub2RlQ29vcmQsIGF0dGFja0Z1bmN0aW9uKSA9PiB7XG4gICAgICAvLyBpZiB0aGUgcGxheWVyIGhhcyBhIHNoaXAgaW4gdGhlIGNsaWNrZWQgY29vcmRpbmF0ZSwgYXR0YWNrIHRoZSBwbGF5ZXIgdG8gdGhhdCBzcGVjaWZpYyBjb29yZC5cbiAgICAgIGxldCB3YXNTdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KE9iamVjdC52YWx1ZXMoc2hpcENvb3JkcyksIG5vZGVDb29yZCkpIHtcbiAgICAgICAgLy8gd2hlbiB0aGUgbm9kZUNvb3JkIGlzIGluc2lkZSBvZiBhIG9uZS1jb29yZGluYXRlIHNoaXAsIHRoaXMgY29uZGl0aW9uYWwgaXMgdXNlZC5cbiAgICAgICAgYXR0YWNrRnVuY3Rpb24obm9kZUNvb3JkKTtcbiAgICAgICAgd2FzU3VjY2Vzc2Z1bCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gd2hlbiB0aGUgbm9kZUNvb3JkIGlzIGluc2lkZSBvZiBhIG11bHRpcGxlLWNvb3JkaW5hdGUgc2hpcC5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcENvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGNvb3JkcyBhcnJheSBvZiBlYWNoIHNoaXAsIHVudGlsIHRoZSBub2RlQ29vcmQgaXMgZm91bmQuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBzaGlwQ29vcmRzW2ldO1xuICAgICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGN1cnJlbnRDb29yZHMsIG5vZGVDb29yZCkpIHtcbiAgICAgICAgICBhdHRhY2tGdW5jdGlvbihub2RlQ29vcmQpO1xuICAgICAgICAgIHdhc1N1Y2Nlc3NmdWwgPSB0cnVlO1xuXG4gICAgICAgICAgYnJlYWs7IC8vIHN0b3AgbG9vcGluZyB0aHJvdWdoIHRoZSBzaGlwcyBjb29yZHMgdG8gb3B0aW1pemUgdGltZSBjb21wbGV4aXR5LlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gd2FzU3VjY2Vzc2Z1bDtcbiAgICB9O1xuXG4gICAgLy8gbm90ZSwgdGhlIGF0dGFja09uQ2xpY2sgZnVuY3Rpb24gd2lsbCBhbHdheXMgY2FsbCB0aGUgYXR0YWNrRnVuY3Rpb24gb24gYSBzdWNjZXNzZnVsIGF0dGFjay5cbiAgICAvLyB0aGF0J3Mgd2h5IHdlIHdpbGwgbmVlZCB0aGUgbmV4dCBmdW5jdGlvbi5cblxuICAgIGNvbnN0IG1pc3NlZEF0dGFja09uQ2xpY2sgPSAobm9kZUNvb3JkLCBhdHRhY2tGdW5jdGlvbikgPT4ge1xuICAgICAgYXR0YWNrRnVuY3Rpb24obm9kZUNvb3JkKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgZGV0ZWN0QXR0YWNrcyA9IChlKSA9PiB7XG4gICAgICBjb25zdCBwYXJlbnRDbGFzcyA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lO1xuXG4gICAgICBjb25zdCBub2RlQ2xhc3MgPSBlLnRhcmdldC5jbGFzc05hbWU7XG5cbiAgICAgIGNvbnN0IG5vZGVDb29yZCA9IGdsb2JhbExvZ2ljLmNsYXNzVG9BcnJheShub2RlQ2xhc3MpO1xuXG4gICAgICBpZiAocGFyZW50Q2xhc3MgPT09IFwiZ3JpZC0xXCIpIHtcbiAgICAgICAgLy8gaWYgdGhlIGNsaWNrZWQgY29vcmRpbmF0ZSBpcyBpbnNpZGUgb2YgZ3JpZC0xLCB3ZSBrbm93IHRoYXQgaXQgaXMgYW4gYXR0YWNrIHRvIHBsYXllcjEuXG5cbiAgICAgICAgY29uc3QgY2xlYW5Db29yZHMgPSBPYmplY3QudmFsdWVzKHBsYXllcjFDb29yZHMpLmZpbHRlcihcbiAgICAgICAgICAoY29vcmRzKSA9PiBjb29yZHMgIT09IHVuZGVmaW5lZFxuICAgICAgICApOyAvLyBmaWx0ZXIgdW5kZWZpbmVkIGNvb3Jkcy5cblxuICAgICAgICBpZiAoYXR0YWNrT25DbGljayhjbGVhbkNvb3Jkcywgbm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIHRydWUsIFwicGxheWVyXCIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLmF0dGFja0Nvcm5lcnMobm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIsIFwicGxheWVyXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NlZEF0dGFja09uQ2xpY2sobm9kZUNvb3JkLCBhdHRhY2tQbGF5ZXIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLnZpc3VhbEluZGljYXRvcnMobm9kZUNsYXNzLCBmYWxzZSwgXCJwbGF5ZXJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudENsYXNzID09PSBcImdyaWQtMlwiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuQ29vcmRzID0gT2JqZWN0LnZhbHVlcyhwbGF5ZXIyQ29vcmRzKS5maWx0ZXIoXG4gICAgICAgICAgKGNvb3JkcykgPT4gY29vcmRzICE9PSB1bmRlZmluZWRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoYXR0YWNrT25DbGljayhjbGVhbkNvb3Jkcywgbm9kZUNvb3JkLCBhdHRhY2tDcHUpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIHRydWUsIFwiY3B1XCIpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLmF0dGFja0Nvcm5lcnMobm9kZUNvb3JkLCBhdHRhY2tDcHUsIFwiY3B1XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NlZEF0dGFja09uQ2xpY2sobm9kZUNvb3JkLCBhdHRhY2tDcHUpO1xuICAgICAgICAgIHBsYXllckxvZ2ljLnZpc3VhbEluZGljYXRvcnMobm9kZUNsYXNzLCBmYWxzZSwgXCJjcHVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZXRlY3RBdHRhY2tzLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IChcbiAgICBncmlkQ29udGFpbmVyMSxcbiAgICBncmlkQ29udGFpbmVyMixcbiAgICBwbGF5ZXJDb29yZHMsXG4gICAgY3B1Q29vcmRzXG4gICkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRHYW1lID0gR2FtZS5uZXdHYW1lKFwiZXhhbXBsZVwiLCBwbGF5ZXJDb29yZHMsIGNwdUNvb3Jkcyk7XG5cbiAgICBpZiAoZ3JpZENvbnRhaW5lcjEuY2xhc3NOYW1lICE9PSBcInNob3duLWdyaWRcIikge1xuICAgICAgVUlMb2dpYyhncmlkQ29udGFpbmVyMS5jaGlsZE5vZGVzLCBjdXJyZW50R2FtZSk7XG4gICAgfVxuXG4gICAgaWYgKGdyaWRDb250YWluZXIyLmNsYXNzTmFtZSAhPT0gXCJzaG93bi1ncmlkXCIpIHtcbiAgICAgIFVJTG9naWMoZ3JpZENvbnRhaW5lcjIuY2hpbGROb2RlcywgY3VycmVudEdhbWUpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGN1cnJlbnRHYW1lLCBncmlkQ29udGFpbmVyMSwgZ3JpZENvbnRhaW5lcjIgfTtcbiAgfTtcblxuICBjb25zdCBnZW5ET01FbGVtZW50cyA9ICgpID0+IHtcbiAgICBjb25zdCBmbGF0Q29vcmRzID0gKGNvb3Jkc0FycikgPT4ge1xuICAgICAgY29uc3Qgb25lRGltZW5zaW9uQ29vcmRzID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGNvb3Jkc0FycltpXTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvb3Jkc1swXSA9PT0gXCJvYmplY3RcIikgb25lRGltZW5zaW9uQ29vcmRzLnB1c2goLi4uY29vcmRzKTtcbiAgICAgICAgLy8gaWYgdGhlIHNoaXBzIGhhdmUgbW9yZSB0aGFuIG9uZSBjb29yZGluYXRlLlxuICAgICAgICBlbHNlIG9uZURpbWVuc2lvbkNvb3Jkcy5wdXNoKGNvb3Jkcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb25lRGltZW5zaW9uQ29vcmRzO1xuICAgIH07XG5cbiAgICBjb25zdCBzaG93U2hpcHMgPSAoY3VycmVudENvb3JkcywgZ3JpZE51bWJlcikgPT4ge1xuICAgICAgY29uc3QgY29vcmRzID0gZmxhdENvb3JkcyhjdXJyZW50Q29vcmRzKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ2xvYmFsTG9naWMuY2hhbmdlQ29vcmRDb2xvcihcbiAgICAgICAgICBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY29vcmRzW2ldKSxcbiAgICAgICAgICBncmlkTnVtYmVyLFxuICAgICAgICAgIFwiZ3JlZW5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBkZWxldGVFbGVtZW50cyA9IChpbmRleCkgPT4ge1xuICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLWNvbnRhaW5lclwiKVtpbmRleF07XG4gICAgICBpZiAobWFpbkNvbnRhaW5lcikgbWFpbkNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZGVsZXRlU2hvd25HcmlkID0gKGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBzaG93bkdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hvd24tZ3JpZFwiKVtpbmRleF07XG4gICAgICBpZiAoc2hvd25HcmlkKSBzaG93bkdyaWQucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkdyaWRPbmx5ID0gKHBsYXllckluZGV4LCBjb250YWluZXIsIGNvb3JkcykgPT4ge1xuICAgICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBncmlkLmNsYXNzTmFtZSA9IGBncmlkLSR7cGxheWVySW5kZXh9YDtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChncmlkKTtcblxuICAgICAgaWYgKHBsYXllckluZGV4ID09PSAxKSBET01Mb2dpYy5kaXNwbGF5R3JpZChncmlkLCBudWxsKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBET01Mb2dpYy5kaXNwbGF5R3JpZChudWxsLCBncmlkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvb3Jkcykge1xuICAgICAgICBncmlkLmNsYXNzTmFtZSA9IGBzaG93bi1ncmlkYDtcbiAgICAgICAgc2hvd1NoaXBzKGNvb3JkcywgcGxheWVySW5kZXgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ3JpZDtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuR3JpZCA9IChwbGF5ZXJJbmRleCwgY29vcmRzKSA9PiB7XG4gICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG4gICAgICBtYWluQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwibWFpbi1jb250YWluZXJcIjtcblxuICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtYWluXCIpO1xuICAgICAgaWYgKG1haW4pIG1haW4uYXBwZW5kQ2hpbGQobWFpbkNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IGdyaWRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGdyaWRzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZ3JpZHMtY29udGFpbmVyXCI7XG5cbiAgICAgIGlmIChtYWluQ29udGFpbmVyKSBtYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRzQ29udGFpbmVyKTtcblxuICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgIG5hbWUudGV4dENvbnRlbnQgPSBgUGxheWVyJ3MgJHtwbGF5ZXJJbmRleH0gR3JpZGA7XG4gICAgICBncmlkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lKTtcblxuICAgICAgY29uc3QgZ3JpZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZ3JpZFdyYXBwZXIuY2xhc3NOYW1lID0gXCJncmlkLXdyYXBwZXJcIjtcblxuICAgICAgZ2VuSW5kaWNhdG9ycyhncmlkc0NvbnRhaW5lciwgZ3JpZFdyYXBwZXIpOyAvLyBnZW4gaW5kaWNhdG9ycyBoZXJlIHRvIHB1dCBcIlhcIiBjb250YWluZXIgYWJvdmUgdGhlIGdyaWQuXG5cbiAgICAgIGdyaWRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRXcmFwcGVyKTtcblxuICAgICAgY29uc3QgZ3JpZCA9IGdlbkdyaWRPbmx5KHBsYXllckluZGV4LCBncmlkV3JhcHBlciwgY29vcmRzKTtcblxuICAgICAgcmV0dXJuIGdyaWQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlblN0YXJ0QnV0dG9uID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgc3RhcnRCdXR0b24uY2xhc3NOYW1lID0gXCJzdGFydC1idXR0b25cIjtcbiAgICAgIHN0YXJ0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTdGFydCBHYW1lXCI7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnV0dG9uLXdyYXBwZXJcIilbMF07XG4gICAgICBpZiAoYnV0dG9uQ29udGFpbmVyKSBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3RhcnRCdXR0b24pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5Db29yZElucHV0cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWFpbi1jb250YWluZXJcIilbMF07XG5cbiAgICAgIGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICBpbnB1dFRpdGxlLmNsYXNzTGlzdC5hZGQoYGlucHV0cy1jb250YWluZXJgKTtcbiAgICAgIGlucHV0VGl0bGUuaHRtbEZvciA9IFwic2VsZWN0LXNoaXBzXCI7XG4gICAgICBpbnB1dFRpdGxlLnRleHRDb250ZW50ID0gXCJTZXQgSW5pdGlhbCBDb29yZFwiO1xuICAgICAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dFRpdGxlKTtcblxuICAgICAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgICBzZWxlY3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHNlbGVjdC1zaGlwc2ApO1xuICAgICAgaW5wdXRUaXRsZS5hcHBlbmRDaGlsZChzZWxlY3RFbGVtZW50KTtcblxuICAgICAgY29uc3QgaW5wdXRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGlucHV0V3JhcHBlci5jbGFzc0xpc3QuYWRkKGBpbnB1dC13cmFwcGVyYCk7XG4gICAgICBpbnB1dFRpdGxlLmFwcGVuZENoaWxkKGlucHV0V3JhcHBlcik7XG5cbiAgICAgIGNvbnN0IGlucHV0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIGlucHV0MS5jbGFzc0xpc3QuYWRkKGBjb29yZHMtaW5wdXRgKTtcbiAgICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChpbnB1dDEpO1xuXG4gICAgICBjb25zdCBpbnB1dFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIGlucHV0VGV4dC5jbGFzc0xpc3QuYWRkKGBpbnB1dC10ZXh0YCk7XG4gICAgICBpbnB1dFRleHQudGV4dENvbnRlbnQgPSBcIixcIjtcbiAgICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xuXG4gICAgICBjb25zdCBpbnB1dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBpbnB1dDIuY2xhc3NMaXN0LmFkZChgY29vcmRzLWlucHV0YCk7XG4gICAgICBpbnB1dFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQyKTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGBhcHBseS1jb29yZHNgKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQXBwbHlcIjtcbiAgICAgIGlucHV0VGl0bGUuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcblxuICAgICAgY29uc3Qgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb24xLnZhbHVlID0gXCJjYXJyaWVyXCI7XG4gICAgICBvcHRpb24xLnRleHRDb250ZW50ID0gXCJDYXJyaWVyXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjEpO1xuXG4gICAgICBjb25zdCBvcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjIudmFsdWUgPSBcImJhdHRsZXNoaXAxXCI7XG4gICAgICBvcHRpb24yLnRleHRDb250ZW50ID0gXCJCYXR0bGVzaGlwIDFcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uMik7XG5cbiAgICAgIGNvbnN0IG9wdGlvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgb3B0aW9uMy52YWx1ZSA9IFwiYmF0dGxlc2hpcDJcIjtcbiAgICAgIG9wdGlvbjMudGV4dENvbnRlbnQgPSBcIkJhdHRsZXNoaXAgMlwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24zKTtcblxuICAgICAgY29uc3Qgb3B0aW9uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb240LnZhbHVlID0gXCJjcnVpc2VyMVwiO1xuICAgICAgb3B0aW9uNC50ZXh0Q29udGVudCA9IFwiQ3J1aXNlciAxXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjQpO1xuXG4gICAgICBjb25zdCBvcHRpb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjUudmFsdWUgPSBcImNydWlzZXIyXCI7XG4gICAgICBvcHRpb241LnRleHRDb250ZW50ID0gXCJDcnVpc2VyIDJcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uNSk7XG5cbiAgICAgIGNvbnN0IG9wdGlvbjYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgb3B0aW9uNi52YWx1ZSA9IFwiY3J1aXNlcjNcIjtcbiAgICAgIG9wdGlvbjYudGV4dENvbnRlbnQgPSBcIkNydWlzZXIgM1wiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb242KTtcblxuICAgICAgY29uc3Qgb3B0aW9uNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb243LnZhbHVlID0gXCJkZXN0cm95ZXIxXCI7XG4gICAgICBvcHRpb243LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgMVwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb243KTtcblxuICAgICAgY29uc3Qgb3B0aW9uOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb244LnZhbHVlID0gXCJkZXN0cm95ZXIyXCI7XG4gICAgICBvcHRpb244LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgMlwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb244KTtcblxuICAgICAgY29uc3Qgb3B0aW9uOSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb245LnZhbHVlID0gXCJkZXN0cm95ZXIzXCI7XG4gICAgICBvcHRpb245LnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgM1wiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb245KTtcblxuICAgICAgY29uc3Qgb3B0aW9uMTAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgb3B0aW9uMTAudmFsdWUgPSBcImRlc3Ryb3llcjRcIjtcbiAgICAgIG9wdGlvbjEwLnRleHRDb250ZW50ID0gXCJEZXN0cm95ZXIgNFwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24xMCk7XG5cbiAgICAgIC8vIGlucHV0cyB2YWxpZGF0aW9uXG4gICAgICBjb25zdCByZWdFeHAgPSAvXlxcZCskLztcbiAgICAgIGNvbnN0IHZhbGlkYXRlSW5wdXQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFgJHtldmVudC50YXJnZXQudmFsdWV9JHtldmVudC5rZXl9YC5tYXRjaChyZWdFeHApKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWVcblxuICAgICAgfVxuXG4gICAgICBpbnB1dDIuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMVwiKVxuICAgICAgaW5wdXQxLnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjFcIilcbiAgICAgIGlucHV0MS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHZhbGlkYXRlSW5wdXQpXG4gICAgICBpbnB1dDIuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB2YWxpZGF0ZUlucHV0KVxuXG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkJ1dHRvbldyYXBwZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCBidXR0b25XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGJ1dHRvbldyYXBwZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbi13cmFwcGVyXCIpO1xuXG4gICAgICBjb25zdCBncmlkc0NvbnRhaW5lciA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkcy1jb250YWluZXJcIilbMF07XG5cbiAgICAgIGlmIChncmlkc0NvbnRhaW5lcikgZ3JpZHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uV3JhcHBlcik7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlblJhbmRvbWl6ZUJ1dHRvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJhbmRvbUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICByYW5kb21CdXR0b24uY2xhc3NOYW1lID0gXCJyYW5kb20tYnV0dG9uXCI7XG4gICAgICByYW5kb21CdXR0b24udGV4dENvbnRlbnQgPSBcIlJhbmRvbWl6ZVwiO1xuICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJ1dHRvbi13cmFwcGVyXCIpWzBdO1xuICAgICAgaWYgKGJ1dHRvbkNvbnRhaW5lcikgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHJhbmRvbUJ1dHRvbik7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkN1c3RvbWl6ZUJ1dHRvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbWl6ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjdXN0b21pemVCdXR0b24uY2xhc3NOYW1lID0gXCJjdXN0b21pemUtYnV0dG9uXCI7XG4gICAgICBjdXN0b21pemVCdXR0b24udGV4dENvbnRlbnQgPSBcIkN1c3RvbWl6ZVwiO1xuICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJ1dHRvbi13cmFwcGVyXCIpWzBdO1xuICAgICAgaWYgKGJ1dHRvbkNvbnRhaW5lcikgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbWl6ZUJ1dHRvbik7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkJ1dHRvbnMgPSAoKSA9PiB7XG4gICAgICBnZW5CdXR0b25XcmFwcGVyKCk7XG4gICAgICBnZW5SYW5kb21pemVCdXR0b24oKTtcbiAgICAgIGdlblN0YXJ0QnV0dG9uKCk7XG4gICAgICBnZW5DdXN0b21pemVCdXR0b24oKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdlbkdyaWQsXG4gICAgICBkZWxldGVFbGVtZW50cyxcbiAgICAgIGdlbkJ1dHRvbnMsXG4gICAgICBnZW5Db29yZElucHV0cyxcbiAgICAgIGdlbkdyaWRPbmx5LFxuICAgICAgZGVsZXRlU2hvd25HcmlkLFxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTW9kYWwgPSAod2lubmVyLCBjcHVXaW4pID0+IHtcbiAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG5cbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaWFsb2dcIik7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsXCIpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuXG4gICAgY29uc3QgbW9kYWxUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChtb2RhbFRleHQpO1xuXG4gICAgaWYgKCFjcHVXaW4pIG1vZGFsVGV4dC50ZXh0Q29udGVudCA9IGBDb25ncmF0dWxhdGlvbnMgJHt3aW5uZXJ9LCB5b3Ugd29uIWA7XG4gICAgZWxzZSB7XG4gICAgICBtb2RhbFRleHQudGV4dENvbnRlbnQgPSBgJHt3aW5uZXJ9IHdvbiwgdHJ5IGFnYWluIWA7XG4gICAgfVxuXG4gICAgY29uc3QgcmVsb2FkR2FtZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVsb2FkR2FtZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiTmV3IEdhbWVcIjtcblxuICAgIGNvbnN0IHJlbG9hZFBhZ2UgPSAoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cbiAgICByZWxvYWRHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZWxvYWRQYWdlKTtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChyZWxvYWRHYW1lQnV0dG9uKTtcblxuICAgIGlmIChtb2RhbCkgbW9kYWwuc2hvd01vZGFsKCk7XG4gIH07XG5cbiAgY29uc3QgZW5kR2FtZSA9ICgpID0+IHtcbiAgICBjb25zdCBwbGF5ZXIxR3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkLTFcIilbMF07XG5cbiAgICBjb25zdCBwbGF5ZXIyR3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkLTJcIilbMF07XG5cbiAgICAvLyBjbG9uZWQgZWxlbWVudHMgZG8gbm90IGNhcnJ5IGV2ZW50IGxpc3RlbmVycy5cblxuICAgIGlmIChwbGF5ZXIxR3JpZCkgcGxheWVyMUdyaWQucmVwbGFjZVdpdGgocGxheWVyMUdyaWQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgIGlmIChwbGF5ZXIyR3JpZCkgcGxheWVyMkdyaWQucmVwbGFjZVdpdGgocGxheWVyMkdyaWQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfTtcblxuICBjb25zdCBmbGF0Q29vcmRzID0gKGVsZW1lbnRzKSA9PiB7XG4gICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICBjb25zdCBtdWx0aXBsZUNvb3JkU2hpcHMgPSBlbGVtZW50cy5maWx0ZXIoXG4gICAgICAgIChlbCkgPT4gdHlwZW9mIGVsWzBdID09PSBcIm9iamVjdFwiXG4gICAgICApO1xuXG4gICAgICBjb25zdCBvbmVDb29yZFNoaXBzID0gZWxlbWVudHMuZmlsdGVyKChlbCkgPT4gdHlwZW9mIGVsWzBdID09PSBcIm51bWJlclwiKTtcblxuICAgICAgY29uc3QgZmxhdHRlZENvb3JkcyA9IG11bHRpcGxlQ29vcmRTaGlwcy5mbGF0KCkuY29uY2F0KG9uZUNvb3JkU2hpcHMpO1xuXG4gICAgICByZXR1cm4gZmxhdHRlZENvb3JkcztcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3Vycm91bmRDb29yZHMgPSAobm9kZUNvb3JkKSA9PiB7XG4gICAgY29uc3QgZ2V0U3VycnVvbmRzID0gKG5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdXJyb3VuZHMgPSBbXG4gICAgICAgIC4uLnBsYXllckxvZ2ljLnJldHVybkNvcm5lcnMobm9kZSksXG4gICAgICAgIC4uLnBsYXllckxvZ2ljLnJldHVyblNpZGVzKG5vZGUpLFxuICAgICAgICBub2RlLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIHBsYXllckxvZ2ljLnZhbGlkYXRlQ29vcmRzKGN1cnJlbnRTdXJyb3VuZHMpO1xuICAgIH07XG5cbiAgICBjb25zdCBjb29yZHMgPSBbXTtcblxuICAgIGlmICh0eXBlb2Ygbm9kZUNvb3JkWzBdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAvLyBvbmUtY29vcmQgc2hpcFxuICAgICAgY29uc3Qgc3Vycm91bmQgPSBnZXRTdXJydW9uZHMobm9kZUNvb3JkKTtcbiAgICAgIGNvb3Jkcy5wdXNoKC4uLnN1cnJvdW5kKTtcblxuICAgICAgY29uc3Qgbm9SZXBlYXRTdHJpbmcgPSBuZXcgU2V0KGNvb3Jkcy5tYXAoKHgpID0+IEpTT04uc3RyaW5naWZ5KHgpKSk7XG5cbiAgICAgIGNvbnN0IG5vUmVwZWF0Q29vcmRzID0gWy4uLm5vUmVwZWF0U3RyaW5nXS5tYXAoKHgpID0+IEpTT04ucGFyc2UoeCkpO1xuICAgICAgcmV0dXJuIG5vUmVwZWF0Q29vcmRzO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUNvb3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Q29vcmQgPSBub2RlQ29vcmRbaV07XG4gICAgICBjb25zdCBzdXJyb3VuZCA9IGdldFN1cnJ1b25kcyhjdXJyZW50Q29vcmQpO1xuXG4gICAgICBjb29yZHMucHVzaCguLi5zdXJyb3VuZCk7XG4gICAgfVxuICAgIGNvbnN0IG5vUmVwZWF0U3RyaW5nID0gbmV3IFNldChjb29yZHMubWFwKCh4KSA9PiBKU09OLnN0cmluZ2lmeSh4KSkpO1xuXG4gICAgY29uc3Qgbm9SZXBlYXRDb29yZHMgPSBbLi4ubm9SZXBlYXRTdHJpbmddLm1hcCgoeCkgPT4gSlNPTi5wYXJzZSh4KSk7XG5cbiAgICByZXR1cm4gbm9SZXBlYXRDb29yZHM7XG4gIH07XG5cbiAgY29uc3QgZ2VuQ29vcmRzID0gKCkgPT4ge1xuICAgIGNvbnN0IHJhbmRvbUludCA9IChtYXgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG5cbiAgICBjb25zdCByYW5kb21PcmllbnRhdGlvbiA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG51bWJlciA9IHJhbmRvbUludCgyKTtcblxuICAgICAgaWYgKG51bWJlciA9PT0gMCkgcmV0dXJuIFwiaFwiO1xuICAgICAgcmV0dXJuIFwidlwiO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5SYW5kb21Db29yZHMgPSAob3JpZW50YXRpb24sIHNpemUsIHByZXZpb3VzQ29vcmRzKSA9PiB7XG4gICAgICBpZiAocHJldmlvdXNDb29yZHMpIHtcbiAgICAgICAgY29uc3QgdmVydGljYWxDb29yZHMgPSBbcHJldmlvdXNDb29yZHNbMF0gKyAxLCBwcmV2aW91c0Nvb3Jkc1sxXV07XG4gICAgICAgIGNvbnN0IGhvcml6b250YWxDb29yZHMgPSBbcHJldmlvdXNDb29yZHNbMF0sIHByZXZpb3VzQ29vcmRzWzFdICsgMV07XG5cbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSBcInZcIikgcmV0dXJuIHZlcnRpY2FsQ29vcmRzO1xuXG4gICAgICAgIHJldHVybiBob3Jpem9udGFsQ29vcmRzO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmFuZG9tQ29vcmRzO1xuXG4gICAgICAvLyBzdWJzdHJhY3QgdGhlIHNpemUgZGVwZW5kaW5nIG9uIHRoZSBvcmllbnRhdGlvbiwgaW4gb3JkZXIgdG8gaGF2ZSBzcGFjZSBmb3IgdGhlIG5leHQgY29vcmRzIG9mIHRoZSBzaGlwLlxuICAgICAgaWYgKG9yaWVudGF0aW9uID09PSBcInZcIilcbiAgICAgICAgcmFuZG9tQ29vcmRzID0gW3JhbmRvbUludCgxMCAtIHNpemUpLCByYW5kb21JbnQoMTApXTtcbiAgICAgIGVsc2Uge1xuICAgICAgICByYW5kb21Db29yZHMgPSBbcmFuZG9tSW50KDEwKSwgcmFuZG9tSW50KDEwIC0gc2l6ZSldO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2l6ZSA9PT0gMSkgcmFuZG9tQ29vcmRzID0gW3JhbmRvbUludCgxMCksIHJhbmRvbUludCgxMCldO1xuXG4gICAgICByZXR1cm4gcmFuZG9tQ29vcmRzO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5TaGlwQ29vcmQgPSAoc2l6ZSwgdXNlZENvb3JkcykgPT4ge1xuICAgICAgY29uc3Qgc2hpcENvb3JkcyA9IFtdO1xuXG4gICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHJhbmRvbU9yaWVudGF0aW9uKCk7XG5cbiAgICAgIGNvbnN0IGludmFsaWRDb29yZHMgPSBmbGF0Q29vcmRzKHVzZWRDb29yZHMpO1xuXG4gICAgICBjb25zdCBnZW5Jbml0aWFsQ29vcmRzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjb29yZHMgPSBnZW5SYW5kb21Db29yZHMob3JpZW50YXRpb24sIHNpemUpO1xuXG4gICAgICAgIGlmICghZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGludmFsaWRDb29yZHMsIGNvb3JkcykpIHtcbiAgICAgICAgICAvLyB2YWxpZGF0ZSB0aGF0IHRoZSBpbml0aWFsIGNvb3JkIGlzIGluIGEgdmFsaWQgcG9zaXRpb25cbiAgICAgICAgICBzaGlwQ29vcmRzLnB1c2goY29vcmRzKTtcbiAgICAgICAgfSBlbHNlIGdlbkluaXRpYWxDb29yZHMoKTsgLy8gaWYgdGhlIGdlbmVyYXRlZCBjb29yZHMgYXJlIGFscmVhZHkgdXNlZCwgZ2VuZXJhdGUgbmV3IGNvb3Jkcy5cbiAgICAgIH07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQ29vcmRzID0gc2hpcENvb3Jkc1tzaGlwQ29vcmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBjb29yZHMgPSBnZW5SYW5kb21Db29yZHMob3JpZW50YXRpb24sIHNpemUsIHByZXZpb3VzQ29vcmRzKTtcblxuICAgICAgICBpZiAocHJldmlvdXNDb29yZHMpIHtcbiAgICAgICAgICBzaGlwQ29vcmRzLnB1c2goY29vcmRzKTtcbiAgICAgICAgfSBlbHNlIGdlbkluaXRpYWxDb29yZHMoKTtcbiAgICAgIH1cblxuICAgICAgLy8gbXVsdGlwbGUgY29vcmRpbmF0ZSBzaGlwXG4gICAgICBpZiAoc2hpcENvb3Jkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzaGlwQ29vcmRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzaGlwQ29vcmRzW2luZGV4XTtcbiAgICAgICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGludmFsaWRDb29yZHMsIGVsZW1lbnQpKVxuICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlOyAvLyBpZiBvbmUgZWxlbWVudCBvZiB0aGUgc2hpcCBoYXMgYSBpbnZhbGlkIHBvc2l0aW9uLCBpc1ZhbGlkIGlzIGZhbHNlLlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgPT09IGZhbHNlKSByZXR1cm4gZ2VuU2hpcENvb3JkKHNpemUsIGludmFsaWRDb29yZHMpOyAvLyBhbmQgd2hlbiBpc1ZhbGlkIGlzIGZhbHNlLCB3ZSByZWN1cnNpdmVseSBjaGFuZ2UgdGhlIHNoaXAgcG9zaXRpb24sIHVudGlsIGl0IGlzIHZhbGlkLlxuXG4gICAgICAgIHJldHVybiBzaGlwQ29vcmRzO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmUgY29vcmRpbmF0ZSBzaGlwLlxuICAgICAgcmV0dXJuIHNoaXBDb29yZHNbMF07XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkJhdHRsZXNoaXBzID0gKCkgPT4ge1xuICAgICAgY29uc3QgdXNlZENvb3JkcyA9IFtdO1xuXG4gICAgICBjb25zdCBjYXJyaWVyID0gZ2VuU2hpcENvb3JkKDQsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGNhcnJpZXIpKTtcblxuICAgICAgY29uc3QgYmF0dGxlU2hpcCA9IGdlblNoaXBDb29yZCgzLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhiYXR0bGVTaGlwKSk7XG5cbiAgICAgIGNvbnN0IGJhdHRsZVNoaXAxID0gZ2VuU2hpcENvb3JkKDMsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGJhdHRsZVNoaXAxKSk7XG5cbiAgICAgIGNvbnN0IGNydWlzZXIgPSBnZW5TaGlwQ29vcmQoMiwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoY3J1aXNlcikpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMSA9IGdlblNoaXBDb29yZCgyLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhjcnVpc2VyMSkpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMiA9IGdlblNoaXBDb29yZCgyLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhjcnVpc2VyMikpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIgPSBnZW5TaGlwQ29vcmQoMSwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoZGVzdHJveWVyKSk7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjEgPSBnZW5TaGlwQ29vcmQoMSwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoZGVzdHJveWVyMSkpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIyID0gZ2VuU2hpcENvb3JkKDEsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGRlc3Ryb3llcjIpKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMyA9IGdlblNoaXBDb29yZCgxLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhkZXN0cm95ZXIzKSk7XG5cbiAgICAgIGNvbnN0IGNvb3JkcyA9IFtcbiAgICAgICAgY2FycmllcixcbiAgICAgICAgYmF0dGxlU2hpcCxcbiAgICAgICAgYmF0dGxlU2hpcDEsXG4gICAgICAgIGNydWlzZXIsXG4gICAgICAgIGNydWlzZXIxLFxuICAgICAgICBjcnVpc2VyMixcbiAgICAgICAgZGVzdHJveWVyLFxuICAgICAgICBkZXN0cm95ZXIxLFxuICAgICAgICBkZXN0cm95ZXIyLFxuICAgICAgICBkZXN0cm95ZXIzLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIHsgY29vcmRzLCB1c2VkQ29vcmRzIH07XG4gICAgfTtcblxuICAgIHJldHVybiB7IGdlbkJhdHRsZXNoaXBzLCBnZW5TaGlwQ29vcmQsIHN1cnJvdW5kQ29vcmRzIH07XG4gIH07XG5cbiAgY29uc3Qgcm90YXRlQ29vcmRzID0gKHNoaXAsIHN3YXBPcmllbnRhdGlvbikgPT4ge1xuICAgIGNvbnN0IGNoZWNrT3JpZW50YXRpb24gPSAoKSA9PiB7XG4gICAgICBpZiAoc3dhcE9yaWVudGF0aW9uKSB7XG4gICAgICAgIGlmIChzaGlwLmNvb3Jkc1swXVswXSArIDEgPT09IHNoaXAuY29vcmRzWzFdWzBdKSByZXR1cm4gXCJoXCI7XG4gICAgICAgIHJldHVybiBcInZcIjtcbiAgICAgIH1cbiAgICAgIGlmIChzaGlwLmNvb3Jkc1swXVswXSArIDEgPT09IHNoaXAuY29vcmRzWzFdWzBdKSByZXR1cm4gXCJ2XCI7XG4gICAgICByZXR1cm4gXCJoXCI7XG4gICAgfTtcblxuICAgIGxldCBuZXdBcnJheSA9IFtzaGlwLmZpcnN0Q29vcmRdO1xuXG4gICAgbGV0IHlQb3M7XG4gICAgbGV0IHhQb3M7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuY29vcmRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgaWYgKGNoZWNrT3JpZW50YXRpb24oKSA9PT0gXCJ2XCIpIHtcbiAgICAgICAgeVBvcyA9IG5ld0FycmF5W2ldWzBdO1xuICAgICAgICB4UG9zID0gbmV3QXJyYXlbaV1bMV0gKyAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeVBvcyA9IG5ld0FycmF5W2ldWzBdICsgMTtcbiAgICAgICAgeFBvcyA9IG5ld0FycmF5W2ldWzFdO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3Q29vcmQgPSBbeVBvcywgeFBvc107XG5cbiAgICAgIG5ld0FycmF5ID0gbmV3QXJyYXkuY29uY2F0KFtuZXdDb29yZF0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3QXJyYXk7XG4gIH07XG5cbiAgY29uc3QgcmVwbGFjZUNvb3JkcyA9IChzaGlwSW5mbywgY29vcmRzKSA9PiB7XG4gICAgY29uc3QgY29vcmRzQ29weSA9IFsuLi5jb29yZHNdO1xuXG4gICAgY29vcmRzQ29weS5zcGxpY2Uoc2hpcEluZm8uY29vcmRzUG9zaXRpb24sIDEsIHNoaXBJbmZvLmNvb3Jkcyk7IC8vIHJlcGxhY2UgdGhlIG9sZCBjb29yZHMgZm9yIHRoZSByb3RhdGVkIGNvb3Jkcy5cblxuICAgIHJldHVybiBjb29yZHNDb3B5O1xuICB9O1xuXG4gIGNvbnN0IHRyaWdnZXJJbnZhbGlkUlQgPSAoY29vcmRzKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNsYXNzQ29vcmQgPSBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY29vcmRzW2ldKTtcbiAgICAgIGNvbnN0IGNvb3JkRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NDb29yZClbMF07XG4gICAgICBjb29yZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImludmFsaWQtcm90YXRpb25cIik7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBrbm93IGV4YWN0bHkgd2hlbiB0aGUgYW5pbWF0aW9uIHdpbGwgZW5kLCB3ZSBjYW4gc2V0IGEgdGltZW91dC5cbiAgICAgICAgY29vcmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJpbnZhbGlkLXJvdGF0aW9uXCIpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHZhbGlkYXRlUm90YXRpb24gPSAoc2hpcEluZm8sIHVzZWRDb29yZHMpID0+IHtcbiAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG5cbiAgICBjb25zdCBvY2N1cGllZENvb3JkcyA9IHNoaXBJbmZvLmNvb3JkcztcblxuICAgIGNvbnN0IHsgY29vcmRzUG9zaXRpb24gfSA9IHNoaXBJbmZvO1xuXG4gICAgY29uc3QgdXNlZENvb3Jkc0NvcHkgPSBbLi4udXNlZENvb3Jkc107XG5cbiAgICB1c2VkQ29vcmRzQ29weVtjb29yZHNQb3NpdGlvbl0gPSBbXTsgLy8gd2UgY2xlYXIgdGhlIHVzZWRDb29yZHMgb2YgdGhlIGN1cnJlbnQgc2hpcCwgc28gd2UgY2FuIHZhbGlkYXRlIHdpdGhvdXQgdGhlbSBpbiB0aGUgbG9vcC5cblxuICAgIGNvbnN0IGZsYXRVc2VkQ29vcmRzID0gZmxhdENvb3Jkcyh1c2VkQ29vcmRzQ29weSk7XG5cbiAgICBpZiAoXG4gICAgICBwbGF5ZXJMb2dpYy52YWxpZGF0ZUNvb3JkcyhvY2N1cGllZENvb3JkcykubGVuZ3RoICE9PVxuICAgICAgb2NjdXBpZWRDb29yZHMubGVuZ3RoXG4gICAgKVxuICAgICAgcmV0dXJuIHVzZWRDb29yZHM7IC8vIGNoZWNrIGlmIHRoZXNlIGNvb3JkcyBhcmVuJ3Qgb3V0IG9mIHRoZSBncmlkLlxuXG4gICAgaWYgKHR5cGVvZiBvY2N1cGllZENvb3Jkc1swXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShmbGF0VXNlZENvb3Jkcywgb2NjdXBpZWRDb29yZHMpKVxuICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgfSBlbHNlXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9jY3VwaWVkQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoZmxhdFVzZWRDb29yZHMsIG9jY3VwaWVkQ29vcmRzW2ldKSkge1xuICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgY29uc3QgY29vcmRzU3Vycm91bmQgPSBzdXJyb3VuZENvb3JkcyhvY2N1cGllZENvb3Jkcyk7XG5cbiAgICBpZiAoaXNWYWxpZCA9PT0gdHJ1ZSkge1xuICAgICAgdXNlZENvb3Jkc0NvcHlbY29vcmRzUG9zaXRpb25dID0gY29vcmRzU3Vycm91bmQ7XG4gICAgICByZXR1cm4gdXNlZENvb3Jkc0NvcHk7XG4gICAgfVxuICAgIHJldHVybiB1c2VkQ29vcmRzO1xuICB9O1xuXG4gIGNvbnN0IGdldFNoaXBDb29yZHMgPSAoY29vcmQsIHNoaXBzQ29vcmRzKSA9PiB7XG4gICAgLy8gdGhpcyBmdW5jdGlvbiBzZWFyY2hlcyBmb3IgdGhlIGFyZ3VtZW50IGNvb3JkaW5hdGUgaW5zaWRlIG9mIHRoZSBmdWxsIGNvb3JkcyBhcnJheSwgYWxsIG9mIHRoaXMsIGluIG9yZGVyIHRvIHJldHVybiB0aGUgZnVsbCBjb29yZHMgb2YgdGhlIGNsaWNrZWQgY29vcmQuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwc0Nvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY29vcmRzQXJyID0gc2hpcHNDb29yZHNbaV07XG4gICAgICBjb25zdCBjb29yZHNJbmZvID0gW2Nvb3Jkc0FyciwgaV07XG4gICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGNvb3Jkc0FyciwgY29vcmQpKSByZXR1cm4gY29vcmRzSW5mbztcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgcm90YXRlU2hpcHMgPSAoY29vcmRzLCB1c2VkQ29vcmRzLCBpbmRleCwgcmVzdGFydEdyaWQsIGN1cnJlbnRET00pID0+IHtcbiAgICBjb25zdCBjbGVhbkNvb3JkcyA9IGNvb3Jkcy5maWx0ZXIoKGVsKSA9PiB0eXBlb2YgZWxbMF0gPT09IFwib2JqZWN0XCIpOyAvLyB3ZSBmaWx0ZXIgdGhlIG9uZS1jb29yZGluYXRlIHNoaXBzLCBiZWNhdXNlIHRoZXkgZG9uJ3QgbmVlZCByb3RhdGlvblxuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gZmxhdENvb3JkcyhjbGVhbkNvb3Jkcyk7XG5cbiAgICBjb25zdCByb3RhdGUgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgY2xpY2tlZENvb3JkID0gZS50YXJnZXQuY2xhc3NOYW1lO1xuXG4gICAgICBjb25zdCBmdWxsQXJyYXkgPSBnZXRTaGlwQ29vcmRzKFxuICAgICAgICBnbG9iYWxMb2dpYy5jbGFzc1RvQXJyYXkoY2xpY2tlZENvb3JkKSxcbiAgICAgICAgY2xlYW5Db29yZHNcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHNoaXBJbmZvID0ge1xuICAgICAgICBjb29yZHM6IGZ1bGxBcnJheVswXSxcbiAgICAgICAgZmlyc3RDb29yZDogZnVsbEFycmF5WzBdWzBdLFxuICAgICAgICBjb29yZHNQb3NpdGlvbjogZnVsbEFycmF5WzFdLFxuICAgICAgfTtcblxuICAgICAgc2hpcEluZm8uY29vcmRzID0gcm90YXRlQ29vcmRzKHNoaXBJbmZvKTtcblxuICAgICAgaWYgKHZhbGlkYXRlUm90YXRpb24oc2hpcEluZm8sIHVzZWRDb29yZHMpICE9PSB1c2VkQ29vcmRzKSB7XG4gICAgICAgIC8vIHRoaXMgbWVhbnMgdGhhdCB0aGUgdXNlZCBjb29yZHMgd2VyZSBjaGFuZ2VkLCBzbyBpdCB3YXMgYSB2YWxpZCByb3RhdGlvbi5cblxuICAgICAgICBjb25zdCBjdXN0b21pemVTZWN0aW9uID1cbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaW5wdXRzLWNvbnRhaW5lclwiKVswXTsgLy8gaWYgY3VzdG9taXplIHNlY3Rpb24gaXMgdHJ1ZSwgc2VuZCBpdCB0byByZXN0YXJ0R3JpZCB0byBrZWVwIGl0IG9wZW4uXG4gICAgICAgIGN1cnJlbnRET00uZGVsZXRlRWxlbWVudHMoMCk7IC8vIGRlbGV0ZSBvbGQgZ3JpZFxuXG4gICAgICAgIHJldHVybiByZXN0YXJ0R3JpZChcbiAgICAgICAgICByZXBsYWNlQ29vcmRzKHNoaXBJbmZvLCBjb29yZHMpLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlUm90YXRpb24oc2hpcEluZm8sIHVzZWRDb29yZHMpLFxuICAgICAgICAgIGN1c3RvbWl6ZVNlY3Rpb25cbiAgICAgICAgKTsgLy8gZ2VuIG5ldyBncmlkIHdpdGggdGhlIHJvdGF0ZWQgY29vcmQuXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJpZ2dlckludmFsaWRSVChmdWxsQXJyYXlbMF0pO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBzZWxlY3QgZXZlcnkgc2hpcC1vY2N1cGllZCBjb29yZFxuICAgICAgY29uc3QgZWxlbWVudENsYXNzID0gZ2xvYmFsTG9naWMuY29vcmRUb0NsYXNzKGNvb3JkaW5hdGVzW2ldKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGVsZW1lbnRDbGFzcylbaW5kZXhdO1xuICAgICAgaWYgKGVsZW1lbnQpIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJvdGF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qXG4gIGNvbnN0IGRyYWdBbmREcm9wID0gKGVsZW1lbnRzKSA9PiB7XG4gICAgY29uc3QgY29vcmRMaXN0ID0gZmxhdENvb3JkcyhlbGVtZW50cyk7XG5cbiAgICBjb25zdCBkcmFnU3RhcnQgPSAoZSkgPT4ge307XG5cbiAgICBjb25zdCBkcmFnRHJvcCA9IChlKSA9PiB7fTtcblxuICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gZWFjaCBlbGVtZW50LlxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnROYW1lID0gZ2xvYmFsTG9naWMuY29vcmRUb0NsYXNzKGNvb3JkTGlzdFtpXSk7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlbGVtZW50TmFtZSlbMF07XG5cbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIGRyYWdTdGFydCk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgZHJhZ0Ryb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgKi9cblxuICBjb25zdCByYW5kb21pemVHcmlkID0gKGluZGV4LCBnZW5Jbml0aWFsRWxlbWVudHMsIGN1cnJlbnRET00pID0+IHtcbiAgICBjdXJyZW50RE9NLmRlbGV0ZUVsZW1lbnRzKGluZGV4KTtcbiAgICBjb25zdCBnZW5SYW5kb21Db29yZHMgPSBET01Mb2dpYy5nZW5Db29yZHMoKS5nZW5CYXR0bGVzaGlwcygpO1xuICAgIGNvbnN0IG5ld1JhbmRvbUNvb3JkcyA9IGdlblJhbmRvbUNvb3Jkcy5jb29yZHM7XG4gICAgY29uc3QgbmV3VXNlZENvb3JkcyA9IGdlblJhbmRvbUNvb3Jkcy51c2VkQ29vcmRzO1xuICAgIGdlbkluaXRpYWxFbGVtZW50cyhuZXdSYW5kb21Db29yZHMsIGZhbHNlLCBuZXdVc2VkQ29vcmRzKTtcbiAgfTtcblxuICBjb25zdCBjaGFuZ2VTaGlwQ29sb3IgPSAoY3VycmVudFNoaXAsIGNvbG9yKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRDb29yZDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodHlwZW9mIGN1cnJlbnRTaGlwW2ldID09PSBcIm51bWJlclwiKVxuICAgICAgICAvLyBvbmUtY29vcmRpbmF0ZSBzaGlwLlxuICAgICAgICBjdXJyZW50Q29vcmQgPSBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY3VycmVudFNoaXApO1xuICAgICAgZWxzZSBjdXJyZW50Q29vcmQgPSBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY3VycmVudFNoaXBbaV0pO1xuXG4gICAgICBjb25zdCBjdXJyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY3VycmVudENvb3JkKVswXTtcbiAgICAgIGN1cnJlbnRFbGVtZW50LnN0eWxlLmJvcmRlckNvbG9yID0gY29sb3I7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNoYW5nZUV2ZXJ5U2hpcENvbG9yID0gKHNoaXBzQ29vcmRzLCBjb2xvcikgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRTaGlwcyA9IHNoaXBzQ29vcmRzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJyZW50U2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTaGlwID0gY3VycmVudFNoaXBzW2ldO1xuICAgICAgY2hhbmdlU2hpcENvbG9yKGN1cnJlbnRTaGlwLCBjb2xvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldFNlbGVjdFNoaXBJbmRleCA9ICgpID0+XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1zaGlwc1wiKVswXS5zZWxlY3RlZEluZGV4O1xuXG4gIGNvbnN0IGhpZ2hsaWdodEN1cnJlbnRTaGlwID0gKHNoaXBJbmRleCwgc2hpcHNDb29yZHMpID0+IHtcbiAgICBjb25zdCBjdXJyZW50U2hpcCA9IHNoaXBzQ29vcmRzW3NoaXBJbmRleF07XG5cbiAgICBjaGFuZ2VFdmVyeVNoaXBDb2xvcihzaGlwc0Nvb3JkcywgXCJncmVlblwiKTsgLy8gcmVzdGFydCBwcmV2aW91c2x5IGhpZ2hsaWdodGVkIHNoaXBzLlxuICAgIGNoYW5nZVNoaXBDb2xvcihjdXJyZW50U2hpcCwgXCJyZ2IoMzcsIDIxNCwgMTk5KVwiKTtcblxuICAgIHJldHVybiBjdXJyZW50U2hpcDtcbiAgfTtcblxuICBjb25zdCB0cmlnZ2VyQ3VycmVudENvb3JkID0gKHhQb3MsIHlQb3MsIGNvb3JkcywgY3VycmVudERPTSkgPT4ge1xuICAgIGNvbnN0IGNvb3JkQ2xhc3MgPSBbTnVtYmVyKHhQb3MpLCBOdW1iZXIoeVBvcyldO1xuICAgIGNvbnN0IGdyaWRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JpZC13cmFwcGVyXCIpWzBdO1xuXG4gICAgLy8gcmVzdGFydCBwcmV2aW91cyB0cmlnZ2VyZWQgY29vcmRzLCBieSByZXN0YXJ0aW5nIHRoZSBncmlkLlxuICAgIGN1cnJlbnRET00uZGVsZXRlU2hvd25HcmlkKDApO1xuICAgIGN1cnJlbnRET00uZ2VuR3JpZE9ubHkoMSwgZ3JpZENvbnRhaW5lciwgY29vcmRzKTtcbiAgICBoaWdobGlnaHRDdXJyZW50U2hpcChnZXRTZWxlY3RTaGlwSW5kZXgoKSwgY29vcmRzKTtcblxuICAgIGNoYW5nZVNoaXBDb2xvcihjb29yZENsYXNzLCBcInJnYigyMTYsIDY1LCA1KVwiKTtcblxuICAgIHJldHVybiBjb29yZENsYXNzO1xuICB9O1xuXG4gIGNvbnN0IGNoYW5nZUluaXRpYWxDb29yZCA9IChcbiAgICBzaGlwSW5kZXgsXG4gICAgY29vcmQsXG4gICAgc2hpcHNDb29yZHMsXG4gICAgdXNlZENvb3JkcyxcbiAgICByZXN0YXJ0R3JpZCxcbiAgICBjdXJyZW50RE9NXG4gICkgPT4ge1xuICAgIGNvbnN0IHNoaXBJbmZvID0ge1xuICAgICAgY29vcmRzOiBzaGlwc0Nvb3Jkc1tzaGlwSW5kZXhdLFxuICAgICAgZmlyc3RDb29yZDogY29vcmQsXG4gICAgICBjb29yZHNQb3NpdGlvbjogc2hpcEluZGV4LFxuICAgIH07XG5cbiAgICBjb25zdCBnZW5lcmF0ZUNvb3JkcyA9IHJvdGF0ZUNvb3JkcyhzaGlwSW5mbywgdHJ1ZSk7IC8vIGdlbmVyYXRlIHRoZSBjb29yZHMsIHdpdGggdGhlIHNhbWUgb3JpZW50YXRpb24sIGRpZmZlcmVudCBpbml0aWFsQ29vcmQuXG5cbiAgICAvLyB1cGRhdGUgc2hpcEluZm8gd2l0aCB0aGUgbmV3IHNoaXAgY29vcmRzLlxuXG4gICAgY29uc3QgdXBkYXRlZFNoaXBJbmZvID0ge1xuICAgICAgY29vcmRzOiBnZW5lcmF0ZUNvb3JkcyxcbiAgICAgIGZpcnN0Q29vcmQ6IGdlbmVyYXRlQ29vcmRzWzBdLFxuICAgICAgY29vcmRzUG9zaXRpb246IHNoaXBJbmRleCxcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlR3JpZCA9IChzaGlwT2JqLCB1c2VkQ29vcmRzQXJyLCBjb29yZHNBcnIsIHVzZWRET00pID0+IHtcbiAgICAgIGlmICh2YWxpZGF0ZVJvdGF0aW9uKHNoaXBPYmosIHVzZWRDb29yZHNBcnIpICE9PSB1c2VkQ29vcmRzQXJyKSB7XG4gICAgICAgIHVzZWRET00uZGVsZXRlRWxlbWVudHMoMCk7IC8vIGRlbGV0ZSBvbGQgZ3JpZFxuICAgICAgICByZXR1cm4gcmVzdGFydEdyaWQoXG4gICAgICAgICAgLy8gZ2VuIG5ldyBncmlkIHdpdGggdGhlIGNoYW5nZWQgY29vcmQuXG4gICAgICAgICAgcmVwbGFjZUNvb3JkcyhzaGlwT2JqLCBjb29yZHNBcnIpLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRlUm90YXRpb24oc2hpcE9iaiwgdXNlZENvb3Jkc0FyciksXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHNoaXBzQ29vcmRzW3NoaXBJbmRleF1bMF0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIC8vIHdoZW4gaXQgaXMgYSBvbmUtY29vcmRpbmF0ZSBzaGlwLlxuICAgICAgc2hpcEluZm8uY29vcmRzID0gc2hpcEluZm8uZmlyc3RDb29yZDsgLy8gY2hhbmdlIHRoZSBjb29yZCB0byBiZSBlcXVhbCB0byB0aGUgd2FudGVkIGNvb3JkLlxuICAgICAgdXBkYXRlR3JpZChzaGlwSW5mbywgdXNlZENvb3Jkcywgc2hpcHNDb29yZHMsIGN1cnJlbnRET00pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVHcmlkKHVwZGF0ZWRTaGlwSW5mbywgdXNlZENvb3Jkcywgc2hpcHNDb29yZHMsIGN1cnJlbnRET00pO1xuICAgIH1cbiAgICByZXR1cm4geyB1cGRhdGVHcmlkIH07XG4gIH07XG5cbiAgY29uc3QgY3VzdG9taXplU2V0dXAgPSAoXG4gICAgY29vcmRzLFxuICAgIHVzZWRDb29yZHMsXG4gICAgZ2VuSW5pdGlhbEVsZW1lbnRzLFxuICAgIGN1cnJlbnRET01cbiAgKSA9PiB7XG4gICAgY29uc3QgY2hhbmdlQ29vcmRCdXR0b24gPVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFwcGx5LWNvb3Jkc1wiKVswXTtcbiAgICBpZiAoY2hhbmdlQ29vcmRCdXR0b24pXG4gICAgICBjaGFuZ2VDb29yZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbml0aWFsQ29vcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29vcmRzLWlucHV0XCIpO1xuICAgICAgICBjb25zdCBmdWxsQ29vcmQgPSBbXG4gICAgICAgICAgTnVtYmVyKGluaXRpYWxDb29yZFswXS52YWx1ZSksXG4gICAgICAgICAgTnVtYmVyKGluaXRpYWxDb29yZFsxXS52YWx1ZSksXG4gICAgICAgIF07XG4gICAgICAgIGNoYW5nZUluaXRpYWxDb29yZChcbiAgICAgICAgICBnZXRTZWxlY3RTaGlwSW5kZXgoKSxcbiAgICAgICAgICBmdWxsQ29vcmQsXG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIHVzZWRDb29yZHMsXG4gICAgICAgICAgZ2VuSW5pdGlhbEVsZW1lbnRzLFxuICAgICAgICAgIGN1cnJlbnRET01cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3Qgc2VsZWN0U2hpcHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LXNoaXBzXCIpWzBdO1xuICAgIGNoYW5nZVNoaXBDb2xvcihjb29yZHNbMF0sIFwicmdiKDM3LCAyMTQsIDE5OSlcIik7IC8vIGhpZ2hsaWdodCBkZWZhdWx0IHNlbGVjdGVkIHNoaXAuXG4gICAgaWYgKHNlbGVjdFNoaXBzKVxuICAgICAgc2VsZWN0U2hpcHMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFNoaXBJbmRleCA9XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdC1zaGlwc1wiKVswXS5zZWxlY3RlZEluZGV4O1xuICAgICAgICBoaWdobGlnaHRDdXJyZW50U2hpcChjdXJyZW50U2hpcEluZGV4LCBjb29yZHMpO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBjb29yZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvb3Jkcy1pbnB1dFwiKVswXTtcbiAgICBjb25zdCBjb29yZElucHV0MSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb29yZHMtaW5wdXRcIilbMV07XG5cbiAgICBjb29yZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBpZiAoY29vcmRJbnB1dC52YWx1ZSAmJiBjb29yZElucHV0MS52YWx1ZSlcbiAgICAgICAgdHJpZ2dlckN1cnJlbnRDb29yZChcbiAgICAgICAgICBjb29yZElucHV0LnZhbHVlLFxuICAgICAgICAgIGNvb3JkSW5wdXQxLnZhbHVlLFxuICAgICAgICAgIGNvb3JkcyxcbiAgICAgICAgICBjdXJyZW50RE9NXG4gICAgICAgICk7XG4gICAgfSk7XG4gICAgY29vcmRJbnB1dDEuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGlmIChjb29yZElucHV0LnZhbHVlICYmIGNvb3JkSW5wdXQxLnZhbHVlKVxuICAgICAgICB0cmlnZ2VyQ3VycmVudENvb3JkKFxuICAgICAgICAgIGNvb3JkSW5wdXQudmFsdWUsXG4gICAgICAgICAgY29vcmRJbnB1dDEudmFsdWUsXG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIGN1cnJlbnRET01cbiAgICAgICAgKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBzZXR1cEV2ZW50TGlzdGVuZXJzID0gKFxuICAgIGNvb3JkcyxcbiAgICBzYW1lQ29vcmRzLFxuICAgIHVzZWRDb29yZHMsXG4gICAgY3VycmVudERPTSxcbiAgICBjdXN0b21pemVPcGVuLFxuICAgIGdlbkluaXRpYWxFbGVtZW50cyxcbiAgICBnYW1lTW9kZVxuICApID0+IHtcbiAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzdGFydC1idXR0b25cIilbMF07XG4gICAgY29uc3QgcmFuZG9taXplQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJhbmRvbS1idXR0b25cIilbMF07XG4gICAgY29uc3QgY3VzdG9taXplQnV0dG9uID1cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjdXN0b21pemUtYnV0dG9uXCIpWzBdO1xuXG4gICAgaWYgKHJhbmRvbWl6ZUJ1dHRvbilcbiAgICAgIHJhbmRvbWl6ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICByYW5kb21pemVHcmlkKDAsIGdlbkluaXRpYWxFbGVtZW50cywgY3VycmVudERPTSk7XG4gICAgICB9KTtcblxuICAgIGlmIChjdXN0b21pemVCdXR0b24pIHtcbiAgICAgIGN1c3RvbWl6ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBjdXJyZW50RE9NLmdlbkNvb3JkSW5wdXRzKCk7XG4gICAgICAgICAgY3VzdG9taXplU2V0dXAoY29vcmRzLCB1c2VkQ29vcmRzLCBnZW5Jbml0aWFsRWxlbWVudHMsIGN1cnJlbnRET00pO1xuICAgICAgICB9LFxuICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgKTtcbiAgICAgIGlmIChjdXN0b21pemVPcGVuKSBjdXN0b21pemVCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhcnRCdXR0b24pXG4gICAgICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBnYW1lTW9kZShjb29yZHMsIHNhbWVDb29yZHMsIGN1cnJlbnRET00pO1xuICAgICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydEdhbWUsXG4gICAgZGlzcGxheUdyaWQsXG4gICAgZ2VuRE9NRWxlbWVudHMsXG4gICAgZW5kR2FtZSxcbiAgICBjcmVhdGVNb2RhbCxcbiAgICBnZW5Db29yZHMsXG4gICAgcm90YXRlU2hpcHMsXG4gICAgcm90YXRlQ29vcmRzLFxuICAgIGNoYW5nZUluaXRpYWxDb29yZCxcbiAgICBzZXR1cEV2ZW50TGlzdGVuZXJzLFxuICB9O1xufSkoKTtcblxuY29uc3QgR2FtZUxvb3AgPSAoKCkgPT4ge1xuICBjb25zdCBnYW1lVHVybnMgPSAocGxheWVyMSwgcGxheWVyMikgPT4ge1xuICAgIGNvbnN0IHBsYXllcjFTaGlwcyA9IHBsYXllcjEucGxheWVyU2hpcHM7XG5cbiAgICBjb25zdCBwbGF5ZXIyU2hpcHMgPSBwbGF5ZXIyLmNwdVNoaXBzO1xuXG4gICAgY29uc3QgdHVybnNMb2dpYyA9ICgpID0+IHtcbiAgICAgIGxldCBpc0dhbWVPdmVyID0gZmFsc2U7XG4gICAgICBjb25zdCBjcHVBdHRhY2sgPSBwbGF5ZXIyLmF0dGFja1BsYXllcigpO1xuXG4gICAgICBpZiAoY3B1QXR0YWNrKVxuXG4gICAgICAgIGlmIChwbGF5ZXIxLnBsYXllckJvYXJkLmNoZWNrU3VuayhwbGF5ZXIxU2hpcHMpKSB7XG4gICAgICAgICAgRE9NTG9naWMuZW5kR2FtZSgpO1xuICAgICAgICAgIERPTUxvZ2ljLmNyZWF0ZU1vZGFsKFwiUGxheWVyMlwiLCB0cnVlKTtcbiAgICAgICAgICBpc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICBpZiAocGxheWVyMi5jcHVCb2FyZC5jaGVja1N1bmsocGxheWVyMlNoaXBzKSkge1xuICAgICAgICBET01Mb2dpYy5lbmRHYW1lKCk7XG4gICAgICAgIERPTUxvZ2ljLmNyZWF0ZU1vZGFsKFwiUGxheWVyMVwiKTtcbiAgICAgICAgaXNHYW1lT3ZlciA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0dhbWVPdmVyO1xuICAgIH07XG5cbiAgICAvLyByZWNlaXZlIGNvb3JkcywgZ3JpZCBjb250YWluZXJzIGFuZCBzdGFydCB0aGUgZ2FtZS5cblxuICAgIGNvbnN0IHR1cm5Mb29wID0gKHRvQXR0YWNrR3JpZCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b0F0dGFja0dyaWQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlID0gdG9BdHRhY2tHcmlkLmNoaWxkTm9kZXNbaV07XG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgdHVybnNMb2dpYygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBvbmNlOiB0cnVlIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgdHVybkxvb3AgfTtcbiAgfTtcblxuICBjb25zdCBzaW5nbGVQbGF5ZXIgPSAoY29vcmRzLCBzYW1lQ29vcmRzLCBjdXJyZW50RE9NKSA9PiB7XG4gICAgbGV0IG5ld0dhbWU7XG5cbiAgICBpZiAoY3VycmVudERPTSkge1xuICAgICAgY3VycmVudERPTS5kZWxldGVFbGVtZW50cygwKTsgLy8gY2xlYXIgcHJldmlvdXMgZWxlbWVudHNcblxuICAgICAgaWYgKHNhbWVDb29yZHMgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgY3B1Q29vcmRzID0gRE9NTG9naWMuZ2VuQ29vcmRzKCkuZ2VuQmF0dGxlc2hpcHMoKS5jb29yZHM7IC8vIGdlbiByYW5kb20gY29vcmRzLlxuICAgICAgICBpZiAoY3VycmVudERPTSlcbiAgICAgICAgICBuZXdHYW1lID0gRE9NTG9naWMuc3RhcnRHYW1lKFxuICAgICAgICAgICAgY3VycmVudERPTS5nZW5HcmlkKDEsIGNvb3JkcyksXG4gICAgICAgICAgICBjdXJyZW50RE9NLmdlbkdyaWQoMiksXG4gICAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgICBjcHVDb29yZHNcbiAgICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3R2FtZSA9IERPTUxvZ2ljLnN0YXJ0R2FtZShcbiAgICAgICAgICBjdXJyZW50RE9NLmdlbkdyaWQoMSwgY29vcmRzKSxcbiAgICAgICAgICBjdXJyZW50RE9NLmdlbkdyaWQoMiksXG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIGNvb3Jkc1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGF5ZXJPYmogPSBuZXdHYW1lLmN1cnJlbnRHYW1lLlBsYXllcjtcbiAgICAgIGNvbnN0IGNwdU9iaiA9IG5ld0dhbWUuY3VycmVudEdhbWUuY3B1UGxheWVyO1xuICAgICAgY29uc3QgY3VycmVudFR1cm4gPSBnYW1lVHVybnMocGxheWVyT2JqLCBjcHVPYmosIDApO1xuICAgICAgY29uc3QgY3B1R3JpZCA9IG5ld0dhbWUuZ3JpZENvbnRhaW5lcjI7XG5cbiAgICAgIC8vIHRyaWdnZXIgdHVybnMgbG9naWNcbiAgICAgIGdhbWVUdXJucyhwbGF5ZXJPYmosIGNwdU9iaikudHVybkxvb3AoY3B1R3JpZCk7XG5cbiAgICAgIHJldHVybiB7IHBsYXllck9iaiwgY3B1T2JqLCBjdXJyZW50VHVybiB9O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZW5Jbml0aWFsRWxlbWVudHMgPSAoXG4gICAgY29vcmRzLFxuICAgIHNhbWVDb29yZHMsXG4gICAgdXNlZENvb3JkcyxcbiAgICBjdXN0b21pemVPcGVuXG4gICkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRET00gPSBET01Mb2dpYy5nZW5ET01FbGVtZW50cygpO1xuXG4gICAgY3VycmVudERPTS5nZW5HcmlkKDEsIGNvb3Jkcyk7XG4gICAgY3VycmVudERPTS5nZW5CdXR0b25zKCk7XG4gICAgRE9NTG9naWMucm90YXRlU2hpcHMoY29vcmRzLCB1c2VkQ29vcmRzLCAwLCBnZW5Jbml0aWFsRWxlbWVudHMsIGN1cnJlbnRET00pO1xuICAgIERPTUxvZ2ljLnNldHVwRXZlbnRMaXN0ZW5lcnMoXG4gICAgICBjb29yZHMsXG4gICAgICBzYW1lQ29vcmRzLFxuICAgICAgdXNlZENvb3JkcyxcbiAgICAgIGN1cnJlbnRET00sXG4gICAgICBjdXN0b21pemVPcGVuLFxuICAgICAgZ2VuSW5pdGlhbEVsZW1lbnRzLFxuICAgICAgc2luZ2xlUGxheWVyXG4gICAgKTtcbiAgICAvLyBkcmFnQW5kRHJvcChjb29yZHMpO1xuXG4gICAgcmV0dXJuIHsgY3VycmVudERPTSB9O1xuICB9O1xuXG4gIGNvbnN0IHNldHVwRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGdlblJhbmRvbUNvb3JkcyA9IERPTUxvZ2ljLmdlbkNvb3JkcygpLmdlbkJhdHRsZXNoaXBzKCk7XG4gICAgY29uc3QgcmFuZG9tQ29vcmRzID0gZ2VuUmFuZG9tQ29vcmRzLmNvb3JkcztcbiAgICBjb25zdCB7IHVzZWRDb29yZHMgfSA9IGdlblJhbmRvbUNvb3JkcztcblxuICAgIGdlbkluaXRpYWxFbGVtZW50cyhyYW5kb21Db29yZHMsIGZhbHNlLCB1c2VkQ29vcmRzKTtcblxuICAgIHJldHVybiB7IHVzZWRDb29yZHMgfTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNpbmdsZVBsYXllcixcbiAgICBzZXR1cERPTSxcbiAgICBnZW5Jbml0aWFsRWxlbWVudHMsXG4gIH07XG59KSgpO1xuXG5HYW1lTG9vcC5zZXR1cERPTSgpO1xuXG5leHBvcnQgeyBtYWluT2JqZWN0cywgcGxheWVyTG9naWMsIEdhbWUsIERPTUxvZ2ljLCBHYW1lTG9vcCwgZ2xvYmFsTG9naWMgfTsiXSwibmFtZXMiOlsiZ2xvYmFsTG9naWMiLCJjb29yZFRvQ2xhc3MiLCJhcnIiLCJzbGljZSIsImNoYW5nZUNvb3JkQ29sb3IiLCJjbGFzc05hbWUiLCJncmlkTnVtYmVyIiwiY29sb3IiLCJjdXJyZW50Q29vcmQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImJvcmRlciIsImlzVGFyZ2V0SW5BcnJheSIsInRhcmdldCIsImNvbnRhaW5zIiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJsZW5ndGgiLCJlbGVtZW50IiwiaW5kaWNhdGVTdW5rIiwic2hpcCIsImN1cnJlbnRDb29yZHMiLCJjbGFzc1RvQXJyYXkiLCJjbGFzc0Nvb3JkIiwiYXJyYXlDb29yZCIsIngiLCJ5IiwicHVzaCIsIk51bWJlciIsIm1haW5PYmplY3RzIiwiU2hpcCIsImxlbmd0aE51bWJlciIsImhpdHNOdW1iZXIiLCJjb29yZHMiLCJzaGlwSGl0cyIsInNoaXBMZW5ndGgiLCJpc1N1bmsiLCJoaXQiLCJjdXJyZW50SGl0cyIsIkdhbWVib2FyZCIsInJlY2VpdmVkQXR0YWNrcyIsInN1Y2Nlc3NBdHRhY2tzIiwicmVjZWl2ZUF0dGFjayIsInRhcmdldENvcmRzIiwicGxheWVyU2hpcHMiLCJjdXJyZW50U2hpcHMiLCJPYmplY3QiLCJlbnRyaWVzIiwiY29vcmRpbmF0ZXMiLCJzdWNjZXNzIiwic2hpcENvcmRzIiwic2hpcE5hbWUiLCJjYXJyaWVyIiwiYmF0dGxlU2hpcCIsImJhdHRsZVNoaXAxIiwiY3J1aXNlciIsImNydWlzZXIxIiwiY3J1aXNlcjIiLCJkZXN0cm95ZXIiLCJkZXN0cm95ZXIxIiwiZGVzdHJveWVyMiIsImRlc3Ryb3llcjMiLCJkZXBsb3lTaGlwcyIsImNhcnJpZXJDb3JkcyIsImJhdHRsZVNoaXBDb3JkcyIsImJhdHRsZVNoaXAxQ29yZHMiLCJjcnVpc2VyQ29yZHMiLCJjcnVpc2VyMUNvcmRzIiwiY3J1aXNlcjJDb3JkcyIsImRlc3Ryb3llckNvcmRzIiwiZGVzdHJveWVyMUNvcmRzIiwiZGVzdHJveWVyMkNvcmRzIiwiZGVzdHJveWVyM0NvcmRzIiwiY2hlY2tTdW5rIiwic2hpcHMiLCJwbGF5ZXJMb2dpYyIsInZpc3VhbEluZGljYXRvcnMiLCJjb29yZCIsIndhc1N1Y2Nlc3NmdWwiLCJpbmRleCIsImN1cnJlbnROb2RlIiwidGV4dENvbnRlbnQiLCJyZW1vdmVOb2RlTGlzdGVuZXJzIiwiY29vcmRpbmF0ZSIsInJlcGxhY2VXaXRoIiwiY2xvbmVOb2RlIiwidmFsaWRhdGVDb29yZHMiLCJ2YWxpZGF0ZWRDb29yZHMiLCJyZXR1cm5TaWRlcyIsIm5vZGVDb29yZCIsInVwIiwiZG93biIsInJpZ2h0IiwibGVmdCIsImF0dGFja0Fyb3VuZCIsIm5vZGVDb29yZHMiLCJhdHRhY2tGdW5jdGlvbiIsImFyb3VuZENvb3JkcyIsImZsYXRBcm91bmRDb29yZHMiLCJmbGF0IiwicmV0dXJuQ29ybmVycyIsIm5vZGUiLCJjb3JuZXJzIiwiY29ybmVyMSIsImNvcm5lcjIiLCJjb3JuZXIzIiwiY29ybmVyNCIsImF0dGFja0Nvcm5lcnMiLCJ2YWxpZENvcm5lcnMiLCJQbGF5ZXIiLCJuYW1lIiwic2hpcHNDb29yZHMiLCJwbGF5ZXJOYW1lIiwicGxheWVyQ29vcmRzIiwicGxheWVyQm9hcmQiLCJyZWNlaXZlZEF0dGFjayIsImNwdVBsYXllciIsImh1bWFuUGxheWVyIiwic2hpcHNDb3JkcyIsInJpdmFsUGxheWVyIiwiY3B1Q29vcmRzIiwiY3B1Qm9hcmQiLCJjcHVTaGlwcyIsImNwdUhpdHMiLCJyaXZhbEhpdHMiLCJyaXZhbFN1Y2Nlc3NIaXRzIiwiYXR0YWNrUGxheWVyIiwiaWdub3JlQ29vcmRzIiwicmFuZG9tSW50IiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tQ29vcmRzIiwiYXR0YWNrTG9naWMiLCJyYW5kb21Db29yZCIsInBvc3NpYmxlQXR0YWNrcyIsImZ1bGxDb29yZHMiLCJub1JlcGVhdCIsInVzZWRDb29yZHMiLCJmaWx0ZXIiLCJ1bmRlZmluZWQiLCJub3RSZXBlYXRlZENvb3JkcyIsInRyeUNsb3NlQXR0YWNrIiwiR2FtZSIsIkRPTUxvZ2ljIiwiVUlMb2dpYyIsIm5vZGVzIiwiZ2FtZUluZm8iLCJwbGF5ZXIxQ29vcmRzIiwicGxheWVyMkNvb3JkcyIsImF0dGFja0NwdSIsImF0dGFja09uQ2xpY2siLCJzaGlwQ29vcmRzIiwidmFsdWVzIiwibWlzc2VkQXR0YWNrT25DbGljayIsImRldGVjdEF0dGFja3MiLCJlIiwicGFyZW50Q2xhc3MiLCJwYXJlbnRFbGVtZW50Iiwibm9kZUNsYXNzIiwiY2xlYW5Db29yZHMiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsImZsYXRDb29yZHMiLCJlbGVtZW50cyIsIm11bHRpcGxlQ29vcmRTaGlwcyIsImVsIiwib25lQ29vcmRTaGlwcyIsImNvbmNhdCIsInN1cnJvdW5kQ29vcmRzIiwiZ2V0U3VycnVvbmRzIiwiY3VycmVudFN1cnJvdW5kcyIsInN1cnJvdW5kIiwiU2V0IiwibWFwIiwicGFyc2UiLCJyb3RhdGVDb29yZHMiLCJzd2FwT3JpZW50YXRpb24iLCJ5UG9zIiwieFBvcyIsIm5ld0FycmF5IiwiZmlyc3RDb29yZCIsIm5ld0Nvb3JkIiwicmVwbGFjZUNvb3JkcyIsInNoaXBJbmZvIiwiY29vcmRzQ29weSIsInNwbGljZSIsImNvb3Jkc1Bvc2l0aW9uIiwidmFsaWRhdGVSb3RhdGlvbiIsImlzVmFsaWQiLCJvY2N1cGllZENvb3JkcyIsInVzZWRDb29yZHNDb3B5IiwiZmxhdFVzZWRDb29yZHMiLCJjb29yZHNTdXJyb3VuZCIsImNoYW5nZVNoaXBDb2xvciIsImN1cnJlbnRTaGlwIiwiYm9yZGVyQ29sb3IiLCJnZXRTZWxlY3RTaGlwSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwiaGlnaGxpZ2h0Q3VycmVudFNoaXAiLCJzaGlwSW5kZXgiLCJjaGFuZ2VFdmVyeVNoaXBDb2xvciIsInRyaWdnZXJDdXJyZW50Q29vcmQiLCJjdXJyZW50RE9NIiwiY29vcmRDbGFzcyIsImdyaWRDb250YWluZXIiLCJkZWxldGVTaG93bkdyaWQiLCJnZW5HcmlkT25seSIsImNoYW5nZUluaXRpYWxDb29yZCIsInJlc3RhcnRHcmlkIiwiZ2VuZXJhdGVDb29yZHMiLCJ1cGRhdGVkU2hpcEluZm8iLCJ1cGRhdGVHcmlkIiwic2hpcE9iaiIsInVzZWRDb29yZHNBcnIiLCJjb29yZHNBcnIiLCJ1c2VkRE9NIiwiZGVsZXRlRWxlbWVudHMiLCJzdGFydEdhbWUiLCJncmlkQ29udGFpbmVyMSIsImdyaWRDb250YWluZXIyIiwiY3VycmVudEdhbWUiLCJjaGlsZE5vZGVzIiwiZGlzcGxheUdyaWQiLCJncmlkMSIsImdyaWQyIiwic2l6ZSIsInJlY3Vyc2l2ZSIsImdyaWRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImdyaWRFbGVtZW50MiIsImFwcGVuZENoaWxkIiwiY3JlYXRlR3JpZCIsImdlbkRPTUVsZW1lbnRzIiwicGxheWVySW5kZXgiLCJjb250YWluZXIiLCJncmlkIiwib25lRGltZW5zaW9uQ29vcmRzIiwic2hvd1NoaXBzIiwiZ2VuR3JpZCIsIm1haW5Db250YWluZXIiLCJtYWluIiwicXVlcnlTZWxlY3RvciIsImdyaWRzQ29udGFpbmVyIiwiZ3JpZFdyYXBwZXIiLCJ4Q29udGFpbmVyIiwieUNvbnRhaW5lciIsImdyaWRJbmRpY2F0b3JzWCIsImdyaWRJbmRpY2F0b3JzWSIsImNsYXNzTGlzdCIsImFkZCIsImVsZW1lbnQyIiwiZ2VuSW5kaWNhdG9ycyIsInJlbW92ZSIsImdlbkJ1dHRvbnMiLCJidXR0b25XcmFwcGVyIiwiZ2VuQnV0dG9uV3JhcHBlciIsInJhbmRvbUJ1dHRvbiIsImJ1dHRvbkNvbnRhaW5lciIsImdlblJhbmRvbWl6ZUJ1dHRvbiIsInN0YXJ0QnV0dG9uIiwiZ2VuU3RhcnRCdXR0b24iLCJjdXN0b21pemVCdXR0b24iLCJnZW5DdXN0b21pemVCdXR0b24iLCJnZW5Db29yZElucHV0cyIsImlucHV0VGl0bGUiLCJodG1sRm9yIiwic2VsZWN0RWxlbWVudCIsImlucHV0V3JhcHBlciIsImlucHV0MSIsImlucHV0VGV4dCIsImlucHV0MiIsInN1Ym1pdEJ1dHRvbiIsIm9wdGlvbjEiLCJ2YWx1ZSIsIm9wdGlvbjIiLCJvcHRpb24zIiwib3B0aW9uNCIsIm9wdGlvbjUiLCJvcHRpb242Iiwib3B0aW9uNyIsIm9wdGlvbjgiLCJvcHRpb245Iiwib3B0aW9uMTAiLCJyZWdFeHAiLCJ2YWxpZGF0ZUlucHV0IiwiZXZlbnQiLCJrZXkiLCJtYXRjaCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2V0QXR0cmlidXRlIiwic2hvd25HcmlkIiwiZW5kR2FtZSIsInBsYXllcjFHcmlkIiwicGxheWVyMkdyaWQiLCJjcmVhdGVNb2RhbCIsIndpbm5lciIsImNwdVdpbiIsImJvZHkiLCJtb2RhbCIsIm1vZGFsVGV4dCIsInJlbG9hZEdhbWVCdXR0b24iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInNob3dNb2RhbCIsImdlbkNvb3JkcyIsImdlblJhbmRvbUNvb3JkcyIsIm9yaWVudGF0aW9uIiwicHJldmlvdXNDb29yZHMiLCJ2ZXJ0aWNhbENvb3JkcyIsImhvcml6b250YWxDb29yZHMiLCJnZW5TaGlwQ29vcmQiLCJpbnZhbGlkQ29vcmRzIiwiZ2VuSW5pdGlhbENvb3JkcyIsImdlbkJhdHRsZXNoaXBzIiwicm90YXRlU2hpcHMiLCJyb3RhdGUiLCJjbGlja2VkQ29vcmQiLCJmdWxsQXJyYXkiLCJjb29yZHNJbmZvIiwiZ2V0U2hpcENvb3JkcyIsImN1c3RvbWl6ZVNlY3Rpb24iLCJjb29yZEVsZW1lbnQiLCJzZXRUaW1lb3V0IiwidHJpZ2dlckludmFsaWRSVCIsImVsZW1lbnRDbGFzcyIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJzYW1lQ29vcmRzIiwiY3VzdG9taXplT3BlbiIsImdlbkluaXRpYWxFbGVtZW50cyIsImdhbWVNb2RlIiwicmFuZG9taXplQnV0dG9uIiwicmFuZG9taXplR3JpZCIsImNoYW5nZUNvb3JkQnV0dG9uIiwiaW5pdGlhbENvb3JkIiwiZnVsbENvb3JkIiwic2VsZWN0U2hpcHMiLCJjdXJyZW50U2hpcEluZGV4IiwiY29vcmRJbnB1dCIsImNvb3JkSW5wdXQxIiwiY3VzdG9taXplU2V0dXAiLCJjbGljayIsImdhbWVUdXJucyIsInBsYXllcjEiLCJwbGF5ZXIyIiwicGxheWVyMVNoaXBzIiwicGxheWVyMlNoaXBzIiwidHVybnNMb2dpYyIsImlzR2FtZU92ZXIiLCJ0dXJuTG9vcCIsInRvQXR0YWNrR3JpZCIsInNpbmdsZVBsYXllciIsIm5ld0dhbWUiLCJwbGF5ZXJPYmoiLCJjcHVPYmoiLCJjdXJyZW50VHVybiIsImNwdUdyaWQiLCJzZXR1cERPTSJdLCJzb3VyY2VSb290IjoiIn0=