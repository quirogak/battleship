(()=>{"use strict";const e=(()=>{const e=e=>`${e.slice(0,1)},${e.slice(1,2)}`,t=(e,t,r)=>{const n=document.getElementsByClassName(e)[t-1];n&&(n.style.border=`1px solid ${r}`)};return{isTargetInArray:(e,t)=>{let r=!1;if(JSON.stringify(e)===JSON.stringify(t)&&(r=!0),!e)return r;if(!t)return r;for(let n=0;n<e.length;n++){const s=e[n];JSON.stringify(s)===JSON.stringify(t)&&(r=!0)}return r},changeCoordColor:t,indicateSunk:(r,n)=>{const{currentCoords:s}=r;if("number"==typeof s[0])t(e(s),n,"red");else for(let r=0;r<s.length;r++)t(e(s[r]),n,"red")},classToArray:e=>{const t=[],r=e.slice(0,1),n=e.slice(2,3);return t.push(Number(r)),t.push(Number(n)),t},coordToClass:e}})(),t=(()=>{const t=(e,t,r)=>{let n=t;const s=e;return{isSunk:()=>s===n,hit:()=>n++,currentHits:()=>n,currentCoords:r,shipLength:s}};return{Ship:t,Gameboard:()=>{const r=[],n=[];return{receiveAttack:(t,s)=>{const o=Object.entries(s.coordinates);r.push(t);for(let r=0;r<o.length;r++){let c=!1;const a=o[r][1],i=o[r][0];if(e.isTargetInArray(a,t)){if(c=!0,n.push(t),"carrier"===i&&(s.carrier.hit(),s.carrier.isSunk()))return s.carrier;if("battleShip"===i&&(s.battleShip.hit(),s.battleShip.isSunk()))return s.battleShip;if("battleShip1"===i&&(s.battleShip1.hit(),s.battleShip1.isSunk()))return s.battleShip1;if("cruiser"===i&&(s.cruiser.hit(),s.cruiser.isSunk()))return s.cruiser;if("cruiser1"===i&&(s.cruiser1.hit(),s.cruiser1.isSunk()))return s.cruiser1;if("cruiser2"===i&&(s.cruiser2.hit(),s.cruiser2.isSunk()))return s.cruiser2;if("destroyer"===i&&(s.destroyer.hit(),s.destroyer.isSunk()))return s.destroyer;if("destroyer1"===i&&(s.destroyer1.hit(),s.destroyer1.isSunk()))return s.destroyer1;if("destroyer2"===i&&(s.destroyer2.hit(),s.destroyer2.isSunk()))return s.destroyer2;if("destroyer3"===i&&(s.destroyer3.hit(),s.destroyer3.isSunk()))return s.destroyer3}if(!0===c)break}},deployShips:(e,r,n,s,o,c,a,i,d,l)=>{const u={carrier:e,battleShip:r,battleShip1:n,cruiser:s,cruiser1:o,cruiser2:c,destroyer:a,destroyer1:i,destroyer2:d,destroyer3:l};return{carrier:t(4,0,u.carrier),battleShip:t(3,0,u.battleShip),battleShip1:t(3,0,u.battleShip1),cruiser:t(2,0,u.cruiser),cruiser1:t(2,0,u.cruiser1),cruiser2:t(2,0,u.cruiser2),destroyer:t(1,0,u.destroyer),destroyer1:t(1,0,u.destroyer1),destroyer2:t(1,0,u.destroyer2),destroyer3:t(1,0,u.destroyer3),coordinates:u}},receivedAttacks:r,successAttacks:n,checkSunk:e=>{return!((t=e).carrier.currentCoords&&!t.carrier.isSunk()||t.battleShip.currentCoords&&!t.battleShip.isSunk()||t.battleShip1.currentCoords&&!t.battleShip1.isSunk()||t.cruiser.currentCoords&&!t.cruiser.isSunk()||t.cruiser1.currentCoords&&!t.cruiser1.isSunk()||t.cruiser2.currentCoords&&!t.cruiser2.isSunk()||t.destroyer.currentCoords&&!t.destroyer.isSunk()||t.destroyer1.currentCoords&&!t.destroyer1.isSunk()||t.destroyer2.currentCoords&&!t.destroyer2.isSunk()||t.destroyer3.currentCoords&&!t.destroyer3.isSunk());var t}}}}})(),r=(()=>{const r=(e,t,r)=>{let n=0;"cpu"===r&&(n=1);const s=document.getElementsByClassName(e)[n];s&&(s.textContent=!1===t?"â€¢":"X")},n=(t,r)=>{let n=0;"cpu"===r&&(n=1);const s=e.coordToClass(t),o=document.getElementsByClassName(s)[n];o&&o.replaceWith(o.cloneNode(!0))},s=e=>{const t=[];for(let n=0;n<e.length;n++)(r=e[n])[0]<0||r[1]<0||r[0]>9||r[1]>9||t.push(e[n]);var r;return t},o=e=>{const t=[],r=[e[0]-1,e[1]],n=[e[0]+1,e[1]],s=[e[0],e[1]+1],o=[e[0],e[1]-1];return t.push(r,n,s,o),t},c=(t,c,a,i,d)=>{const l=[];if("object"==typeof t[0])for(let e=0;e<t.length;e++)l.push(o(t[e]));else l.push(o(t));const u=s(l.flat());for(let t=0;t<u.length;t++)e.isTargetInArray(d,u[t])||(r(u[t],!1,i),n(u[t],i),c(u[t],a))},a=e=>{const t=[],r=[e[0]+1,e[1]+1],n=[e[0]+1,e[1]+-1],s=[e[0]-1,e[1]+1],o=[e[0]-1,e[1]-1];return t.push(r,n,s,o),t},i=(e,t,o)=>{const c=a(e),i=s(c);for(let e=0;e<i.length;e++)r(i[e],!1,o),n(i[e],o),t(i[e],!0)};return{Player:(r,n)=>{const s=r,o=n,a=t.Gameboard(),i=a.deployShips(...n);return{playerName:s,playerCoords:o,playerBoard:a,playerShips:i,receiveAttack:t=>{const r=a.receiveAttack(t,i);r&&(e.indicateSunk(r,1),c(r.currentCoords,a.receiveAttack,i,"player",a.successAttacks))}}},cpuPlayer:(n,o)=>{const a=n,d=o,l=t.Gameboard(),u=l.deployShips(...o),p=[],m=a.playerBoard.receivedAttacks,h=a.playerBoard.successAttacks,y=(t,n)=>{const o=e=>Math.floor(Math.random()*e),c=[o(10),o(10)],d=t=>(a.receiveAttack(t),e.isTargetInArray(h,t)?(r(t,!0,"player"),i(t,y,"player"),p.push(t),!0):(p.push(t),r(t,!1,"player"),!1));return e.isTargetInArray(m,c)&&!0!==n?y():t?d(t):p[0]&&h[0]&&p[p.length-1]===h[h.length-1]?((t,r,n)=>{const o=[t[0]-1,t[1]],c=[t[0]+1,t[1]],a=[t[0],t[1]+1],i=[t[0],t[1]-1],d=((t,r)=>{const n=[],s=r.filter((e=>void 0!==e));for(let r=0;r<t.length;r++){const o=t[r];e.isTargetInArray(s,o)||n.push(o)}return n})(s([o,c,a,i]),m);return 0===d.length?r(n):r(d[(l=d.length,Math.floor(Math.random()*l))]);var l})(h[h.length-1],y,c):d(c)};return{attackPlayer:y,cpuBoard:l,cpuShips:u,cpuCoords:d,receiveAttack:t=>{const r=l.receiveAttack(t,u);r&&(e.indicateSunk(r,2),c(r.currentCoords,l.receiveAttack,u,"cpu",l.successAttacks))}}},visualIndicators:r,attackCorners:i,attackAround:c,returnCorners:a,returnSides:o,validateCoords:s}})(),n=(e,t,n)=>{const s=r.Player(e,t);return{Player:s,cpuPlayer:r.cpuPlayer(s,n)}},s=(()=>{const t=(t,n)=>{const s=n.Player.playerShips.coordinates,o=n.cpuPlayer.cpuShips.coordinates,c=e=>n.Player.receiveAttack(e),a=e=>n.cpuPlayer.receiveAttack(e),i=(t,r,n)=>{let s=!1;if(e.isTargetInArray(Object.values(t),r))return n(r),s=!0,!0;for(let o=0;o<t.length;o++){const c=t[o];if(e.isTargetInArray(c,r)){n(r),s=!0;break}}return s},d=(e,t)=>(t(e),!1),l=t=>{const n=t.target.parentElement.className,l=t.target.className,u=e.classToArray(l);if("grid-1"===n){const e=Object.values(s).filter((e=>void 0!==e));!0===i(e,u,c)?(r.visualIndicators(l,!0,"player"),r.attackCorners(u,c,"player")):(d(u,c),r.visualIndicators(l,!1,"player"))}if("grid-2"===n){const e=Object.values(o).filter((e=>void 0!==e));!0===i(e,u,a)?(r.visualIndicators(l,!0,"cpu"),r.attackCorners(u,a,"cpu")):(d(u,a),r.visualIndicators(l,!1,"cpu"))}};for(let e=0;e<t.length;e++)t[e].addEventListener("click",l,{once:!0})},o=e=>{if(e){const t=e.filter((e=>"object"==typeof e[0])),r=e.filter((e=>"number"==typeof e[0]));return t.flat().concat(r)}},c=e=>{const t=e=>{const t=[...r.returnCorners(e),...r.returnSides(e),e];return r.validateCoords(t)},n=[];if("object"!=typeof e[0]){const r=t(e);return n.push(...r),[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))}for(let r=0;r<e.length;r++){const s=t(e[r]);n.push(...s)}return[...new Set(n.map((e=>JSON.stringify(e))))].map((e=>JSON.parse(e)))},a=(e,t)=>{let r,n,s=[e.firstCoord];for(let o=0;o<e.coords.length-1;o++){"v"==(t?e.coords[0][0]+1===e.coords[1][0]?"h":"v":e.coords[0][0]+1===e.coords[1][0]?"v":"h")?(r=s[o][0],n=s[o][1]+1):(r=s[o][0]+1,n=s[o][1]);const c=[r,n];s=s.concat([c])}return s},i=(e,t)=>{const r=[...t];return r.splice(e.coordsPosition,1,e.coords),r},d=(t,n)=>{let s=!0;const a=t.coords,{coordsPosition:i}=t,d=[...n];d[i]=[];const l=o(d);if(r.validateCoords(a).length!==a.length)return n;if("number"==typeof a[0])e.isTargetInArray(l,a)&&(s=!1);else for(let t=0;t<a.length;t++)e.isTargetInArray(l,a[t])&&(s=!1);const u=c(a);return!0===s?(d[i]=u,d):n},l=(t,r)=>{let n;for(let s=0;s<t.length;s++)n="number"==typeof t[s]?e.coordToClass(t):e.coordToClass(t[s]),document.getElementsByClassName(n)[0].style.borderColor=r},u=()=>document.getElementsByClassName("select-ships")[0].selectedIndex,p=(e,t)=>{const r=t[e];return((e,t)=>{const r=e;for(let e=0;e<r.length;e++){const t=r[e];l(t,"green")}})(t),l(r,"rgb(37, 214, 199)"),r},m=(e,t,r,n)=>{const s=[Number(e),Number(t)],o=document.getElementsByClassName("grid-wrapper")[0];return n.deleteShownGrid(0),n.genGridOnly(1,o,r),p(u(),r),l(s,"orange"),s},h=(e,t,r,n,s,o)=>{const c={coords:r[e],firstCoord:t,coordsPosition:e},l=a(c,!0),u={coords:l,firstCoord:l[0],coordsPosition:e},p=(e,t,r,n)=>{if(d(e,t)!==t)return n.deleteElements(0),s(i(e,r),!1,d(e,t),!0)};return"number"==typeof r[e][0]?(c.coords=c.firstCoord,p(c,n,r,o)):p(u,n,r,o),{updateGrid:p}};return{startGame:(e,r,s,o)=>{const c=n("example",s,o);return"shown-grid"!==e.className&&t(e.childNodes,c),"shown-grid"!==r.className&&t(r.childNodes,c),{currentGame:c,gridContainer1:e,gridContainer2:r}},displayGrid:(e,t)=>{(r=>{const n=r=>{if(10!==r){for(let n=0;n<10;n++){const s=document.createElement("div");s.className=`${r},${n}`;const o=document.createElement("div");o.className=`${r},${n}`,e&&e.appendChild(s),t&&t.appendChild(o)}n(r+1)}};n(0)})()},genDOMElements:()=>{const t=(t,r,n)=>{const o=document.createElement("div");return o.className=`grid-${t}`,r.appendChild(o),1===t?s.displayGrid(o,null):s.displayGrid(null,o),n&&(o.className="shown-grid",((t,r)=>{const n=(e=>{const t=[];for(let r=0;r<e.length;r++){const n=e[r];"object"==typeof n[0]?t.push(...n):t.push(n)}return t})(t);for(let t=0;t<n.length;t++)e.changeCoordColor(e.coordToClass(n[t]),r,"green")})(n,t)),o};return{genGrid:(e,r)=>{const n=document.createElement("section");n.className="main-container";const s=document.querySelector("main");s&&s.appendChild(n);const o=document.createElement("div");o.className="grids-container",n&&n.appendChild(o);const c=document.createElement("h3");c.textContent=`Player's ${e} Grid`,o.appendChild(c);const a=document.createElement("div");return a.className="grid-wrapper",((e,t)=>{const r=document.createElement("section"),n=document.createElement("section");r.classList.add("X"),n.classList.add("Y");for(let e=0;e<=9;e++){const t=document.createElement("div");t.textContent=e,n.appendChild(t);const s=document.createElement("div");s.textContent=e,r.appendChild(s)}e.appendChild(r),t.appendChild(n)})(o,a),o.appendChild(a),t(e,a,r)},deleteElements:e=>{const t=document.getElementsByClassName("main-container")[e];t&&t.remove()},genButtons:()=>{(()=>{const e=document.createElement("div");e.classList.add("button-wrapper");const t=document.getElementsByClassName("grids-container")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="random-button",e.textContent="Randomize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="start-button",e.textContent="Start Game";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})(),(()=>{const e=document.createElement("button");e.className="customize-button",e.textContent="Customize";const t=document.getElementsByClassName("button-wrapper")[0];t&&t.appendChild(e)})()},genCoordInputs:()=>{const e=document.getElementsByClassName("main-container")[0],t=document.createElement("label");t.classList.add("inputs-container"),t.htmlFor="select-ships",t.textContent="Set Initial Coord",e.appendChild(t);const r=document.createElement("select");r.classList.add("select-ships"),t.appendChild(r);const n=document.createElement("div");n.classList.add("input-wrapper"),t.appendChild(n);const s=document.createElement("input");s.classList.add("coords-input"),n.appendChild(s);const o=document.createElement("p");o.classList.add("input-text"),o.textContent=",",n.appendChild(o);const c=document.createElement("input");c.classList.add("coords-input"),n.appendChild(c);const a=document.createElement("button");a.classList.add("apply-coords"),a.textContent="Apply",t.appendChild(a);const i=document.createElement("option");i.value="carrier",i.textContent="Carrier",r.appendChild(i);const d=document.createElement("option");d.value="battleship1",d.textContent="Battleship 1",r.appendChild(d);const l=document.createElement("option");l.value="battleship2",l.textContent="Battleship 2",r.appendChild(l);const u=document.createElement("option");u.value="cruiser1",u.textContent="Cruiser 1",r.appendChild(u);const p=document.createElement("option");p.value="cruiser2",p.textContent="Cruiser 2",r.appendChild(p);const m=document.createElement("option");m.value="cruiser3",m.textContent="Cruiser 3",r.appendChild(m);const h=document.createElement("option");h.value="destroyer1",h.textContent="Destroyer 1",r.appendChild(h);const y=document.createElement("option");y.value="destroyer2",y.textContent="Destroyer 2",r.appendChild(y);const C=document.createElement("option");C.value="destroyer3",C.textContent="Destroyer 3",r.appendChild(C);const g=document.createElement("option");g.value="destroyer4",g.textContent="Destroyer 4",r.appendChild(g);const f=/^\d+$/,v=e=>!!`${e.target.value}${e.key}`.match(f)||(e.preventDefault(),e.stopPropagation(),!1);c.setAttribute("maxlength","1"),s.setAttribute("maxlength","1"),s.addEventListener("keypress",v),c.addEventListener("keypress",v)},genGridOnly:t,deleteShownGrid:e=>{const t=document.getElementsByClassName("shown-grid")[e];t&&t.remove()}}},endGame:()=>{const e=document.getElementsByClassName("grid-1")[0],t=document.getElementsByClassName("grid-2")[0];e&&e.replaceWith(e.cloneNode(!0)),t&&t.replaceWith(t.cloneNode(!0))},createModal:(e,t)=>{const r=document.querySelector("body"),n=document.createElement("dialog");n.classList.add("modal"),r.appendChild(n);const s=document.createElement("div");n.appendChild(s),s.textContent=t?`${e} won, try again!`:`Congratulations ${e}, you won!`;const o=document.createElement("button");o.textContent="New Game",o.addEventListener("click",(()=>window.location.reload())),n.appendChild(o),n&&n.showModal()},genCoords:()=>{const t=e=>Math.floor(Math.random()*e),r=(e,r,n)=>{if(n){const t=[n[0]+1,n[1]],r=[n[0],n[1]+1];return"v"===e?t:r}let s;return s="v"===e?[t(10-r),t(10)]:[t(10),t(10-r)],1===r&&(s=[t(10),t(10)]),s},n=(s,c)=>{const a=[],i=0===t(2)?"h":"v",d=o(c),l=()=>{const t=r(i,s);e.isTargetInArray(d,t)?l():a.push(t)};for(let e=0;e<s;e++){const e=a[a.length-1],t=r(i,s,e);e?a.push(t):l()}if(1!==a.length){let t=!0;for(let r=0;r<a.length;r++){const n=a[r];e.isTargetInArray(d,n)&&(t=!1)}return!1===t?n(s,d):a}return a[0]};return{genBattleships:()=>{const e=[],t=n(4,e);e.push(c(t));const r=n(3,e);e.push(c(r));const s=n(3,e);e.push(c(s));const o=n(2,e);e.push(c(o));const a=n(2,e);e.push(c(a));const i=n(2,e);e.push(c(i));const d=n(1,e);e.push(c(d));const l=n(1,e);e.push(c(l));const u=n(1,e);e.push(c(u));const p=n(1,e);return e.push(c(p)),{coords:[t,r,s,o,a,i,d,l,u,p],usedCoords:e}},genShipCoord:n,surroundCoords:c}},rotateShips:(t,r,n,s,c)=>{const l=t.filter((e=>"object"==typeof e[0])),u=o(l),p=n=>{const o=n.target.className,u=((t,r)=>{for(let n=0;n<r.length;n++){const s=r[n],o=[s,n];if(e.isTargetInArray(s,t))return o}})(e.classToArray(o),l),p={coords:u[0],firstCoord:u[0][0],coordsPosition:u[1]};if(p.coords=a(p),d(p,r)!==r){const e=document.getElementsByClassName("inputs-container")[0];return c.deleteElements(0),s(i(p,t),!1,d(p,r),e)}return(t=>{for(let r=0;r<t.length;r++){const n=e.coordToClass(t[r]),s=document.getElementsByClassName(n)[0];s.classList.add("invalid-rotation"),setTimeout((()=>{s.classList.remove("invalid-rotation")}),1e3)}})(u[0])};for(let t=0;t<u.length;t++){const r=e.coordToClass(u[t]),s=document.getElementsByClassName(r)[n];s&&s.addEventListener("click",p)}},rotateCoords:a,changeInitialCoord:h,setupEventListeners:(e,t,r,n,o,c,a)=>{const i=document.getElementsByClassName("start-button")[0],d=document.getElementsByClassName("random-button")[0],y=document.getElementsByClassName("customize-button")[0];d&&d.addEventListener("click",(()=>{((e,t,r)=>{r.deleteElements(0);const n=s.genCoords().genBattleships();t(n.coords,!1,n.usedCoords)})(0,c,n)})),y&&(y.addEventListener("click",(()=>{n.genCoordInputs(),((e,t,r,n)=>{const s=document.getElementsByClassName("apply-coords")[0];s&&s.addEventListener("click",(()=>{const s=document.getElementsByClassName("coords-input"),o=[Number(s[0].value),Number(s[1].value)];h(u(),o,e,t,r,n)}));const o=document.getElementsByClassName("select-ships")[0];l(e[0],"rgb(37, 214, 199)"),o&&o.addEventListener("click",(()=>{const t=document.getElementsByClassName("select-ships")[0].selectedIndex;p(t,e)}));const c=document.getElementsByClassName("coords-input")[0],a=document.getElementsByClassName("coords-input")[1];c.addEventListener("input",(()=>{c.value&&a.value&&m(c.value,a.value,e,n)})),a.addEventListener("input",(()=>{c.value&&a.value&&m(c.value,a.value,e,n)}))})(e,r,c,n)}),{once:!0}),o&&y.click()),i&&i.addEventListener("click",(()=>{a(e,t,n)}))}}})();(()=>{const e=(e,t)=>{const r=e.playerShips,n=t.cpuShips,o=()=>{let o=!1;return t.attackPlayer()&&e.playerBoard.checkSunk(r)&&(s.endGame(),s.createModal("Player2",!0),o=!0),t.cpuBoard.checkSunk(n)&&(s.endGame(),s.createModal("Player1"),o=!0),o};return{turnLoop:e=>{for(let t=0;t<e.childNodes.length;t++)e.childNodes[t].addEventListener("click",(()=>{o()}),{once:!0})}}},t=(t,r,n)=>{let o;if(n){if(n.deleteElements(0),!0!==r){const e=s.genCoords().genBattleships().coords;n&&(o=s.startGame(n.genGrid(1,t),n.genGrid(2),t,e))}else o=s.startGame(n.genGrid(1,t),n.genGrid(2),t,t);const c=o.currentGame.Player,a=o.currentGame.cpuPlayer,i=e(c,a),d=o.gridContainer2;return e(c,a).turnLoop(d),{playerObj:c,cpuObj:a,currentTurn:i}}},r=(e,n,o,c)=>{const a=s.genDOMElements();return a.genGrid(1,e),a.genButtons(),s.rotateShips(e,o,0,r,a),s.setupEventListeners(e,n,o,a,c,r,t),{currentDOM:a}};return{singlePlayer:t,setupDOM:()=>{const e=s.genCoords().genBattleships(),t=e.coords,{usedCoords:n}=e;return r(t,!1,n),{usedCoords:n}},genInitialElements:r}})().setupDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFBYyxNQUdsQixNQThCTUMsRUFBZ0JDLEdBQVEsR0FBR0EsRUFBSUMsTUFBTSxFQUFHLE1BQU1ELEVBQUlDLE1BQU0sRUFBRyxLQUUzREMsRUFBbUIsQ0FBQ0MsRUFBV0MsRUFBWUMsS0FDL0MsTUFBTUMsRUFDSkMsU0FBU0MsdUJBQXVCTCxHQUFXQyxFQUFhLEdBRXRERSxJQUFjQSxFQUFhRyxNQUFNQyxPQUFTLGFBQWFMLElBQU8sRUFlcEUsTUFBTyxDQUNMTSxnQkFwRHNCLENBQUNYLEVBQUtZLEtBQzVCLElBQUlDLEdBQVcsRUFJZixHQUZJQyxLQUFLQyxVQUFVZixLQUFTYyxLQUFLQyxVQUFVSCxLQUFTQyxHQUFXLElBRTFEYixFQUFLLE9BQU9hLEVBRWpCLElBQUtELEVBQVEsT0FBT0MsRUFFcEIsSUFBSyxJQUFJRyxFQUFJLEVBQUdBLEVBQUloQixFQUFJaUIsT0FBUUQsSUFBSyxDQUNuQyxNQUFNRSxFQUFVbEIsRUFBSWdCLEdBRWhCRixLQUFLQyxVQUFVRyxLQUFhSixLQUFLQyxVQUFVSCxLQUFTQyxHQUFXLEVBQ3JFLENBRUEsT0FBT0EsQ0FBUSxFQXNDZlgsbUJBQ0FpQixhQWZtQixDQUFDQyxFQUFNaEIsS0FDMUIsTUFBTSxjQUFFaUIsR0FBa0JELEVBRTFCLEdBQWdDLGlCQUFyQkMsRUFBYyxHQUV2Qm5CLEVBQWlCSCxFQUFhc0IsR0FBZ0JqQixFQUFZLFlBRTFELElBQUssSUFBSVksRUFBSSxFQUFHQSxFQUFJSyxFQUFjSixPQUFRRCxJQUN4Q2QsRUFBaUJILEVBQWFzQixFQUFjTCxJQUFLWixFQUFZLE1BQy9ELEVBT0ZrQixhQXJDb0JDLElBQ3BCLE1BQU1DLEVBQWEsR0FFYkMsRUFBSUYsRUFBV3RCLE1BQU0sRUFBRyxHQUN4QnlCLEVBQUlILEVBQVd0QixNQUFNLEVBQUcsR0FLOUIsT0FIQXVCLEVBQVdHLEtBQUtDLE9BQU9ILElBQ3ZCRCxFQUFXRyxLQUFLQyxPQUFPRixJQUVoQkYsQ0FBVSxFQTZCakJ6QixlQUVILEVBN0RtQixHQStEZDhCLEVBQWMsTUFDbEIsTUFBTUMsRUFBTyxDQUFDQyxFQUFjQyxFQUFZQyxLQVF0QyxJQUFJQyxFQUFXRixFQUVmLE1BQU1HLEVBQWFKLEVBUW5CLE1BQU8sQ0FBRUssT0FOTSxJQUFnQkQsSUFBWUQsRUFNMUJHLElBSkwsSUFBTUgsSUFJSUksWUFGRixJQUFNSixFQUVTYixjQWpCYlksRUFpQjRCRSxhQUFZLEVBb0toRSxNQUFPLENBQUVMLE9BQU1TLFVBaktHLEtBQ2hCLE1BNERNQyxFQUFrQixHQUVsQkMsRUFBaUIsR0F5RnZCLE1BQU8sQ0FDTEMsY0F4Rm9CLENBQUNDLEVBQWFDLEtBQ2xDLE1BQU1DLEVBQWVDLE9BQU9DLFFBQVFILEVBQVlJLGFBQ2hEUixFQUFnQmIsS0FBS2dCLEdBRXJCLElBQUssSUFBSTNCLEVBQUksRUFBR0EsRUFBSTZCLEVBQWE1QixPQUFRRCxJQUFLLENBQzVDLElBQUlpQyxHQUFVLEVBRWQsTUFBTUMsRUFBWUwsRUFBYTdCLEdBQUcsR0FFNUJtQyxFQUFXTixFQUFhN0IsR0FBRyxHQUVqQyxHQUFJbEIsRUFBWWEsZ0JBQWdCdUMsRUFBV1AsR0FBYyxDQU12RCxHQUxBTSxHQUFVLEVBRVZSLEVBQWVkLEtBQUtnQixHQUdILFlBQWJRLElBQ0ZQLEVBQVlRLFFBQVFmLE1BQ2hCTyxFQUFZUSxRQUFRaEIsVUFBVSxPQUFPUSxFQUFZUSxRQUV2RCxHQUFpQixlQUFiRCxJQUNGUCxFQUFZUyxXQUFXaEIsTUFDbkJPLEVBQVlTLFdBQVdqQixVQUFVLE9BQU9RLEVBQVlTLFdBRTFELEdBQWlCLGdCQUFiRixJQUNGUCxFQUFZVSxZQUFZakIsTUFDcEJPLEVBQVlVLFlBQVlsQixVQUMxQixPQUFPUSxFQUFZVSxZQUV2QixHQUFpQixZQUFiSCxJQUNGUCxFQUFZVyxRQUFRbEIsTUFDaEJPLEVBQVlXLFFBQVFuQixVQUFVLE9BQU9RLEVBQVlXLFFBRXZELEdBQWlCLGFBQWJKLElBQ0ZQLEVBQVlZLFNBQVNuQixNQUNqQk8sRUFBWVksU0FBU3BCLFVBQVUsT0FBT1EsRUFBWVksU0FFeEQsR0FBaUIsYUFBYkwsSUFDRlAsRUFBWWEsU0FBU3BCLE1BQ2pCTyxFQUFZYSxTQUFTckIsVUFBVSxPQUFPUSxFQUFZYSxTQUV4RCxHQUFpQixjQUFiTixJQUNGUCxFQUFZYyxVQUFVckIsTUFDbEJPLEVBQVljLFVBQVV0QixVQUFVLE9BQU9RLEVBQVljLFVBRXpELEdBQWlCLGVBQWJQLElBQ0ZQLEVBQVllLFdBQVd0QixNQUNuQk8sRUFBWWUsV0FBV3ZCLFVBQVUsT0FBT1EsRUFBWWUsV0FFMUQsR0FBaUIsZUFBYlIsSUFDRlAsRUFBWWdCLFdBQVd2QixNQUNuQk8sRUFBWWdCLFdBQVd4QixVQUFVLE9BQU9RLEVBQVlnQixXQUUxRCxHQUFpQixlQUFiVCxJQUNGUCxFQUFZaUIsV0FBV3hCLE1BQ25CTyxFQUFZaUIsV0FBV3pCLFVBQVUsT0FBT1EsRUFBWWlCLFVBRTVELENBRUEsSUFBZ0IsSUFBWlosRUFBa0IsS0FDeEIsR0E0QkFhLFlBekprQixDQUNsQkMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsS0FFQSxNQUFNeEIsRUFBYyxDQUNsQkksUUFBU1csRUFDVFYsV0FBWVcsRUFDWlYsWUFBYVcsRUFDYlYsUUFBU1csRUFDVFYsU0FBVVcsRUFDVlYsU0FBVVcsRUFDVlYsVUFBV1csRUFDWFYsV0FBWVcsRUFDWlYsV0FBWVcsRUFDWlYsV0FBWVcsR0F1QmQsTUFBTyxDQUNMcEIsUUFyQmN0QixFQUFLLEVBQUcsRUFBR2tCLEVBQVlJLFNBc0JyQ0MsV0FwQmlCdkIsRUFBSyxFQUFHLEVBQUdrQixFQUFZSyxZQXFCeENDLFlBbkJrQnhCLEVBQUssRUFBRyxFQUFHa0IsRUFBWU0sYUFvQnpDQyxRQWxCY3pCLEVBQUssRUFBRyxFQUFHa0IsRUFBWU8sU0FtQnJDQyxTQWpCZTFCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVEsVUFrQnRDQyxTQWhCZTNCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVMsVUFpQnRDQyxVQWZnQjVCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVUsV0FnQnZDQyxXQWRpQjdCLEVBQUssRUFBRyxFQUFHa0IsRUFBWVcsWUFleENDLFdBYmlCOUIsRUFBSyxFQUFHLEVBQUdrQixFQUFZWSxZQWN4Q0MsV0FaaUIvQixFQUFLLEVBQUcsRUFBR2tCLEVBQVlhLFlBYXhDYixjQUNELEVBaUdEUixrQkFDQUMsaUJBQ0FnQyxVQTVCaUI3QixJQW9CakIsU0FuQm9COEIsRUFtQkY5QixHQWhCTlEsUUFBUS9CLGdCQUFpQnFELEVBQU10QixRQUFRaEIsVUFDN0NzQyxFQUFNckIsV0FBV2hDLGdCQUFpQnFELEVBQU1yQixXQUFXakIsVUFDbkRzQyxFQUFNcEIsWUFBWWpDLGdCQUFpQnFELEVBQU1wQixZQUFZbEIsVUFDckRzQyxFQUFNbkIsUUFBUWxDLGdCQUFpQnFELEVBQU1uQixRQUFRbkIsVUFDN0NzQyxFQUFNbEIsU0FBU25DLGdCQUFpQnFELEVBQU1sQixTQUFTcEIsVUFDL0NzQyxFQUFNakIsU0FBU3BDLGdCQUFpQnFELEVBQU1qQixTQUFTckIsVUFDL0NzQyxFQUFNaEIsVUFBVXJDLGdCQUFpQnFELEVBQU1oQixVQUFVdEIsVUFDakRzQyxFQUFNZixXQUFXdEMsZ0JBQWlCcUQsRUFBTWYsV0FBV3ZCLFVBQ25Ec0MsRUFBTWQsV0FBV3ZDLGdCQUFpQnFELEVBQU1kLFdBQVd4QixVQUNuRHNDLEVBQU1iLFdBQVd4QyxnQkFBaUJxRCxFQUFNYixXQUFXekIsVUFadEMsSUFBQ3NDLENBbUJVLEVBUy9CLEVBSUosRUF4TG1CLEdBMExkQyxFQUFjLE1BQ2xCLE1BQU1DLEVBQW1CLENBQUNDLEVBQU9DLEVBQWVsRSxLQUM5QyxJQUFJbUUsRUFBUSxFQUNHLFFBQVhuRSxJQUFrQm1FLEVBQVEsR0FFOUIsTUFBTUMsRUFBY3pFLFNBQVNDLHVCQUF1QnFFLEdBQU9FLEdBRXZEQyxJQUMyQkEsRUFBWUMsYUFBbkIsSUFBbEJILEVBQW1ELElBRTNCLElBRTlCLEVBR0lJLEVBQXNCLENBQUNMLEVBQU9qRSxLQUNsQyxJQUFJbUUsRUFBUSxFQUNHLFFBQVhuRSxJQUFrQm1FLEVBQVEsR0FFOUIsTUFBTUksRUFBYXJGLEVBQVlDLGFBQWE4RSxHQUV0QzNELEVBQVVYLFNBQVNDLHVCQUF1QjJFLEdBQVlKLEdBRXhEN0QsR0FBU0EsRUFBUWtFLFlBQVlsRSxFQUFRbUUsV0FBVSxHQUFNLEVBU3JEQyxFQUFrQnJELElBQ3RCLE1BQU1zRCxFQUFrQixHQUN4QixJQUFLLElBQUl2RSxFQUFJLEVBQUdBLEVBQUlpQixFQUFPaEIsT0FBUUQsS0FSZDZELEVBU0Q1QyxFQUFPakIsSUFSakIsR0FBSyxHQUFLNkQsRUFBTSxHQUFLLEdBQUtBLEVBQU0sR0FBSyxHQUFLQSxFQUFNLEdBQUssR0FRL0JVLEVBQWdCNUQsS0FBS00sRUFBT2pCLElBVHhDLElBQUM2RCxFQVdyQixPQUFPVSxDQUFlLEVBR2xCQyxFQUFlQyxJQUNuQixNQUFNeEQsRUFBUyxHQUVUeUQsRUFBSyxDQUFDRCxFQUFVLEdBQUssRUFBR0EsRUFBVSxJQUNsQ0UsRUFBTyxDQUFDRixFQUFVLEdBQUssRUFBR0EsRUFBVSxJQUNwQ0csRUFBUSxDQUFDSCxFQUFVLEdBQUlBLEVBQVUsR0FBSyxHQUN0Q0ksRUFBTyxDQUFDSixFQUFVLEdBQUlBLEVBQVUsR0FBSyxHQUkzQyxPQUZBeEQsRUFBT04sS0FBSytELEVBQUlDLEVBQU1DLEVBQU9DLEdBRXRCNUQsQ0FBTSxFQUdUNkQsRUFBZSxDQUNuQkMsRUFDQUMsRUFDQXRCLEVBQ0E5RCxFQUNBNkIsS0FFQSxNQUFNd0QsRUFBZSxHQUVyQixHQUE2QixpQkFBbEJGLEVBQVcsR0FDcEIsSUFBSyxJQUFJL0UsRUFBSSxFQUFHQSxFQUFJK0UsRUFBVzlFLE9BQVFELElBQ3JDaUYsRUFBYXRFLEtBQUs2RCxFQUFZTyxFQUFXL0UsVUFHM0NpRixFQUFhdEUsS0FBSzZELEVBQVlPLElBR2hDLE1BQU1HLEVBQW1CWixFQUFlVyxFQUFhRSxRQUVyRCxJQUFLLElBQUluRixFQUFJLEVBQUdBLEVBQUlrRixFQUFpQmpGLE9BQVFELElBQ3RDbEIsRUFBWWEsZ0JBQWdCOEIsRUFBZ0J5RCxFQUFpQmxGLE1BRWhFNEQsRUFBaUJzQixFQUFpQmxGLElBQUksRUFBT0osR0FDN0NzRSxFQUFvQmdCLEVBQWlCbEYsR0FBSUosR0FDekNvRixFQUFlRSxFQUFpQmxGLEdBQUkwRCxHQUV4QyxFQUdJMEIsRUFBaUJDLElBQ3JCLE1BQU1DLEVBQVUsR0FFVkMsRUFBVSxDQUFDRixFQUFLLEdBQUssRUFBR0EsRUFBSyxHQUFLLEdBQ2xDRyxFQUFVLENBQUNILEVBQUssR0FBSyxFQUFHQSxFQUFLLElBQU0sR0FDbkNJLEVBQVUsQ0FBQ0osRUFBSyxHQUFLLEVBQUdBLEVBQUssR0FBSyxHQUNsQ0ssRUFBVSxDQUFDTCxFQUFLLEdBQUssRUFBR0EsRUFBSyxHQUFLLEdBSXhDLE9BRkFDLEVBQVEzRSxLQUFLNEUsRUFBU0MsRUFBU0MsRUFBU0MsR0FFakNKLENBQU8sRUFHVkssRUFBZ0IsQ0FBQ2xCLEVBQVdPLEVBQWdCcEYsS0FDaEQsTUFBTTBGLEVBQVVGLEVBQWNYLEdBRXhCbUIsRUFBZXRCLEVBQWVnQixHQUVwQyxJQUFLLElBQUl0RixFQUFJLEVBQUdBLEVBQUk0RixFQUFhM0YsT0FBUUQsSUFDdkM0RCxFQUFpQmdDLEVBQWE1RixJQUFJLEVBQU9KLEdBQ3pDc0UsRUFBb0IwQixFQUFhNUYsR0FBSUosR0FDckNvRixFQUFlWSxFQUFhNUYsSUFBSSxFQUNsQyxFQXlKRixNQUFPLENBQ0w2RixPQXhJYSxDQUFDQyxFQUFNQyxLQUNwQixNQUFNQyxFQUFhRixFQUViRyxFQUFlRixFQUVmRyxFQUFjckYsRUFBWVUsWUFFMUJLLEVBQWNzRSxFQUFZcEQsZUFBZWlELEdBa0IvQyxNQUFPLENBQ0xDLGFBQ0FDLGVBQ0FDLGNBQ0F0RSxjQUNBRixjQXJCcUJULElBQ3JCLE1BQU1rRixFQUFpQkQsRUFBWXhFLGNBQWNULEVBQVFXLEdBRXJEdUUsSUFFRnJILEVBQVlxQixhQUFhZ0csRUFBZ0IsR0FDekNyQixFQUNFcUIsRUFBZTlGLGNBQ2Y2RixFQUFZeEUsY0FDWkUsRUFDQSxTQUNBc0UsRUFBWXpFLGdCQUVoQixFQVNELEVBMEdEMkUsVUF0R2dCLENBQUNDLEVBQWFDLEtBQzlCLE1BQU1DLEVBQWNGLEVBRWRHLEVBQVlGLEVBRVpHLEVBQVc1RixFQUFZVSxZQUV2Qm1GLEVBQVdELEVBQVMzRCxlQUFld0QsR0FpQm5DSyxFQUFVLEdBQ1ZDLEVBQVlMLEVBQVlMLFlBQVkxRSxnQkFDcENxRixFQUFtQk4sRUFBWUwsWUFBWXpFLGVBMkIzQ3FGLEVBQWUsQ0FBQzdGLEVBQVE4RixLQUU1QixNQUFNQyxFQUFhQyxHQUFRQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXSCxHQUNoREksRUFBZSxDQUFDTCxFQUFVLElBQUtBLEVBQVUsS0FFekNNLEVBQWV0RixJQUNuQnVFLEVBQVk3RSxjQUFjTSxHQUV0QmxELEVBQVlhLGdCQUFnQmtILEVBQWtCN0UsSUFDaEQ0QixFQUFpQjVCLEdBQWEsRUFBTSxVQUNwQzJELEVBQWMzRCxFQUFhOEUsRUFBYyxVQUN6Q0gsRUFBUWhHLEtBQUtxQixJQUVOLElBR1QyRSxFQUFRaEcsS0FBS3FCLEdBQ2I0QixFQUFpQjVCLEdBQWEsRUFBTyxXQUM5QixJQUdULE9BQ0VsRCxFQUFZYSxnQkFBZ0JpSCxFQUFXUyxLQUN0QixJQUFqQk4sRUFFT0QsSUFFTDdGLEVBQ0txRyxFQUFZckcsR0FFakIwRixFQUFRLElBQU1FLEVBQWlCLElBQzVCRixFQUFRQSxFQUFRMUcsT0FBUyxLQUFPNEcsRUFBaUJBLEVBQWlCNUcsT0FBUyxHQXhEN0QsRUFBQ1gsRUFBYzBGLEVBQWdCdUMsS0FFcEQsTUFFTTdDLEVBQUssQ0FBQ3BGLEVBQWEsR0FBSyxFQUFHQSxFQUFhLElBQ3hDcUYsRUFBTyxDQUFDckYsRUFBYSxHQUFLLEVBQUdBLEVBQWEsSUFDMUNzRixFQUFRLENBQUN0RixFQUFhLEdBQUlBLEVBQWEsR0FBSyxHQUM1Q3VGLEVBQU8sQ0FBQ3ZGLEVBQWEsR0FBSUEsRUFBYSxHQUFLLEdBTTNDa0ksRUExRmdCLEVBQUN2RyxFQUFRd0csS0FFakMsTUFBTUMsRUFBVyxHQUVYQyxFQUFhRixFQUFXRyxRQUFPMUgsUUFBdUIySCxJQUFaM0gsSUFFaEQsSUFBSyxJQUFJRixFQUFJLEVBQUdBLEVBQUlpQixFQUFPaEIsT0FBUUQsSUFBSyxDQUN0QyxNQUFNVixFQUFlMkIsRUFBT2pCLEdBQ3ZCbEIsRUFBWWEsZ0JBQWdCZ0ksRUFBWXJJLElBQWVvSSxFQUFTL0csS0FBS3JCLEVBQzVFLENBRUEsT0FBT29JLEdBK0VtQkksQ0FGRHhELEVBRlAsQ0FBQ0ksRUFBSUMsRUFBTUMsRUFBT0MsSUFJd0IrQixHQUUxRCxPQUErQixJQUEzQlksRUFBZ0J2SCxPQUNYK0UsRUFBZXVDLEdBS2pCdkMsRUFGY3dDLEdBakJGUCxFQWlCNEJPLEVBQWdCdkgsT0FqQnBDaUgsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV0gsTUFBcEMsSUFBQ0EsQ0FtQmUsRUFvQ3ZCYyxDQUFlbEIsRUFBaUJBLEVBQWlCNUcsT0FBUyxHQUFJNkcsRUFBY08sR0FFaEZDLEVBQVlELEVBQWEsRUFJbEMsTUFBTyxDQUNMUCxlQUNBTCxXQUNBQyxXQUNBRixZQUNBOUUsY0F2RnFCTSxJQUNyQixNQUFNbUUsRUFBaUJNLEVBQVMvRSxjQUFjTSxFQUFhMEUsR0FFdkRQLElBRUZySCxFQUFZcUIsYUFBYWdHLEVBQWdCLEdBQ3pDckIsRUFDRXFCLEVBQWU5RixjQUNmb0csRUFBUy9FLGNBQ1RnRixFQUNBLE1BQ0FELEVBQVNoRixnQkFFYixFQTJFRCxFQU1EbUMsbUJBQ0ErQixnQkFDQWIsZUFDQU0sZ0JBQ0FaLGNBQ0FGLGlCQUVILEVBM1FtQixHQTZRZDBELEVBQ1ksQ0FBQ2hDLEVBQVlDLEVBQWNPLEtBQ3pDLE1BQU1YLEVBQVNsQyxFQUFZa0MsT0FBT0csRUFBWUMsR0FJOUMsTUFBTyxDQUFFSixTQUFRTyxVQUZDekMsRUFBWXlDLFVBQVVQLEVBQVFXLEdBRXBCLEVBTTFCeUIsRUFBVyxNQUNmLE1BNkNNQyxFQUFVLENBQUNDLEVBQU9DLEtBQ3RCLE1BQU1DLEVBQWdCRCxFQUFTdkMsT0FBT2pFLFlBQVlJLFlBRTVDc0csRUFBZ0JGLEVBQVNoQyxVQUFVTSxTQUFTMUUsWUFFNUM4RSxFQUFnQmpELEdBQVV1RSxFQUFTdkMsT0FBT25FLGNBQWNtQyxHQUV4RDBFLEVBQWExRSxHQUFVdUUsRUFBU2hDLFVBQVUxRSxjQUFjbUMsR0FFeEQyRSxFQUFnQixDQUFDQyxFQUFZaEUsRUFBV08sS0FFNUMsSUFBSWxCLEdBQWdCLEVBQ3BCLEdBQUloRixFQUFZYSxnQkFBZ0JtQyxPQUFPNEcsT0FBT0QsR0FBYWhFLEdBSXpELE9BRkFPLEVBQWVQLEdBQ2ZYLEdBQWdCLEdBQ1QsRUFHVCxJQUFLLElBQUk5RCxFQUFJLEVBQUdBLEVBQUl5SSxFQUFXeEksT0FBUUQsSUFBSyxDQUUxQyxNQUFNSyxFQUFnQm9JLEVBQVd6SSxHQUNqQyxHQUFJbEIsRUFBWWEsZ0JBQWdCVSxFQUFlb0UsR0FBWSxDQUN6RE8sRUFBZVAsR0FDZlgsR0FBZ0IsRUFFaEIsS0FDRixDQUNGLENBQ0EsT0FBT0EsQ0FBYSxFQU1oQjZFLEVBQXNCLENBQUNsRSxFQUFXTyxLQUN0Q0EsRUFBZVAsSUFDUixHQUdIbUUsRUFBaUJDLElBQ3JCLE1BQU1DLEVBQWNELEVBQUVqSixPQUFPbUosY0FBYzVKLFVBRXJDNkosRUFBWUgsRUFBRWpKLE9BQU9ULFVBRXJCc0YsRUFBWTNGLEVBQVl3QixhQUFhMEksR0FFM0MsR0FBb0IsV0FBaEJGLEVBQTBCLENBRzVCLE1BQU1HLEVBQWNuSCxPQUFPNEcsT0FBT0wsR0FBZVQsUUFDOUMzRyxRQUFzQjRHLElBQVg1RyxLQUc4QyxJQUF4RHVILEVBQWNTLEVBQWF4RSxFQUFXcUMsSUFDeENuRCxFQUFZQyxpQkFBaUJvRixHQUFXLEVBQU0sVUFDOUNyRixFQUFZZ0MsY0FBY2xCLEVBQVdxQyxFQUFjLFlBRW5ENkIsRUFBb0JsRSxFQUFXcUMsR0FDL0JuRCxFQUFZQyxpQkFBaUJvRixHQUFXLEVBQU8sVUFFbkQsQ0FFQSxHQUFvQixXQUFoQkYsRUFBMEIsQ0FDNUIsTUFBTUcsRUFBY25ILE9BQU80RyxPQUFPSixHQUFlVixRQUM5QzNHLFFBQXNCNEcsSUFBWDVHLEtBRzJDLElBQXJEdUgsRUFBY1MsRUFBYXhFLEVBQVc4RCxJQUN4QzVFLEVBQVlDLGlCQUFpQm9GLEdBQVcsRUFBTSxPQUM5Q3JGLEVBQVlnQyxjQUFjbEIsRUFBVzhELEVBQVcsU0FFaERJLEVBQW9CbEUsRUFBVzhELEdBQy9CNUUsRUFBWUMsaUJBQWlCb0YsR0FBVyxFQUFPLE9BRW5ELEdBRUYsSUFBSyxJQUFJaEosRUFBSSxFQUFHQSxFQUFJbUksRUFBTWxJLE9BQVFELElBQ2hDbUksRUFBTW5JLEdBQUdrSixpQkFBaUIsUUFBU04sRUFBZSxDQUFFTyxNQUFNLEdBQzVELEVBOFNJQyxFQUFjQyxJQUNsQixHQUFJQSxFQUFVLENBQ1osTUFBTUMsRUFBcUJELEVBQVN6QixRQUNqQzJCLEdBQXdCLGlCQUFWQSxFQUFHLEtBR2RDLEVBQWdCSCxFQUFTekIsUUFBUTJCLEdBQXdCLGlCQUFWQSxFQUFHLEtBSXhELE9BRnNCRCxFQUFtQm5FLE9BQU9zRSxPQUFPRCxFQUd6RCxHQUdJRSxFQUFrQmpGLElBQ3RCLE1BQU1rRixFQUFnQnRFLElBQ3BCLE1BQU11RSxFQUFtQixJQUNwQmpHLEVBQVl5QixjQUFjQyxNQUMxQjFCLEVBQVlhLFlBQVlhLEdBQzNCQSxHQUdGLE9BQU8xQixFQUFZVyxlQUFlc0YsRUFBaUIsRUFHL0MzSSxFQUFTLEdBRWYsR0FBNEIsaUJBQWpCd0QsRUFBVSxHQUFpQixDQUVwQyxNQUFNb0YsRUFBV0YsRUFBYWxGLEdBTTlCLE9BTEF4RCxFQUFPTixRQUFRa0osR0FJUSxJQUZBLElBQUlDLElBQUk3SSxFQUFPOEksS0FBS3RKLEdBQU1YLEtBQUtDLFVBQVVVLE9BRXJCc0osS0FBS3RKLEdBQU1YLEtBQUtrSyxNQUFNdkosSUFFbkUsQ0FFQSxJQUFLLElBQUlULEVBQUksRUFBR0EsRUFBSXlFLEVBQVV4RSxPQUFRRCxJQUFLLENBQ3pDLE1BQ002SixFQUFXRixFQURJbEYsRUFBVXpFLElBRy9CaUIsRUFBT04sUUFBUWtKLEVBQ2pCLENBS0EsTUFGdUIsSUFGQSxJQUFJQyxJQUFJN0ksRUFBTzhJLEtBQUt0SixHQUFNWCxLQUFLQyxVQUFVVSxPQUVyQnNKLEtBQUt0SixHQUFNWCxLQUFLa0ssTUFBTXZKLElBRTVDLEVBcUlqQndKLEVBQWUsQ0FBQzdKLEVBQU04SixLQVUxQixJQUVJQyxFQUNBQyxFQUhBQyxFQUFXLENBQUNqSyxFQUFLa0ssWUFLckIsSUFBSyxJQUFJdEssRUFBSSxFQUFHQSxFQUFJSSxFQUFLYSxPQUFPaEIsT0FBUyxFQUFHRCxJQUFLLENBQ3BCLE1BZHZCa0ssRUFDRTlKLEVBQUthLE9BQU8sR0FBRyxHQUFLLElBQU1iLEVBQUthLE9BQU8sR0FBRyxHQUFXLElBQ2pELElBRUxiLEVBQUthLE9BQU8sR0FBRyxHQUFLLElBQU1iLEVBQUthLE9BQU8sR0FBRyxHQUFXLElBQ2pELE1BVUxrSixFQUFPRSxFQUFTckssR0FBRyxHQUNuQm9LLEVBQU9DLEVBQVNySyxHQUFHLEdBQUssSUFFeEJtSyxFQUFPRSxFQUFTckssR0FBRyxHQUFLLEVBQ3hCb0ssRUFBT0MsRUFBU3JLLEdBQUcsSUFFckIsTUFBTXVLLEVBQVcsQ0FBQ0osRUFBTUMsR0FFeEJDLEVBQVdBLEVBQVNaLE9BQU8sQ0FBQ2MsR0FDOUIsQ0FDQSxPQUFPRixDQUFRLEVBR1hHLEVBQWdCLENBQUNDLEVBQVV4SixLQUMvQixNQUFNeUosRUFBYSxJQUFJekosR0FJdkIsT0FGQXlKLEVBQVdDLE9BQU9GLEVBQVNHLGVBQWdCLEVBQUdILEVBQVN4SixRQUVoRHlKLENBQVUsRUFlYkcsRUFBbUIsQ0FBQ0osRUFBVTlDLEtBQ2xDLElBQUltRCxHQUFVLEVBRWQsTUFBTUMsRUFBaUJOLEVBQVN4SixRQUUxQixlQUFFMkosR0FBbUJILEVBRXJCTyxFQUFpQixJQUFJckQsR0FFM0JxRCxFQUFlSixHQUFrQixHQUVqQyxNQUFNSyxFQUFpQjdCLEVBQVc0QixHQUVsQyxHQUNFckgsRUFBWVcsZUFBZXlHLEdBQWdCOUssU0FDM0M4SyxFQUFlOUssT0FFZixPQUFPMEgsRUFFVCxHQUFpQyxpQkFBdEJvRCxFQUFlLEdBQ3BCak0sRUFBWWEsZ0JBQWdCc0wsRUFBZ0JGLEtBQzlDRCxHQUFVLFFBRVosSUFBSyxJQUFJOUssRUFBSSxFQUFHQSxFQUFJK0ssRUFBZTlLLE9BQVFELElBQ3JDbEIsRUFBWWEsZ0JBQWdCc0wsRUFBZ0JGLEVBQWUvSyxNQUM3RDhLLEdBQVUsR0FJaEIsTUFBTUksRUFBaUJ4QixFQUFlcUIsR0FFdEMsT0FBZ0IsSUFBWkQsR0FDRkUsRUFBZUosR0FBa0JNLEVBQzFCRixHQUVGckQsQ0FBVSxFQXdGYndELEVBQWtCLENBQUNDLEVBQWEvTCxLQUNwQyxJQUFJQyxFQUNKLElBQUssSUFBSVUsRUFBSSxFQUFHQSxFQUFJb0wsRUFBWW5MLE9BQVFELElBR3BDVixFQUY0QixpQkFBbkI4TCxFQUFZcEwsR0FFTmxCLEVBQVlDLGFBQWFxTSxHQUN0QnRNLEVBQVlDLGFBQWFxTSxFQUFZcEwsSUFFbENULFNBQVNDLHVCQUF1QkYsR0FBYyxHQUN0REcsTUFBTTRMLFlBQWNoTSxDQUNyQyxFQVlJaU0sRUFBcUIsSUFDekIvTCxTQUFTQyx1QkFBdUIsZ0JBQWdCLEdBQUcrTCxjQUUvQ0MsRUFBdUIsQ0FBQ0MsRUFBVzFGLEtBQ3ZDLE1BQU1xRixFQUFjckYsRUFBWTBGLEdBS2hDLE1BbEIyQixFQUFDMUYsRUFBYTFHLEtBQ3pDLE1BQU13QyxFQUFla0UsRUFFckIsSUFBSyxJQUFJL0YsRUFBSSxFQUFHQSxFQUFJNkIsRUFBYTVCLE9BQVFELElBQUssQ0FDNUMsTUFBTW9MLEVBQWN2SixFQUFhN0IsR0FDakNtTCxFQUFnQkMsRUFVZ0IsUUFUbEMsR0FTQU0sQ0FBcUIzRixHQUNyQm9GLEVBQWdCQyxFQUFhLHFCQUV0QkEsQ0FBVyxFQUdkTyxFQUFzQixDQUFDdkIsRUFBTUQsRUFBTWxKLEVBQVEySyxLQUMvQyxNQUFNQyxFQUFhLENBQUNqTCxPQUFPd0osR0FBT3hKLE9BQU91SixJQUNuQzJCLEVBQWdCdk0sU0FBU0MsdUJBQXVCLGdCQUFnQixHQVN0RSxPQU5Bb00sRUFBV0csZ0JBQWdCLEdBQzNCSCxFQUFXSSxZQUFZLEVBQUdGLEVBQWU3SyxHQUN6Q3VLLEVBQXFCRixJQUFzQnJLLEdBRTNDa0ssRUFBZ0JVLEVBQVksVUFFckJBLENBQVUsRUFHYkksRUFBcUIsQ0FDekJSLEVBQ0E1SCxFQUNBa0MsRUFDQTRCLEVBQ0F1RSxFQUNBTixLQUVBLE1BQU1uQixFQUFXLENBQ2Z4SixPQUFROEUsRUFBWTBGLEdBQ3BCbkIsV0FBWXpHLEVBQ1orRyxlQUFnQmEsR0FHWlUsRUFBaUJsQyxFQUFhUSxHQUFVLEdBSXhDMkIsRUFBa0IsQ0FDdEJuTCxPQUFRa0wsRUFDUjdCLFdBQVk2QixFQUFlLEdBQzNCdkIsZUFBZ0JhLEdBR1pZLEVBQWEsQ0FBQ0MsRUFBU0MsRUFBZUMsRUFBV0MsS0FDckQsR0FBSTVCLEVBQWlCeUIsRUFBU0MsS0FBbUJBLEVBRS9DLE9BREFFLEVBQVFDLGVBQWUsR0FDaEJSLEVBRUwxQixFQUFjOEIsRUFBU0UsSUFDdkIsRUFDQTNCLEVBQWlCeUIsRUFBU0MsSUFDMUIsRUFFSixFQVVGLE1BUHlDLGlCQUE5QnhHLEVBQVkwRixHQUFXLElBRWhDaEIsRUFBU3hKLE9BQVN3SixFQUFTSCxXQUMzQitCLEVBQVc1QixFQUFVOUMsRUFBWTVCLEVBQWE2RixJQUU5Q1MsRUFBV0QsRUFBaUJ6RSxFQUFZNUIsRUFBYTZGLEdBRWhELENBQUVTLGFBQVksRUFpR3ZCLE1BQU8sQ0FDTE0sVUEzMEJnQixDQUNoQkMsRUFDQUMsRUFDQTVHLEVBQ0FPLEtBRUEsTUFBTXNHLEVBQWM5RSxFQUFhLFVBQVcvQixFQUFjTyxHQVUxRCxNQVJpQyxlQUE3Qm9HLEVBQWV6TixXQUNqQitJLEVBQVEwRSxFQUFlRyxXQUFZRCxHQUdKLGVBQTdCRCxFQUFlMU4sV0FDakIrSSxFQUFRMkUsRUFBZUUsV0FBWUQsR0FHOUIsQ0FBRUEsY0FBYUYsaUJBQWdCQyxpQkFBZ0IsRUE0ekJ0REcsWUEzOEJrQixDQUFDQyxFQUFPQyxLQUNQLENBQUNDLElBQ2xCLE1BQU1DLEVBQWFqRCxJQUNqQixHQWtCTyxLQWxCSEEsRUFBSixDQUVBLElBQUssSUFBSW5LLEVBQUksRUFBR0EsRUFnQlQsR0FoQm1CQSxJQUFLLENBQzdCLE1BQU1xTixFQUFjOU4sU0FBUytOLGNBQWMsT0FDM0NELEVBQVlsTyxVQUFZLEdBQUdnTCxLQUFRbkssSUFFbkMsTUFBTXVOLEVBQWVoTyxTQUFTK04sY0FBYyxPQUM1Q0MsRUFBYXBPLFVBQVksR0FBR2dMLEtBQVFuSyxJQUVoQ2lOLEdBQU9BLEVBQU1PLFlBQVlILEdBQ3pCSCxHQUFPQSxFQUFNTSxZQUFZRCxFQUMvQixDQUVBSCxFQUFVakQsRUFBTyxFQWJRLENBYU4sRUFFckJpRCxFQUFVLEVBQUUsRUFHZEssRUFBYyxFQXU3QmRDLGVBMXpCcUIsS0FDckIsTUFvQ00xQixFQUFjLENBQUMyQixFQUFhQyxFQUFXM00sS0FDM0MsTUFBTTRNLEVBQU90TyxTQUFTK04sY0FBYyxPQWNwQyxPQWJBTyxFQUFLMU8sVUFBWSxRQUFRd08sSUFDekJDLEVBQVVKLFlBQVlLLEdBRUYsSUFBaEJGLEVBQW1CMUYsRUFBUytFLFlBQVlhLEVBQU0sTUFFaEQ1RixFQUFTK0UsWUFBWSxLQUFNYSxHQUd6QjVNLElBQ0Y0TSxFQUFLMU8sVUFBWSxhQWxDSCxFQUFDa0IsRUFBZWpCLEtBQ2hDLE1BQU02QixFQWRXLENBQUN1TCxJQUNsQixNQUFNc0IsRUFBcUIsR0FFM0IsSUFBSyxJQUFJOU4sRUFBSSxFQUFHQSxFQUFJd00sRUFBVXZNLE9BQVFELElBQUssQ0FDekMsTUFBTWlCLEVBQVN1TCxFQUFVeE0sR0FFQSxpQkFBZGlCLEVBQU8sR0FBaUI2TSxFQUFtQm5OLFFBQVFNLEdBRXpENk0sRUFBbUJuTixLQUFLTSxFQUMvQixDQUNBLE9BQU82TSxDQUFrQixFQUlWMUUsQ0FBVy9JLEdBRTFCLElBQUssSUFBSUwsRUFBSSxFQUFHQSxFQUFJaUIsRUFBT2hCLE9BQVFELElBQ2pDbEIsRUFBWUksaUJBQ1ZKLEVBQVlDLGFBQWFrQyxFQUFPakIsSUFDaENaLEVBQ0EsUUFFSixFQTBCRTJPLENBQVU5TSxFQUFRME0sSUFHYkUsQ0FBSSxFQW9MYixNQUFPLENBQ0xHLFFBbExjLENBQUNMLEVBQWExTSxLQUM1QixNQUFNZ04sRUFBZ0IxTyxTQUFTK04sY0FBYyxXQUM3Q1csRUFBYzlPLFVBQVksaUJBRTFCLE1BQU0rTyxFQUFPM08sU0FBUzRPLGNBQWMsUUFDaENELEdBQU1BLEVBQUtWLFlBQVlTLEdBRTNCLE1BQU1HLEVBQWlCN08sU0FBUytOLGNBQWMsT0FDOUNjLEVBQWVqUCxVQUFZLGtCQUV2QjhPLEdBQWVBLEVBQWNULFlBQVlZLEdBRTdDLE1BQU10SSxFQUFPdkcsU0FBUytOLGNBQWMsTUFDcEN4SCxFQUFLN0IsWUFBYyxZQUFZMEosU0FDL0JTLEVBQWVaLFlBQVkxSCxHQUUzQixNQUFNdUksRUFBYzlPLFNBQVMrTixjQUFjLE9BUzNDLE9BUkFlLEVBQVlsUCxVQUFZLGVBbE1OLEVBQUNtUCxFQUFZQyxLQUNqQyxNQUFNQyxFQUFrQmpQLFNBQVMrTixjQUFjLFdBQ3pDbUIsRUFBa0JsUCxTQUFTK04sY0FBYyxXQUUvQ2tCLEVBQWdCRSxVQUFVQyxJQUFJLEtBQzlCRixFQUFnQkMsVUFBVUMsSUFBSSxLQUU5QixJQUFLLElBQUkzTyxFQUFJLEVBQUdBLEdBQUssRUFBR0EsSUFBSyxDQUMzQixNQUFNRSxFQUFVWCxTQUFTK04sY0FBYyxPQUN2Q3BOLEVBQVErRCxZQUFjakUsRUFDdEJ5TyxFQUFnQmpCLFlBQVl0TixHQUU1QixNQUFNME8sRUFBV3JQLFNBQVMrTixjQUFjLE9BQ3hDc0IsRUFBUzNLLFlBQWNqRSxFQUN2QndPLEVBQWdCaEIsWUFBWW9CLEVBQzlCLENBRUFOLEVBQVdkLFlBQVlnQixHQUN2QkQsRUFBV2YsWUFBWWlCLEVBQWdCLEVBa0xyQ0ksQ0FBY1QsRUFBZ0JDLEdBRTlCRCxFQUFlWixZQUFZYSxHQUVkckMsRUFBWTJCLEVBQWFVLEVBQWFwTixFQUV4QyxFQTBKWHlMLGVBaE5zQjNJLElBQ3RCLE1BQU1rSyxFQUNKMU8sU0FBU0MsdUJBQXVCLGtCQUFrQnVFLEdBQ2hEa0ssR0FBZUEsRUFBY2EsUUFBUSxFQThNekNDLFdBVmlCLEtBNUJNLE1BQ3ZCLE1BQU1DLEVBQWdCelAsU0FBUytOLGNBQWMsT0FDN0MwQixFQUFjTixVQUFVQyxJQUFJLGtCQUU1QixNQUFNUCxFQUNKN08sU0FBU0MsdUJBQXVCLG1CQUFtQixHQUVqRDRPLEdBQWdCQSxFQUFlWixZQUFZd0IsRUFBYyxFQXNCN0RDLEdBbkJ5QixNQUN6QixNQUFNQyxFQUFlM1AsU0FBUytOLGNBQWMsVUFDNUM0QixFQUFhL1AsVUFBWSxnQkFDekIrUCxFQUFhakwsWUFBYyxZQUMzQixNQUFNa0wsRUFDSjVQLFNBQVNDLHVCQUF1QixrQkFBa0IsR0FDaEQyUCxHQUFpQkEsRUFBZ0IzQixZQUFZMEIsRUFBYSxFQWM5REUsR0FoSnFCLE1BQ3JCLE1BQU1DLEVBQWM5UCxTQUFTK04sY0FBYyxVQUMzQytCLEVBQVlsUSxVQUFZLGVBQ3hCa1EsRUFBWXBMLFlBQWMsYUFDMUIsTUFBTWtMLEVBQ0o1UCxTQUFTQyx1QkFBdUIsa0JBQWtCLEdBQ2hEMlAsR0FBaUJBLEVBQWdCM0IsWUFBWTZCLEVBQVksRUEySTdEQyxHQVp5QixNQUN6QixNQUFNQyxFQUFrQmhRLFNBQVMrTixjQUFjLFVBQy9DaUMsRUFBZ0JwUSxVQUFZLG1CQUM1Qm9RLEVBQWdCdEwsWUFBYyxZQUM5QixNQUFNa0wsRUFDSjVQLFNBQVNDLHVCQUF1QixrQkFBa0IsR0FDaEQyUCxHQUFpQkEsRUFBZ0IzQixZQUFZK0IsRUFBZ0IsRUFPakVDLEVBQW9CLEVBT3BCQyxlQWhKcUIsS0FDckIsTUFBTXhCLEVBQ0oxTyxTQUFTQyx1QkFBdUIsa0JBQWtCLEdBRTlDa1EsRUFBYW5RLFNBQVMrTixjQUFjLFNBQzFDb0MsRUFBV2hCLFVBQVVDLElBQUksb0JBQ3pCZSxFQUFXQyxRQUFVLGVBQ3JCRCxFQUFXekwsWUFBYyxvQkFDekJnSyxFQUFjVCxZQUFZa0MsR0FFMUIsTUFBTUUsRUFBZ0JyUSxTQUFTK04sY0FBYyxVQUM3Q3NDLEVBQWNsQixVQUFVQyxJQUFJLGdCQUM1QmUsRUFBV2xDLFlBQVlvQyxHQUV2QixNQUFNQyxFQUFldFEsU0FBUytOLGNBQWMsT0FDNUN1QyxFQUFhbkIsVUFBVUMsSUFBSSxpQkFDM0JlLEVBQVdsQyxZQUFZcUMsR0FFdkIsTUFBTUMsRUFBU3ZRLFNBQVMrTixjQUFjLFNBQ3RDd0MsRUFBT3BCLFVBQVVDLElBQUksZ0JBQ3JCa0IsRUFBYXJDLFlBQVlzQyxHQUV6QixNQUFNQyxFQUFZeFEsU0FBUytOLGNBQWMsS0FDekN5QyxFQUFVckIsVUFBVUMsSUFBSSxjQUN4Qm9CLEVBQVU5TCxZQUFjLElBQ3hCNEwsRUFBYXJDLFlBQVl1QyxHQUV6QixNQUFNQyxFQUFTelEsU0FBUytOLGNBQWMsU0FDdEMwQyxFQUFPdEIsVUFBVUMsSUFBSSxnQkFDckJrQixFQUFhckMsWUFBWXdDLEdBRXpCLE1BQU1DLEVBQWUxUSxTQUFTK04sY0FBYyxVQUM1QzJDLEVBQWF2QixVQUFVQyxJQUFJLGdCQUMzQnNCLEVBQWFoTSxZQUFjLFFBQzNCeUwsRUFBV2xDLFlBQVl5QyxHQUV2QixNQUFNQyxFQUFVM1EsU0FBUytOLGNBQWMsVUFDdkM0QyxFQUFRQyxNQUFRLFVBQ2hCRCxFQUFRak0sWUFBYyxVQUN0QjJMLEVBQWNwQyxZQUFZMEMsR0FFMUIsTUFBTUUsRUFBVTdRLFNBQVMrTixjQUFjLFVBQ3ZDOEMsRUFBUUQsTUFBUSxjQUNoQkMsRUFBUW5NLFlBQWMsZUFDdEIyTCxFQUFjcEMsWUFBWTRDLEdBRTFCLE1BQU1DLEVBQVU5USxTQUFTK04sY0FBYyxVQUN2QytDLEVBQVFGLE1BQVEsY0FDaEJFLEVBQVFwTSxZQUFjLGVBQ3RCMkwsRUFBY3BDLFlBQVk2QyxHQUUxQixNQUFNQyxFQUFVL1EsU0FBUytOLGNBQWMsVUFDdkNnRCxFQUFRSCxNQUFRLFdBQ2hCRyxFQUFRck0sWUFBYyxZQUN0QjJMLEVBQWNwQyxZQUFZOEMsR0FFMUIsTUFBTUMsRUFBVWhSLFNBQVMrTixjQUFjLFVBQ3ZDaUQsRUFBUUosTUFBUSxXQUNoQkksRUFBUXRNLFlBQWMsWUFDdEIyTCxFQUFjcEMsWUFBWStDLEdBRTFCLE1BQU1DLEVBQVVqUixTQUFTK04sY0FBYyxVQUN2Q2tELEVBQVFMLE1BQVEsV0FDaEJLLEVBQVF2TSxZQUFjLFlBQ3RCMkwsRUFBY3BDLFlBQVlnRCxHQUUxQixNQUFNQyxFQUFVbFIsU0FBUytOLGNBQWMsVUFDdkNtRCxFQUFRTixNQUFRLGFBQ2hCTSxFQUFReE0sWUFBYyxjQUN0QjJMLEVBQWNwQyxZQUFZaUQsR0FFMUIsTUFBTUMsRUFBVW5SLFNBQVMrTixjQUFjLFVBQ3ZDb0QsRUFBUVAsTUFBUSxhQUNoQk8sRUFBUXpNLFlBQWMsY0FDdEIyTCxFQUFjcEMsWUFBWWtELEdBRTFCLE1BQU1DLEVBQVVwUixTQUFTK04sY0FBYyxVQUN2Q3FELEVBQVFSLE1BQVEsYUFDaEJRLEVBQVExTSxZQUFjLGNBQ3RCMkwsRUFBY3BDLFlBQVltRCxHQUUxQixNQUFNQyxFQUFXclIsU0FBUytOLGNBQWMsVUFDeENzRCxFQUFTVCxNQUFRLGFBQ2pCUyxFQUFTM00sWUFBYyxjQUN2QjJMLEVBQWNwQyxZQUFZb0QsR0FHMUIsTUFBTUMsRUFBUyxRQUNUQyxFQUFpQkMsS0FDaEIsR0FBR0EsRUFBTW5SLE9BQU91USxRQUFRWSxFQUFNQyxNQUFNQyxNQUFNSixLQUM3Q0UsRUFBTUcsaUJBQ05ILEVBQU1JLG1CQUNDLEdBTVhuQixFQUFPb0IsYUFBYSxZQUFhLEtBQ2pDdEIsRUFBT3NCLGFBQWEsWUFBYSxLQUNqQ3RCLEVBQU81RyxpQkFBaUIsV0FBWTRILEdBQ3BDZCxFQUFPOUcsaUJBQWlCLFdBQVk0SCxFQUFhLEVBNENqRDlFLGNBQ0FELGdCQTlNdUJoSSxJQUN2QixNQUFNc04sRUFBWTlSLFNBQVNDLHVCQUF1QixjQUFjdUUsR0FDNURzTixHQUFXQSxFQUFVdkMsUUFBUSxFQTZNbEMsRUE0a0JEd0MsUUEvaUJjLEtBQ2QsTUFBTUMsRUFBY2hTLFNBQVNDLHVCQUF1QixVQUFVLEdBRXhEZ1MsRUFBY2pTLFNBQVNDLHVCQUF1QixVQUFVLEdBSTFEK1IsR0FBYUEsRUFBWW5OLFlBQVltTixFQUFZbE4sV0FBVSxJQUUzRG1OLEdBQWFBLEVBQVlwTixZQUFZb04sRUFBWW5OLFdBQVUsR0FBTSxFQXVpQnJFb04sWUExa0JrQixDQUFDQyxFQUFRQyxLQUMzQixNQUFNQyxFQUFPclMsU0FBUzRPLGNBQWMsUUFFOUIwRCxFQUFRdFMsU0FBUytOLGNBQWMsVUFDckN1RSxFQUFNbkQsVUFBVUMsSUFBSSxTQUNwQmlELEVBQUtwRSxZQUFZcUUsR0FFakIsTUFBTUMsRUFBWXZTLFNBQVMrTixjQUFjLE9BQ3pDdUUsRUFBTXJFLFlBQVlzRSxHQUloQkEsRUFBVTdOLFlBRlAwTixFQUVxQixHQUFHRCxvQkFGUSxtQkFBbUJBLGNBS3hELE1BQU1LLEVBQW1CeFMsU0FBUytOLGNBQWMsVUFDaER5RSxFQUFpQjlOLFlBQWMsV0FJL0I4TixFQUFpQjdJLGlCQUFpQixTQUZmLElBQU04SSxPQUFPQyxTQUFTQyxXQUd6Q0wsRUFBTXJFLFlBQVl1RSxHQUVkRixHQUFPQSxFQUFNTSxXQUFXLEVBb2pCNUJDLFVBbGZnQixLQUNoQixNQUFNcEwsRUFBYUMsR0FBUUMsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV0gsR0FTaERvTCxFQUFrQixDQUFDQyxFQUFhbkYsRUFBTW9GLEtBQzFDLEdBQUlBLEVBQWdCLENBQ2xCLE1BQU1DLEVBQWlCLENBQUNELEVBQWUsR0FBSyxFQUFHQSxFQUFlLElBQ3hERSxFQUFtQixDQUFDRixFQUFlLEdBQUlBLEVBQWUsR0FBSyxHQUVqRSxNQUFvQixNQUFoQkQsRUFBNEJFLEVBRXpCQyxDQUNULENBRUEsSUFBSXBMLEVBV0osT0FQRUEsRUFEa0IsTUFBaEJpTCxFQUNhLENBQUN0TCxFQUFVLEdBQUttRyxHQUFPbkcsRUFBVSxLQUVqQyxDQUFDQSxFQUFVLElBQUtBLEVBQVUsR0FBS21HLElBR25DLElBQVRBLElBQVk5RixFQUFlLENBQUNMLEVBQVUsSUFBS0EsRUFBVSxNQUVsREssQ0FBWSxFQUdmcUwsRUFBZSxDQUFDdkYsRUFBTXhGLEtBQzFCLE1BQU1jLEVBQWEsR0FFYjZKLEVBL0JTLElBRkF0TCxFQUFVLEdBRUEsSUFDbEIsSUFnQ0QyTCxFQUFnQnZKLEVBQVd6QixHQUUzQmlMLEVBQW1CLEtBQ3ZCLE1BQU0zUixFQUFTb1IsRUFBZ0JDLEVBQWFuRixHQUV2Q3JPLEVBQVlhLGdCQUFnQmdULEVBQWUxUixHQUd6QzJSLElBRExuSyxFQUFXOUgsS0FBS00sRUFDTyxFQUczQixJQUFLLElBQUlqQixFQUFJLEVBQUdBLEVBQUltTixFQUFNbk4sSUFBSyxDQUM3QixNQUFNdVMsRUFBaUI5SixFQUFXQSxFQUFXeEksT0FBUyxHQUNoRGdCLEVBQVNvUixFQUFnQkMsRUFBYW5GLEVBQU1vRixHQUU5Q0EsRUFDRjlKLEVBQVc5SCxLQUFLTSxHQUNYMlIsR0FDVCxDQUdBLEdBQTBCLElBQXRCbkssRUFBV3hJLE9BQWMsQ0FDM0IsSUFBSTZLLEdBQVUsRUFFZCxJQUFLLElBQUkvRyxFQUFRLEVBQUdBLEVBQVEwRSxFQUFXeEksT0FBUThELElBQVMsQ0FDdEQsTUFBTTdELEVBQVV1SSxFQUFXMUUsR0FDdkJqRixFQUFZYSxnQkFBZ0JnVCxFQUFlelMsS0FDN0M0SyxHQUFVLEVBQ2QsQ0FFQSxPQUFnQixJQUFaQSxFQUEwQjRILEVBQWF2RixFQUFNd0YsR0FFMUNsSyxDQUNULENBR0EsT0FBT0EsRUFBVyxFQUFFLEVBb0R0QixNQUFPLENBQUVvSyxlQWpEYyxLQUNyQixNQUFNbEwsRUFBYSxHQUVidkYsRUFBVXNRLEVBQWEsRUFBRy9LLEdBQ2hDQSxFQUFXaEgsS0FBSytJLEVBQWV0SCxJQUUvQixNQUFNQyxFQUFhcVEsRUFBYSxFQUFHL0ssR0FDbkNBLEVBQVdoSCxLQUFLK0ksRUFBZXJILElBRS9CLE1BQU1DLEVBQWNvUSxFQUFhLEVBQUcvSyxHQUNwQ0EsRUFBV2hILEtBQUsrSSxFQUFlcEgsSUFFL0IsTUFBTUMsRUFBVW1RLEVBQWEsRUFBRy9LLEdBQ2hDQSxFQUFXaEgsS0FBSytJLEVBQWVuSCxJQUUvQixNQUFNQyxFQUFXa1EsRUFBYSxFQUFHL0ssR0FDakNBLEVBQVdoSCxLQUFLK0ksRUFBZWxILElBRS9CLE1BQU1DLEVBQVdpUSxFQUFhLEVBQUcvSyxHQUNqQ0EsRUFBV2hILEtBQUsrSSxFQUFlakgsSUFFL0IsTUFBTUMsRUFBWWdRLEVBQWEsRUFBRy9LLEdBQ2xDQSxFQUFXaEgsS0FBSytJLEVBQWVoSCxJQUUvQixNQUFNQyxFQUFhK1AsRUFBYSxFQUFHL0ssR0FDbkNBLEVBQVdoSCxLQUFLK0ksRUFBZS9HLElBRS9CLE1BQU1DLEVBQWE4UCxFQUFhLEVBQUcvSyxHQUNuQ0EsRUFBV2hILEtBQUsrSSxFQUFlOUcsSUFFL0IsTUFBTUMsRUFBYTZQLEVBQWEsRUFBRy9LLEdBZ0JuQyxPQWZBQSxFQUFXaEgsS0FBSytJLEVBQWU3RyxJQWV4QixDQUFFNUIsT0FiTSxDQUNibUIsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsR0FHZThFLGFBQVksRUFHTitLLGVBQWNoSixpQkFBZ0IsRUFvWHZEb0osWUFoUmtCLENBQUM3UixFQUFRMEcsRUFBWTVELEVBQU9tSSxFQUFhTixLQUMzRCxNQUFNM0MsRUFBY2hJLEVBQU8yRyxRQUFRMkIsR0FBd0IsaUJBQVZBLEVBQUcsS0FDOUN2SCxFQUFjb0gsRUFBV0gsR0FFekI4SixFQUFVbEssSUFDZCxNQUFNbUssRUFBZW5LLEVBQUVqSixPQUFPVCxVQUV4QjhULEVBaEJZLEVBQUNwUCxFQUFPa0MsS0FFNUIsSUFBSyxJQUFJL0YsRUFBSSxFQUFHQSxFQUFJK0YsRUFBWTlGLE9BQVFELElBQUssQ0FDM0MsTUFBTXdNLEVBQVl6RyxFQUFZL0YsR0FDeEJrVCxFQUFhLENBQUMxRyxFQUFXeE0sR0FDL0IsR0FBSWxCLEVBQVlhLGdCQUFnQjZNLEVBQVczSSxHQUFRLE9BQU9xUCxDQUM1RCxHQVVvQkMsQ0FDaEJyVSxFQUFZd0IsYUFBYTBTLEdBQ3pCL0osR0FHSXdCLEVBQVcsQ0FDZnhKLE9BQVFnUyxFQUFVLEdBQ2xCM0ksV0FBWTJJLEVBQVUsR0FBRyxHQUN6QnJJLGVBQWdCcUksRUFBVSxJQUs1QixHQUZBeEksRUFBU3hKLE9BQVNnSixFQUFhUSxHQUUzQkksRUFBaUJKLEVBQVU5QyxLQUFnQkEsRUFBWSxDQUd6RCxNQUFNeUwsRUFDSjdULFNBQVNDLHVCQUF1QixvQkFBb0IsR0FHdEQsT0FGQW9NLEVBQVdjLGVBQWUsR0FFbkJSLEVBQ0wxQixFQUFjQyxFQUFVeEosSUFDeEIsRUFDQTRKLEVBQWlCSixFQUFVOUMsR0FDM0J5TCxFQUVKLENBQ0EsTUE3RnFCLENBQUNuUyxJQUN4QixJQUFLLElBQUlqQixFQUFJLEVBQUdBLEVBQUlpQixFQUFPaEIsT0FBUUQsSUFBSyxDQUN0QyxNQUFNTyxFQUFhekIsRUFBWUMsYUFBYWtDLEVBQU9qQixJQUM3Q3FULEVBQWU5VCxTQUFTQyx1QkFBdUJlLEdBQVksR0FDakU4UyxFQUFhM0UsVUFBVUMsSUFBSSxvQkFDM0IyRSxZQUFXLEtBRVRELEVBQWEzRSxVQUFVSSxPQUFPLG1CQUFtQixHQUNoRCxJQUNMLEdBb0ZTeUUsQ0FBaUJOLEVBQVUsR0FBRyxFQUd2QyxJQUFLLElBQUlqVCxFQUFJLEVBQUdBLEVBQUlnQyxFQUFZL0IsT0FBUUQsSUFBSyxDQUUzQyxNQUFNd1QsRUFBZTFVLEVBQVlDLGFBQWFpRCxFQUFZaEMsSUFDcERFLEVBQVVYLFNBQVNDLHVCQUF1QmdVLEdBQWN6UCxHQUMxRDdELEdBQVNBLEVBQVFnSixpQkFBaUIsUUFBUzZKLEVBQ2pELEdBdU9BOUksZUFDQWdDLHFCQUNBd0gsb0JBL0MwQixDQUMxQnhTLEVBQ0F5UyxFQUNBL0wsRUFDQWlFLEVBQ0ErSCxFQUNBQyxFQUNBQyxLQUVBLE1BQU14RSxFQUFjOVAsU0FBU0MsdUJBQXVCLGdCQUFnQixHQUM5RHNVLEVBQWtCdlUsU0FBU0MsdUJBQXVCLGlCQUFpQixHQUNuRStQLEVBQ0poUSxTQUFTQyx1QkFBdUIsb0JBQW9CLEdBRWxEc1UsR0FDRkEsRUFBZ0I1SyxpQkFBaUIsU0FBUyxLQS9LeEIsRUFBQ25GLEVBQU82UCxFQUFvQmhJLEtBQ2hEQSxFQUFXYyxlQStLTyxHQTlLbEIsTUFBTTJGLEVBQWtCcEssRUFBU21LLFlBQVlTLGlCQUc3Q2UsRUFGd0J2QixFQUFnQnBSLFFBRUosRUFEZG9SLEVBQWdCMUssV0FDbUIsRUEyS3JEb00sQ0FBYyxFQUFHSCxFQUFvQmhJLEVBQVcsSUFHaEQyRCxJQUNGQSxFQUFnQnJHLGlCQUNkLFNBQ0EsS0FDRTBDLEVBQVc2RCxpQkFoRkksRUFDckJ4TyxFQUNBMEcsRUFDQWlNLEVBQ0FoSSxLQUVBLE1BQU1vSSxFQUNKelUsU0FBU0MsdUJBQXVCLGdCQUFnQixHQUM5Q3dVLEdBQ0ZBLEVBQWtCOUssaUJBQWlCLFNBQVMsS0FDMUMsTUFBTStLLEVBQWUxVSxTQUFTQyx1QkFBdUIsZ0JBQy9DMFUsRUFBWSxDQUNoQnRULE9BQU9xVCxFQUFhLEdBQUc5RCxPQUN2QnZQLE9BQU9xVCxFQUFhLEdBQUc5RCxRQUV6QmxFLEVBQ0VYLElBQ0E0SSxFQUNBalQsRUFDQTBHLEVBQ0FpTSxFQUNBaEksRUFDRCxJQUdMLE1BQU11SSxFQUFjNVUsU0FBU0MsdUJBQXVCLGdCQUFnQixHQUNwRTJMLEVBQWdCbEssRUFBTyxHQUFJLHFCQUN2QmtULEdBQ0ZBLEVBQVlqTCxpQkFBaUIsU0FBUyxLQUNwQyxNQUFNa0wsRUFDSjdVLFNBQVNDLHVCQUF1QixnQkFBZ0IsR0FBRytMLGNBQ3JEQyxFQUFxQjRJLEVBQWtCblQsRUFBTyxJQUdsRCxNQUFNb1QsRUFBYTlVLFNBQVNDLHVCQUF1QixnQkFBZ0IsR0FDN0Q4VSxFQUFjL1UsU0FBU0MsdUJBQXVCLGdCQUFnQixHQUVwRTZVLEVBQVduTCxpQkFBaUIsU0FBUyxLQUMvQm1MLEVBQVdsRSxPQUFTbUUsRUFBWW5FLE9BQ2xDeEUsRUFDRTBJLEVBQVdsRSxNQUNYbUUsRUFBWW5FLE1BQ1psUCxFQUNBMkssRUFDRCxJQUVMMEksRUFBWXBMLGlCQUFpQixTQUFTLEtBQ2hDbUwsRUFBV2xFLE9BQVNtRSxFQUFZbkUsT0FDbEN4RSxFQUNFMEksRUFBV2xFLE1BQ1htRSxFQUFZbkUsTUFDWmxQLEVBQ0EySyxFQUNELEdBQ0gsRUEyQkkySSxDQUFldFQsRUFBUTBHLEVBQVlpTSxFQUFvQmhJLEVBQVcsR0FFcEUsQ0FBRXpDLE1BQU0sSUFFTndLLEdBQWVwRSxFQUFnQmlGLFNBR2pDbkYsR0FDRkEsRUFBWW5HLGlCQUFpQixTQUFTLEtBQ3BDMkssRUFBUzVTLEVBQVF5UyxFQUFZOUgsRUFBVyxHQUN4QyxFQWVQLEVBdDlCZ0IsR0F3OUJBLE1BQ2YsTUFBTTZJLEVBQVksQ0FBQ0MsRUFBU0MsS0FDMUIsTUFBTUMsRUFBZUYsRUFBUTlTLFlBRXZCaVQsRUFBZUYsRUFBUWpPLFNBRXZCb08sRUFBYSxLQUNqQixJQUFJQyxHQUFhLEVBaUJqQixPQWhCa0JKLEVBQVE3TixnQkFJcEI0TixFQUFReE8sWUFBWXpDLFVBQVVtUixLQUNoQzNNLEVBQVNxSixVQUNUckosRUFBU3dKLFlBQVksV0FBVyxHQUNoQ3NELEdBQWEsR0FHYkosRUFBUWxPLFNBQVNoRCxVQUFVb1IsS0FDN0I1TSxFQUFTcUosVUFDVHJKLEVBQVN3SixZQUFZLFdBQ3JCc0QsR0FBYSxHQUdSQSxDQUFVLEVBa0JuQixNQUFPLENBQUVDLFNBYlNDLElBQ2hCLElBQUssSUFBSWpWLEVBQUksRUFBR0EsRUFBSWlWLEVBQWFsSSxXQUFXOU0sT0FBUUQsSUFDckNpVixFQUFhbEksV0FBVy9NLEdBQ2hDa0osaUJBQ0gsU0FDQSxLQUNFNEwsR0FBWSxHQUVkLENBQUUzTCxNQUFNLEdBRVosRUFHaUIsRUFHZitMLEVBQWUsQ0FBQ2pVLEVBQVF5UyxFQUFZOUgsS0FDeEMsSUFBSXVKLEVBRUosR0FBSXZKLEVBQVksQ0FHZCxHQUZBQSxFQUFXYyxlQUFlLElBRVAsSUFBZmdILEVBQXFCLENBQ3ZCLE1BQU1sTixFQUFZeUIsRUFBU21LLFlBQVlTLGlCQUFpQjVSLE9BQ3BEMkssSUFDRnVKLEVBQVVsTixFQUFTMEUsVUFDakJmLEVBQVdvQyxRQUFRLEVBQUcvTSxHQUN0QjJLLEVBQVdvQyxRQUFRLEdBQ25CL00sRUFDQXVGLEdBRU4sTUFDRTJPLEVBQVVsTixFQUFTMEUsVUFDakJmLEVBQVdvQyxRQUFRLEVBQUcvTSxHQUN0QjJLLEVBQVdvQyxRQUFRLEdBQ25CL00sRUFDQUEsR0FJSixNQUFNbVUsRUFBWUQsRUFBUXJJLFlBQVlqSCxPQUNoQ3dQLEVBQVNGLEVBQVFySSxZQUFZMUcsVUFDN0JrUCxFQUFjYixFQUFVVyxFQUFXQyxHQUNuQ0UsRUFBVUosRUFBUXRJLGVBS3hCLE9BRkE0SCxFQUFVVyxFQUFXQyxHQUFRTCxTQUFTTyxHQUUvQixDQUFFSCxZQUFXQyxTQUFRQyxjQUM5QixHQUdJMUIsRUFBcUIsQ0FDekIzUyxFQUNBeVMsRUFDQS9MLEVBQ0FnTSxLQUVBLE1BQU0vSCxFQUFhM0QsRUFBU3lGLGlCQWdCNUIsT0FkQTlCLEVBQVdvQyxRQUFRLEVBQUcvTSxHQUN0QjJLLEVBQVdtRCxhQUNYOUcsRUFBUzZLLFlBQVk3UixFQUFRMEcsRUFBWSxFQUFHaU0sRUFBb0JoSSxHQUNoRTNELEVBQVN3TCxvQkFDUHhTLEVBQ0F5UyxFQUNBL0wsRUFDQWlFLEVBQ0ErSCxFQUNBQyxFQUNBc0IsR0FJSyxDQUFFdEosYUFBWSxFQWF2QixNQUFPLENBQ0xzSixlQUNBTSxTQVplLEtBQ2YsTUFBTW5ELEVBQWtCcEssRUFBU21LLFlBQVlTLGlCQUN2Q3hMLEVBQWVnTCxFQUFnQnBSLFFBQy9CLFdBQUUwRyxHQUFlMEssRUFJdkIsT0FGQXVCLEVBQW1Cdk0sR0FBYyxFQUFPTSxHQUVqQyxDQUFFQSxhQUFZLEVBTXJCaU0scUJBRUgsRUF6SGdCLEdBMkhSNEIsVSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2xvYmFsTG9naWMgPSAoKCkgPT4ge1xuICAvLyB0aGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgaW4gYWxtb3N0IGV2ZXJ5IG90aGVyIG1vZHVsZSwgc28gaSBuZWVkIHRvIGhhdmUgdGhlbSBoZXJlIGluIG9yZGVyIHRvIGludm9rZSB0aGVtLlxuXG4gIGNvbnN0IGlzVGFyZ2V0SW5BcnJheSA9IChhcnIsIHRhcmdldCkgPT4ge1xuICAgIGxldCBjb250YWlucyA9IGZhbHNlO1xuXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFycikgPT09IEpTT04uc3RyaW5naWZ5KHRhcmdldCkpIGNvbnRhaW5zID0gdHJ1ZTtcblxuICAgIGlmICghYXJyKSByZXR1cm4gY29udGFpbnM7XG5cbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuIGNvbnRhaW5zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBhcnJbaV07XG5cbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShlbGVtZW50KSA9PT0gSlNPTi5zdHJpbmdpZnkodGFyZ2V0KSkgY29udGFpbnMgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWlucztcbiAgfTtcblxuICBjb25zdCBjbGFzc1RvQXJyYXkgPSAoY2xhc3NDb29yZCkgPT4ge1xuICAgIGNvbnN0IGFycmF5Q29vcmQgPSBbXTtcblxuICAgIGNvbnN0IHggPSBjbGFzc0Nvb3JkLnNsaWNlKDAsIDEpO1xuICAgIGNvbnN0IHkgPSBjbGFzc0Nvb3JkLnNsaWNlKDIsIDMpO1xuXG4gICAgYXJyYXlDb29yZC5wdXNoKE51bWJlcih4KSk7XG4gICAgYXJyYXlDb29yZC5wdXNoKE51bWJlcih5KSk7XG5cbiAgICByZXR1cm4gYXJyYXlDb29yZDtcbiAgfTtcblxuICBjb25zdCBjb29yZFRvQ2xhc3MgPSAoYXJyKSA9PiBgJHthcnIuc2xpY2UoMCwgMSl9LCR7YXJyLnNsaWNlKDEsIDIpfWA7XG5cbiAgY29uc3QgY2hhbmdlQ29vcmRDb2xvciA9IChjbGFzc05hbWUsIGdyaWROdW1iZXIsIGNvbG9yKSA9PiB7XG4gICAgY29uc3QgY3VycmVudENvb3JkID1cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKVtncmlkTnVtYmVyIC0gMV07XG5cbiAgICBpZiAoY3VycmVudENvb3JkKSBjdXJyZW50Q29vcmQuc3R5bGUuYm9yZGVyID0gYDFweCBzb2xpZCAke2NvbG9yfWA7XG4gIH07XG5cbiAgY29uc3QgaW5kaWNhdGVTdW5rID0gKHNoaXAsIGdyaWROdW1iZXIpID0+IHtcbiAgICBjb25zdCB7IGN1cnJlbnRDb29yZHMgfSA9IHNoaXA7XG5cbiAgICBpZiAodHlwZW9mIGN1cnJlbnRDb29yZHNbMF0gPT09IFwibnVtYmVyXCIpXG4gICAgICAvLyB3aGVuIHRoZSBzaGlwIG9ubHkgaGFzIG9uZSBjb29yZGluYXRlLlxuICAgICAgY2hhbmdlQ29vcmRDb2xvcihjb29yZFRvQ2xhc3MoY3VycmVudENvb3JkcyksIGdyaWROdW1iZXIsIFwicmVkXCIpO1xuICAgIGVsc2VcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudENvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjaGFuZ2VDb29yZENvbG9yKGNvb3JkVG9DbGFzcyhjdXJyZW50Q29vcmRzW2ldKSwgZ3JpZE51bWJlciwgXCJyZWRcIik7XG4gICAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpc1RhcmdldEluQXJyYXksXG4gICAgY2hhbmdlQ29vcmRDb2xvcixcbiAgICBpbmRpY2F0ZVN1bmssXG4gICAgY2xhc3NUb0FycmF5LFxuICAgIGNvb3JkVG9DbGFzcyxcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IG1haW5PYmplY3RzID0gKCgpID0+IHtcbiAgY29uc3QgU2hpcCA9IChsZW5ndGhOdW1iZXIsIGhpdHNOdW1iZXIsIGNvb3JkcykgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBjb29yZHM7XG5cbiAgICBjb25zdCBjaGVja1N1bmsgPSAobGVuZ3RoLCBoaXRzKSA9PiB7XG4gICAgICBpZiAobGVuZ3RoID09PSBoaXRzKSByZXR1cm4gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgbGV0IHNoaXBIaXRzID0gaGl0c051bWJlcjtcblxuICAgIGNvbnN0IHNoaXBMZW5ndGggPSBsZW5ndGhOdW1iZXI7XG5cbiAgICBjb25zdCBpc1N1bmsgPSAoKSA9PiBjaGVja1N1bmsoc2hpcExlbmd0aCwgc2hpcEhpdHMpO1xuXG4gICAgY29uc3QgaGl0ID0gKCkgPT4gc2hpcEhpdHMrKztcblxuICAgIGNvbnN0IGN1cnJlbnRIaXRzID0gKCkgPT4gc2hpcEhpdHM7XG5cbiAgICByZXR1cm4geyBpc1N1bmssIGhpdCwgY3VycmVudEhpdHMsIGN1cnJlbnRDb29yZHMsIHNoaXBMZW5ndGggfTtcbiAgfTtcblxuICBjb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgZGVwbG95U2hpcHMgPSAoXG4gICAgICBjYXJyaWVyQ29yZHMsXG4gICAgICBiYXR0bGVTaGlwQ29yZHMsXG4gICAgICBiYXR0bGVTaGlwMUNvcmRzLFxuICAgICAgY3J1aXNlckNvcmRzLFxuICAgICAgY3J1aXNlcjFDb3JkcyxcbiAgICAgIGNydWlzZXIyQ29yZHMsXG4gICAgICBkZXN0cm95ZXJDb3JkcyxcbiAgICAgIGRlc3Ryb3llcjFDb3JkcyxcbiAgICAgIGRlc3Ryb3llcjJDb3JkcyxcbiAgICAgIGRlc3Ryb3llcjNDb3Jkc1xuICAgICkgPT4ge1xuICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSB7XG4gICAgICAgIGNhcnJpZXI6IGNhcnJpZXJDb3JkcyxcbiAgICAgICAgYmF0dGxlU2hpcDogYmF0dGxlU2hpcENvcmRzLFxuICAgICAgICBiYXR0bGVTaGlwMTogYmF0dGxlU2hpcDFDb3JkcyxcbiAgICAgICAgY3J1aXNlcjogY3J1aXNlckNvcmRzLFxuICAgICAgICBjcnVpc2VyMTogY3J1aXNlcjFDb3JkcyxcbiAgICAgICAgY3J1aXNlcjI6IGNydWlzZXIyQ29yZHMsXG4gICAgICAgIGRlc3Ryb3llcjogZGVzdHJveWVyQ29yZHMsXG4gICAgICAgIGRlc3Ryb3llcjE6IGRlc3Ryb3llcjFDb3JkcyxcbiAgICAgICAgZGVzdHJveWVyMjogZGVzdHJveWVyMkNvcmRzLFxuICAgICAgICBkZXN0cm95ZXIzOiBkZXN0cm95ZXIzQ29yZHMsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjYXJyaWVyID0gU2hpcCg0LCAwLCBjb29yZGluYXRlcy5jYXJyaWVyKTtcblxuICAgICAgY29uc3QgYmF0dGxlU2hpcCA9IFNoaXAoMywgMCwgY29vcmRpbmF0ZXMuYmF0dGxlU2hpcCk7XG5cbiAgICAgIGNvbnN0IGJhdHRsZVNoaXAxID0gU2hpcCgzLCAwLCBjb29yZGluYXRlcy5iYXR0bGVTaGlwMSk7XG5cbiAgICAgIGNvbnN0IGNydWlzZXIgPSBTaGlwKDIsIDAsIGNvb3JkaW5hdGVzLmNydWlzZXIpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMSA9IFNoaXAoMiwgMCwgY29vcmRpbmF0ZXMuY3J1aXNlcjEpO1xuXG4gICAgICBjb25zdCBjcnVpc2VyMiA9IFNoaXAoMiwgMCwgY29vcmRpbmF0ZXMuY3J1aXNlcjIpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIgPSBTaGlwKDEsIDAsIGNvb3JkaW5hdGVzLmRlc3Ryb3llcik7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjEgPSBTaGlwKDEsIDAsIGNvb3JkaW5hdGVzLmRlc3Ryb3llcjEpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIyID0gU2hpcCgxLCAwLCBjb29yZGluYXRlcy5kZXN0cm95ZXIyKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMyA9IFNoaXAoMSwgMCwgY29vcmRpbmF0ZXMuZGVzdHJveWVyMyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNhcnJpZXIsXG4gICAgICAgIGJhdHRsZVNoaXAsXG4gICAgICAgIGJhdHRsZVNoaXAxLFxuICAgICAgICBjcnVpc2VyLFxuICAgICAgICBjcnVpc2VyMSxcbiAgICAgICAgY3J1aXNlcjIsXG4gICAgICAgIGRlc3Ryb3llcixcbiAgICAgICAgZGVzdHJveWVyMSxcbiAgICAgICAgZGVzdHJveWVyMixcbiAgICAgICAgZGVzdHJveWVyMyxcbiAgICAgICAgY29vcmRpbmF0ZXMsXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCByZWNlaXZlZEF0dGFja3MgPSBbXTtcblxuICAgIGNvbnN0IHN1Y2Nlc3NBdHRhY2tzID0gW107XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKHRhcmdldENvcmRzLCBwbGF5ZXJTaGlwcykgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFNoaXBzID0gT2JqZWN0LmVudHJpZXMocGxheWVyU2hpcHMuY29vcmRpbmF0ZXMpO1xuICAgICAgcmVjZWl2ZWRBdHRhY2tzLnB1c2godGFyZ2V0Q29yZHMpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTaGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHNoaXBDb3JkcyA9IGN1cnJlbnRTaGlwc1tpXVsxXTtcblxuICAgICAgICBjb25zdCBzaGlwTmFtZSA9IGN1cnJlbnRTaGlwc1tpXVswXTtcblxuICAgICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KHNoaXBDb3JkcywgdGFyZ2V0Q29yZHMpKSB7XG4gICAgICAgICAgc3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICBzdWNjZXNzQXR0YWNrcy5wdXNoKHRhcmdldENvcmRzKTtcblxuICAgICAgICAgIC8vIGlmIHRoZSB0YXJnZXQgY29yZHMgbWF0Y2hlcyBhIHNoaXAgY29yZHMuXG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImNhcnJpZXJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuY2Fycmllci5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5jYXJyaWVyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuY2FycmllcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImJhdHRsZVNoaXBcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuYmF0dGxlU2hpcC5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5iYXR0bGVTaGlwLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuYmF0dGxlU2hpcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImJhdHRsZVNoaXAxXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmJhdHRsZVNoaXAxLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmJhdHRsZVNoaXAxLmlzU3VuaygpKVxuICAgICAgICAgICAgICByZXR1cm4gcGxheWVyU2hpcHMuYmF0dGxlU2hpcDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJjcnVpc2VyXCIpIHtcbiAgICAgICAgICAgIHBsYXllclNoaXBzLmNydWlzZXIuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY3J1aXNlci5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmNydWlzZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzaGlwTmFtZSA9PT0gXCJjcnVpc2VyMVwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5jcnVpc2VyMS5oaXQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXJTaGlwcy5jcnVpc2VyMS5pc1N1bmsoKSkgcmV0dXJuIHBsYXllclNoaXBzLmNydWlzZXIxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiY3J1aXNlcjJcIikge1xuICAgICAgICAgICAgcGxheWVyU2hpcHMuY3J1aXNlcjIuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuY3J1aXNlcjIuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5jcnVpc2VyMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNoaXBOYW1lID09PSBcImRlc3Ryb3llclwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIuaGl0KCk7XG4gICAgICAgICAgICBpZiAocGxheWVyU2hpcHMuZGVzdHJveWVyLmlzU3VuaygpKSByZXR1cm4gcGxheWVyU2hpcHMuZGVzdHJveWVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiZGVzdHJveWVyMVwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIxLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmRlc3Ryb3llcjEuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiZGVzdHJveWVyMlwiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIyLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmRlc3Ryb3llcjIuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2hpcE5hbWUgPT09IFwiZGVzdHJveWVyM1wiKSB7XG4gICAgICAgICAgICBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIzLmhpdCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllclNoaXBzLmRlc3Ryb3llcjMuaXNTdW5rKCkpIHJldHVybiBwbGF5ZXJTaGlwcy5kZXN0cm95ZXIzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdWNjZXNzID09PSB0cnVlKSBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgY2hlY2tTdW5rID0gKHBsYXllclNoaXBzKSA9PiB7XG4gICAgICBjb25zdCBhcmVBbGxTdW5rID0gKHNoaXBzKSA9PiB7XG4gICAgICAgIC8vIGVpdGhlciB3ZSBkaWRuJ3QgZGVmaW5lZCB0aGUgY29yZHMgb2YgYSBzaGlwICh1bmRlZmluZWQpLCBvciBpdCBpcyBhY3R1YWxseSBzdW5rLCB3ZSB0YWtlIHRoYXQgYXMgdHJ1ZS5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICghc2hpcHMuY2Fycmllci5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNhcnJpZXIuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5iYXR0bGVTaGlwLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuYmF0dGxlU2hpcC5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmJhdHRsZVNoaXAxLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuYmF0dGxlU2hpcDEuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5jcnVpc2VyLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuY3J1aXNlci5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmNydWlzZXIxLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuY3J1aXNlcjEuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5jcnVpc2VyMi5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmNydWlzZXIyLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuZGVzdHJveWVyLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuZGVzdHJveWVyLmlzU3VuaygpKSAmJlxuICAgICAgICAgICghc2hpcHMuZGVzdHJveWVyMS5jdXJyZW50Q29vcmRzIHx8IHNoaXBzLmRlc3Ryb3llcjEuaXNTdW5rKCkpICYmXG4gICAgICAgICAgKCFzaGlwcy5kZXN0cm95ZXIyLmN1cnJlbnRDb29yZHMgfHwgc2hpcHMuZGVzdHJveWVyMi5pc1N1bmsoKSkgJiZcbiAgICAgICAgICAoIXNoaXBzLmRlc3Ryb3llcjMuY3VycmVudENvb3JkcyB8fCBzaGlwcy5kZXN0cm95ZXIzLmlzU3VuaygpKVxuICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGFyZUFsbFN1bmsocGxheWVyU2hpcHMpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVjZWl2ZUF0dGFjayxcbiAgICAgIGRlcGxveVNoaXBzLFxuICAgICAgcmVjZWl2ZWRBdHRhY2tzLFxuICAgICAgc3VjY2Vzc0F0dGFja3MsXG4gICAgICBjaGVja1N1bmssXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4geyBTaGlwLCBHYW1lYm9hcmQgfTtcbn0pKCk7XG5cbmNvbnN0IHBsYXllckxvZ2ljID0gKCgpID0+IHtcbiAgY29uc3QgdmlzdWFsSW5kaWNhdG9ycyA9IChjb29yZCwgd2FzU3VjY2Vzc2Z1bCwgdGFyZ2V0KSA9PiB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBpZiAodGFyZ2V0ID09PSBcImNwdVwiKSBpbmRleCA9IDE7XG5cbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY29vcmQpW2luZGV4XTtcblxuICAgIGlmIChjdXJyZW50Tm9kZSkge1xuICAgICAgaWYgKHdhc1N1Y2Nlc3NmdWwgPT09IGZhbHNlKSBjdXJyZW50Tm9kZS50ZXh0Q29udGVudCA9IFwi4oCiXCI7XG4gICAgICBlbHNlIHtcbiAgICAgICAgY3VycmVudE5vZGUudGV4dENvbnRlbnQgPSBcIlhcIjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlTm9kZUxpc3RlbmVycyA9IChjb29yZCwgdGFyZ2V0KSA9PiB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBpZiAodGFyZ2V0ID09PSBcImNwdVwiKSBpbmRleCA9IDE7XG5cbiAgICBjb25zdCBjb29yZGluYXRlID0gZ2xvYmFsTG9naWMuY29vcmRUb0NsYXNzKGNvb3JkKTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNvb3JkaW5hdGUpW2luZGV4XTtcblxuICAgIGlmIChlbGVtZW50KSBlbGVtZW50LnJlcGxhY2VXaXRoKGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgfTtcblxuICBjb25zdCB2YWxpZGF0ZUNvb3JkID0gKGNvb3JkKSA9PiB7XG4gICAgaWYgKGNvb3JkWzBdIDwgMCB8fCBjb29yZFsxXSA8IDAgfHwgY29vcmRbMF0gPiA5IHx8IGNvb3JkWzFdID4gOSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCB2YWxpZGF0ZUNvb3JkcyA9IChjb29yZHMpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0ZWRDb29yZHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbGlkYXRlQ29vcmQoY29vcmRzW2ldKSkgdmFsaWRhdGVkQ29vcmRzLnB1c2goY29vcmRzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRlZENvb3JkcztcbiAgfTtcblxuICBjb25zdCByZXR1cm5TaWRlcyA9IChub2RlQ29vcmQpID0+IHtcbiAgICBjb25zdCBjb29yZHMgPSBbXTtcblxuICAgIGNvbnN0IHVwID0gW25vZGVDb29yZFswXSAtIDEsIG5vZGVDb29yZFsxXV07XG4gICAgY29uc3QgZG93biA9IFtub2RlQ29vcmRbMF0gKyAxLCBub2RlQ29vcmRbMV1dO1xuICAgIGNvbnN0IHJpZ2h0ID0gW25vZGVDb29yZFswXSwgbm9kZUNvb3JkWzFdICsgMV07XG4gICAgY29uc3QgbGVmdCA9IFtub2RlQ29vcmRbMF0sIG5vZGVDb29yZFsxXSAtIDFdO1xuXG4gICAgY29vcmRzLnB1c2godXAsIGRvd24sIHJpZ2h0LCBsZWZ0KTtcblxuICAgIHJldHVybiBjb29yZHM7XG4gIH07XG5cbiAgY29uc3QgYXR0YWNrQXJvdW5kID0gKFxuICAgIG5vZGVDb29yZHMsXG4gICAgYXR0YWNrRnVuY3Rpb24sXG4gICAgc2hpcHMsXG4gICAgdGFyZ2V0LFxuICAgIHN1Y2Nlc3NBdHRhY2tzXG4gICkgPT4ge1xuICAgIGNvbnN0IGFyb3VuZENvb3JkcyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBub2RlQ29vcmRzWzBdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJvdW5kQ29vcmRzLnB1c2gocmV0dXJuU2lkZXMobm9kZUNvb3Jkc1tpXSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhcm91bmRDb29yZHMucHVzaChyZXR1cm5TaWRlcyhub2RlQ29vcmRzKSk7IC8vIHdoZW4gdGhlIHNoaXAgaGFzIG9ubHkgb25lIGNvb3JkLlxuICAgIH1cblxuICAgIGNvbnN0IGZsYXRBcm91bmRDb29yZHMgPSB2YWxpZGF0ZUNvb3Jkcyhhcm91bmRDb29yZHMuZmxhdCgpKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmxhdEFyb3VuZENvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoc3VjY2Vzc0F0dGFja3MsIGZsYXRBcm91bmRDb29yZHNbaV0pKSB7XG4gICAgICAgIC8vIGF2b2lkIG1vZGlmeWluZyBzdWNjZXNzZnVsIGF0dGFja3MuXG4gICAgICAgIHZpc3VhbEluZGljYXRvcnMoZmxhdEFyb3VuZENvb3Jkc1tpXSwgZmFsc2UsIHRhcmdldCk7XG4gICAgICAgIHJlbW92ZU5vZGVMaXN0ZW5lcnMoZmxhdEFyb3VuZENvb3Jkc1tpXSwgdGFyZ2V0KTtcbiAgICAgICAgYXR0YWNrRnVuY3Rpb24oZmxhdEFyb3VuZENvb3Jkc1tpXSwgc2hpcHMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXR1cm5Db3JuZXJzID0gKG5vZGUpID0+IHtcbiAgICBjb25zdCBjb3JuZXJzID0gW107XG5cbiAgICBjb25zdCBjb3JuZXIxID0gW25vZGVbMF0gKyAxLCBub2RlWzFdICsgMV07XG4gICAgY29uc3QgY29ybmVyMiA9IFtub2RlWzBdICsgMSwgbm9kZVsxXSArIC0xXTtcbiAgICBjb25zdCBjb3JuZXIzID0gW25vZGVbMF0gLSAxLCBub2RlWzFdICsgMV07XG4gICAgY29uc3QgY29ybmVyNCA9IFtub2RlWzBdIC0gMSwgbm9kZVsxXSAtIDFdO1xuXG4gICAgY29ybmVycy5wdXNoKGNvcm5lcjEsIGNvcm5lcjIsIGNvcm5lcjMsIGNvcm5lcjQpO1xuXG4gICAgcmV0dXJuIGNvcm5lcnM7XG4gIH07XG5cbiAgY29uc3QgYXR0YWNrQ29ybmVycyA9IChub2RlQ29vcmQsIGF0dGFja0Z1bmN0aW9uLCB0YXJnZXQpID0+IHtcbiAgICBjb25zdCBjb3JuZXJzID0gcmV0dXJuQ29ybmVycyhub2RlQ29vcmQpO1xuXG4gICAgY29uc3QgdmFsaWRDb3JuZXJzID0gdmFsaWRhdGVDb29yZHMoY29ybmVycyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbGlkQ29ybmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmlzdWFsSW5kaWNhdG9ycyh2YWxpZENvcm5lcnNbaV0sIGZhbHNlLCB0YXJnZXQpO1xuICAgICAgcmVtb3ZlTm9kZUxpc3RlbmVycyh2YWxpZENvcm5lcnNbaV0sIHRhcmdldCk7XG4gICAgICBhdHRhY2tGdW5jdGlvbih2YWxpZENvcm5lcnNbaV0sIHRydWUpO1xuICAgIH1cbiAgfTtcblxuXG4gIGNvbnN0IG5vdFJlcGVhdGVkQ29vcmRzID0gKGNvb3JkcywgZnVsbENvb3JkcykgPT4ge1xuXG4gICAgY29uc3Qgbm9SZXBlYXQgPSBbXVxuXG4gICAgY29uc3QgdXNlZENvb3JkcyA9IGZ1bGxDb29yZHMuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudCAhPT0gdW5kZWZpbmVkKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDb29yZCA9IGNvb3Jkc1tpXTtcbiAgICAgIGlmICghZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KHVzZWRDb29yZHMsIGN1cnJlbnRDb29yZCkpIG5vUmVwZWF0LnB1c2goY3VycmVudENvb3JkKVxuICAgIH1cblxuICAgIHJldHVybiBub1JlcGVhdFxuICB9XG5cbiAgY29uc3QgUGxheWVyID0gKG5hbWUsIHNoaXBzQ29vcmRzKSA9PiB7XG4gICAgY29uc3QgcGxheWVyTmFtZSA9IG5hbWU7XG5cbiAgICBjb25zdCBwbGF5ZXJDb29yZHMgPSBzaGlwc0Nvb3JkcztcblxuICAgIGNvbnN0IHBsYXllckJvYXJkID0gbWFpbk9iamVjdHMuR2FtZWJvYXJkKCk7XG5cbiAgICBjb25zdCBwbGF5ZXJTaGlwcyA9IHBsYXllckJvYXJkLmRlcGxveVNoaXBzKC4uLnNoaXBzQ29vcmRzKTtcblxuICAgIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgICBjb25zdCByZWNlaXZlZEF0dGFjayA9IHBsYXllckJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzLCBwbGF5ZXJTaGlwcyk7XG5cbiAgICAgIGlmIChyZWNlaXZlZEF0dGFjaykge1xuICAgICAgICAvLyBpZiByZWNlaXZlZEF0dGFjayBpcyBhIHRydWUgdmFsdWUsIGl0IG1lYW5zIHRoYXQgaXQgY29udGFpbnMgYSBzdW5rZWQgc2hpcC5cbiAgICAgICAgZ2xvYmFsTG9naWMuaW5kaWNhdGVTdW5rKHJlY2VpdmVkQXR0YWNrLCAxKTtcbiAgICAgICAgYXR0YWNrQXJvdW5kKFxuICAgICAgICAgIHJlY2VpdmVkQXR0YWNrLmN1cnJlbnRDb29yZHMsXG4gICAgICAgICAgcGxheWVyQm9hcmQucmVjZWl2ZUF0dGFjayxcbiAgICAgICAgICBwbGF5ZXJTaGlwcyxcbiAgICAgICAgICBcInBsYXllclwiLFxuICAgICAgICAgIHBsYXllckJvYXJkLnN1Y2Nlc3NBdHRhY2tzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBwbGF5ZXJOYW1lLFxuICAgICAgcGxheWVyQ29vcmRzLFxuICAgICAgcGxheWVyQm9hcmQsXG4gICAgICBwbGF5ZXJTaGlwcyxcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgfTtcbiAgfTtcblxuXG4gIGNvbnN0IGNwdVBsYXllciA9IChodW1hblBsYXllciwgc2hpcHNDb3JkcykgPT4ge1xuICAgIGNvbnN0IHJpdmFsUGxheWVyID0gaHVtYW5QbGF5ZXI7XG5cbiAgICBjb25zdCBjcHVDb29yZHMgPSBzaGlwc0NvcmRzO1xuXG4gICAgY29uc3QgY3B1Qm9hcmQgPSBtYWluT2JqZWN0cy5HYW1lYm9hcmQoKTtcblxuICAgIGNvbnN0IGNwdVNoaXBzID0gY3B1Qm9hcmQuZGVwbG95U2hpcHMoLi4uc2hpcHNDb3Jkcyk7XG5cbiAgICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgICBjb25zdCByZWNlaXZlZEF0dGFjayA9IGNwdUJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMsIGNwdVNoaXBzKTtcblxuICAgICAgaWYgKHJlY2VpdmVkQXR0YWNrKSB7XG4gICAgICAgIC8vIGlmIHJlY2VpdmVkQXR0YWNrIGlzIGEgdHJ1ZSB2YWx1ZSwgaXQgbWVhbnMgdGhhdCBpdCBjb250YWlucyBhIHN1bmtlZCBzaGlwLlxuICAgICAgICBnbG9iYWxMb2dpYy5pbmRpY2F0ZVN1bmsocmVjZWl2ZWRBdHRhY2ssIDIpO1xuICAgICAgICBhdHRhY2tBcm91bmQoXG4gICAgICAgICAgcmVjZWl2ZWRBdHRhY2suY3VycmVudENvb3JkcyxcbiAgICAgICAgICBjcHVCb2FyZC5yZWNlaXZlQXR0YWNrLFxuICAgICAgICAgIGNwdVNoaXBzLFxuICAgICAgICAgIFwiY3B1XCIsXG4gICAgICAgICAgY3B1Qm9hcmQuc3VjY2Vzc0F0dGFja3NcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNwdUhpdHMgPSBbXTsgLy8gdGhpcyBhcnJheSBkbyBub3QgY29udGFpbnMgY29ybmVySGl0cy5cbiAgICBjb25zdCByaXZhbEhpdHMgPSByaXZhbFBsYXllci5wbGF5ZXJCb2FyZC5yZWNlaXZlZEF0dGFja3NcbiAgICBjb25zdCByaXZhbFN1Y2Nlc3NIaXRzID0gcml2YWxQbGF5ZXIucGxheWVyQm9hcmQuc3VjY2Vzc0F0dGFja3M7XG5cbiAgICBjb25zdCB0cnlDbG9zZUF0dGFjayA9IChjdXJyZW50Q29vcmQsIGF0dGFja0Z1bmN0aW9uLCByYW5kb21Db29yZCkgPT4ge1xuXG4gICAgICBjb25zdCByYW5kb21JbnQgPSAobWF4KSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuICAgICAgLy8gZ2V0IHRoZSA0IHBvc3NpYmxlIHNpZGVzXG4gICAgICBjb25zdCB1cCA9IFtjdXJyZW50Q29vcmRbMF0gLSAxLCBjdXJyZW50Q29vcmRbMV1dO1xuICAgICAgY29uc3QgZG93biA9IFtjdXJyZW50Q29vcmRbMF0gKyAxLCBjdXJyZW50Q29vcmRbMV1dO1xuICAgICAgY29uc3QgcmlnaHQgPSBbY3VycmVudENvb3JkWzBdLCBjdXJyZW50Q29vcmRbMV0gKyAxXTtcbiAgICAgIGNvbnN0IGxlZnQgPSBbY3VycmVudENvb3JkWzBdLCBjdXJyZW50Q29vcmRbMV0gLSAxXTtcblxuICAgICAgY29uc3QgYXR0YWNrcyA9IFt1cCwgZG93biwgcmlnaHQsIGxlZnRdXG5cbiAgICAgIGNvbnN0IHJlbW92ZU91dE1vdmVzID0gdmFsaWRhdGVDb29yZHMoYXR0YWNrcylcblxuICAgICAgY29uc3QgcG9zc2libGVBdHRhY2tzID0gbm90UmVwZWF0ZWRDb29yZHMocmVtb3ZlT3V0TW92ZXMsIHJpdmFsSGl0cylcblxuICAgICAgaWYgKHBvc3NpYmxlQXR0YWNrcy5sZW5ndGggPT09IDApLy8gaWYgcG9zc2libGVBdHRhY2tzIGlzIHplcm8sIGl0IG1lYW5zIHRoYXQgd2UgY2FuJ3QgbWFrZSBhIGNsb3NlIGF0dGFjay5cbiAgICAgICAgcmV0dXJuIGF0dGFja0Z1bmN0aW9uKHJhbmRvbUNvb3JkKVxuXG4gICAgICAvLyBzZWxlY3QgYSByYW5kb20gc2lkZVxuICAgICAgY29uc3QgcmFuZG9tQ2hvaWNlID0gcG9zc2libGVBdHRhY2tzW3JhbmRvbUludChwb3NzaWJsZUF0dGFja3MubGVuZ3RoKV07XG5cbiAgICAgIHJldHVybiBhdHRhY2tGdW5jdGlvbihyYW5kb21DaG9pY2UpXG5cbiAgICB9XG5cbiAgICBjb25zdCBhdHRhY2tQbGF5ZXIgPSAoY29vcmRzLCBpZ25vcmVDb29yZHMpID0+IHtcblxuICAgICAgY29uc3QgcmFuZG9tSW50ID0gKG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcbiAgICAgIGNvbnN0IHJhbmRvbUNvb3JkcyA9IFtyYW5kb21JbnQoMTApLCByYW5kb21JbnQoMTApXTtcblxuICAgICAgY29uc3QgYXR0YWNrTG9naWMgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgICAgcml2YWxQbGF5ZXIucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG5cbiAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShyaXZhbFN1Y2Nlc3NIaXRzLCBjb29yZGluYXRlcykpIHsgLy8gc3VjY2Vzc2Z1bCBhdHRhY2tcbiAgICAgICAgICB2aXN1YWxJbmRpY2F0b3JzKGNvb3JkaW5hdGVzLCB0cnVlLCBcInBsYXllclwiKTtcbiAgICAgICAgICBhdHRhY2tDb3JuZXJzKGNvb3JkaW5hdGVzLCBhdHRhY2tQbGF5ZXIsIFwicGxheWVyXCIpO1xuICAgICAgICAgIGNwdUhpdHMucHVzaChjb29yZGluYXRlcylcblxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFpbGVkIGF0dGFja1xuICAgICAgICBjcHVIaXRzLnB1c2goY29vcmRpbmF0ZXMpXG4gICAgICAgIHZpc3VhbEluZGljYXRvcnMoY29vcmRpbmF0ZXMsIGZhbHNlLCBcInBsYXllclwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBpZiAoIC8vIGNhbGwgdGhlIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5IGFuZCBnZW5lcmF0ZSBuZXcgcmFuZG9tIGNvb3JkcyBpZiB0aGUgYXR0YWNrIGhhcyBhbHJlYWR5IGJlIGRvbmUgaW4gdGhhdCBjb29yZGluYXRlLlxuICAgICAgICBnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkocml2YWxIaXRzLCByYW5kb21Db29yZHMpICYmXG4gICAgICAgIGlnbm9yZUNvb3JkcyAhPT0gdHJ1ZVxuICAgICAgKVxuICAgICAgICByZXR1cm4gYXR0YWNrUGxheWVyKCk7XG5cbiAgICAgIGlmIChjb29yZHMpIC8vIHdoZW4gdGhlIGNvb3JkcyBhcmUgaW5kaWNhdGVkIG1hbnVhbGx5LlxuICAgICAgICByZXR1cm4gYXR0YWNrTG9naWMoY29vcmRzKTtcblxuICAgICAgaWYgKGNwdUhpdHNbMF0gJiYgcml2YWxTdWNjZXNzSGl0c1swXSlcbiAgICAgICAgaWYgKChjcHVIaXRzW2NwdUhpdHMubGVuZ3RoIC0gMV0gPT09IHJpdmFsU3VjY2Vzc0hpdHNbcml2YWxTdWNjZXNzSGl0cy5sZW5ndGggLSAxXSkpICAvLyBpZiB0aGUgbGFzdCBoaXQgd2FzIGEgc3VjY2Vzc2Z1bCBhdHRhY2suXG4gICAgICAgICAgcmV0dXJuIHRyeUNsb3NlQXR0YWNrKHJpdmFsU3VjY2Vzc0hpdHNbcml2YWxTdWNjZXNzSGl0cy5sZW5ndGggLSAxXSwgYXR0YWNrUGxheWVyLCByYW5kb21Db29yZHMpXG5cbiAgICAgIHJldHVybiBhdHRhY2tMb2dpYyhyYW5kb21Db29yZHMpOyAvLyB3aGVuIHRoZSBjb29yZHMgYXJlIGdlbmVyYXRlZCByYW5kb21seS5cbiAgICB9O1xuXG5cbiAgICByZXR1cm4ge1xuICAgICAgYXR0YWNrUGxheWVyLFxuICAgICAgY3B1Qm9hcmQsXG4gICAgICBjcHVTaGlwcyxcbiAgICAgIGNwdUNvb3JkcyxcbiAgICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIFBsYXllcixcbiAgICBjcHVQbGF5ZXIsXG4gICAgdmlzdWFsSW5kaWNhdG9ycyxcbiAgICBhdHRhY2tDb3JuZXJzLFxuICAgIGF0dGFja0Fyb3VuZCxcbiAgICByZXR1cm5Db3JuZXJzLFxuICAgIHJldHVyblNpZGVzLFxuICAgIHZhbGlkYXRlQ29vcmRzLFxuICB9O1xufSkoKTtcblxuY29uc3QgR2FtZSA9ICgoKSA9PiB7XG4gIGNvbnN0IG5ld0dhbWUgPSAocGxheWVyTmFtZSwgcGxheWVyQ29vcmRzLCBjcHVDb29yZHMpID0+IHtcbiAgICBjb25zdCBQbGF5ZXIgPSBwbGF5ZXJMb2dpYy5QbGF5ZXIocGxheWVyTmFtZSwgcGxheWVyQ29vcmRzKTtcblxuICAgIGNvbnN0IGNwdVBsYXllciA9IHBsYXllckxvZ2ljLmNwdVBsYXllcihQbGF5ZXIsIGNwdUNvb3Jkcyk7XG5cbiAgICByZXR1cm4geyBQbGF5ZXIsIGNwdVBsYXllciB9O1xuICB9O1xuXG4gIHJldHVybiB7IG5ld0dhbWUgfTtcbn0pKCk7XG5cbmNvbnN0IERPTUxvZ2ljID0gKCgpID0+IHtcbiAgY29uc3QgZGlzcGxheUdyaWQgPSAoZ3JpZDEsIGdyaWQyKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlR3JpZCA9IChzaXplKSA9PiB7XG4gICAgICBjb25zdCByZWN1cnNpdmUgPSAoeVBvcykgPT4ge1xuICAgICAgICBpZiAoeVBvcyA9PT0gc2l6ZSkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZ3JpZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIGdyaWRFbGVtZW50LmNsYXNzTmFtZSA9IGAke3lQb3N9LCR7aX1gO1xuXG4gICAgICAgICAgY29uc3QgZ3JpZEVsZW1lbnQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBncmlkRWxlbWVudDIuY2xhc3NOYW1lID0gYCR7eVBvc30sJHtpfWA7XG5cbiAgICAgICAgICBpZiAoZ3JpZDEpIGdyaWQxLmFwcGVuZENoaWxkKGdyaWRFbGVtZW50KTtcbiAgICAgICAgICBpZiAoZ3JpZDIpIGdyaWQyLmFwcGVuZENoaWxkKGdyaWRFbGVtZW50Mik7XG4gICAgICAgIH1cblxuICAgICAgICByZWN1cnNpdmUoeVBvcyArIDEpO1xuICAgICAgfTtcbiAgICAgIHJlY3Vyc2l2ZSgwKTtcbiAgICB9O1xuXG4gICAgY3JlYXRlR3JpZCgxMCk7XG4gIH07XG5cbiAgY29uc3QgZ2VuSW5kaWNhdG9ycyA9ICh4Q29udGFpbmVyLCB5Q29udGFpbmVyKSA9PiB7XG4gICAgY29uc3QgZ3JpZEluZGljYXRvcnNYID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG4gICAgY29uc3QgZ3JpZEluZGljYXRvcnNZID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XG5cbiAgICBncmlkSW5kaWNhdG9yc1guY2xhc3NMaXN0LmFkZChcIlhcIik7XG4gICAgZ3JpZEluZGljYXRvcnNZLmNsYXNzTGlzdC5hZGQoXCJZXCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gOTsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBpO1xuICAgICAgZ3JpZEluZGljYXRvcnNZLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXG4gICAgICBjb25zdCBlbGVtZW50MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlbGVtZW50Mi50ZXh0Q29udGVudCA9IGk7XG4gICAgICBncmlkSW5kaWNhdG9yc1guYXBwZW5kQ2hpbGQoZWxlbWVudDIpO1xuICAgIH1cblxuICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQoZ3JpZEluZGljYXRvcnNYKTtcbiAgICB5Q29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWRJbmRpY2F0b3JzWSk7XG4gIH07XG5cbiAgY29uc3QgVUlMb2dpYyA9IChub2RlcywgZ2FtZUluZm8pID0+IHtcbiAgICBjb25zdCBwbGF5ZXIxQ29vcmRzID0gZ2FtZUluZm8uUGxheWVyLnBsYXllclNoaXBzLmNvb3JkaW5hdGVzO1xuXG4gICAgY29uc3QgcGxheWVyMkNvb3JkcyA9IGdhbWVJbmZvLmNwdVBsYXllci5jcHVTaGlwcy5jb29yZGluYXRlcztcblxuICAgIGNvbnN0IGF0dGFja1BsYXllciA9IChjb29yZCkgPT4gZ2FtZUluZm8uUGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmQpO1xuXG4gICAgY29uc3QgYXR0YWNrQ3B1ID0gKGNvb3JkKSA9PiBnYW1lSW5mby5jcHVQbGF5ZXIucmVjZWl2ZUF0dGFjayhjb29yZCk7XG5cbiAgICBjb25zdCBhdHRhY2tPbkNsaWNrID0gKHNoaXBDb29yZHMsIG5vZGVDb29yZCwgYXR0YWNrRnVuY3Rpb24pID0+IHtcbiAgICAgIC8vIGlmIHRoZSBwbGF5ZXIgaGFzIGEgc2hpcCBpbiB0aGUgY2xpY2tlZCBjb29yZGluYXRlLCBhdHRhY2sgdGhlIHBsYXllciB0byB0aGF0IHNwZWNpZmljIGNvb3JkLlxuICAgICAgbGV0IHdhc1N1Y2Nlc3NmdWwgPSBmYWxzZTtcbiAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoT2JqZWN0LnZhbHVlcyhzaGlwQ29vcmRzKSwgbm9kZUNvb3JkKSkge1xuICAgICAgICAvLyB3aGVuIHRoZSBub2RlQ29vcmQgaXMgaW5zaWRlIG9mIGEgb25lLWNvb3JkaW5hdGUgc2hpcCwgdGhpcyBjb25kaXRpb25hbCBpcyB1c2VkLlxuICAgICAgICBhdHRhY2tGdW5jdGlvbihub2RlQ29vcmQpO1xuICAgICAgICB3YXNTdWNjZXNzZnVsID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICAvLyB3aGVuIHRoZSBub2RlQ29vcmQgaXMgaW5zaWRlIG9mIGEgbXVsdGlwbGUtY29vcmRpbmF0ZSBzaGlwLlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgY29vcmRzIGFycmF5IG9mIGVhY2ggc2hpcCwgdW50aWwgdGhlIG5vZGVDb29yZCBpcyBmb3VuZC5cbiAgICAgICAgY29uc3QgY3VycmVudENvb3JkcyA9IHNoaXBDb29yZHNbaV07XG4gICAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoY3VycmVudENvb3Jkcywgbm9kZUNvb3JkKSkge1xuICAgICAgICAgIGF0dGFja0Z1bmN0aW9uKG5vZGVDb29yZCk7XG4gICAgICAgICAgd2FzU3VjY2Vzc2Z1bCA9IHRydWU7XG5cbiAgICAgICAgICBicmVhazsgLy8gc3RvcCBsb29waW5nIHRocm91Z2ggdGhlIHNoaXBzIGNvb3JkcyB0byBvcHRpbWl6ZSB0aW1lIGNvbXBsZXhpdHkuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXNTdWNjZXNzZnVsO1xuICAgIH07XG5cbiAgICAvLyBub3RlLCB0aGUgYXR0YWNrT25DbGljayBmdW5jdGlvbiB3aWxsIGFsd2F5cyBjYWxsIHRoZSBhdHRhY2tGdW5jdGlvbiBvbiBhIHN1Y2Nlc3NmdWwgYXR0YWNrLlxuICAgIC8vIHRoYXQncyB3aHkgd2Ugd2lsbCBuZWVkIHRoZSBuZXh0IGZ1bmN0aW9uLlxuXG4gICAgY29uc3QgbWlzc2VkQXR0YWNrT25DbGljayA9IChub2RlQ29vcmQsIGF0dGFja0Z1bmN0aW9uKSA9PiB7XG4gICAgICBhdHRhY2tGdW5jdGlvbihub2RlQ29vcmQpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBkZXRlY3RBdHRhY2tzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IHBhcmVudENsYXNzID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc05hbWU7XG5cbiAgICAgIGNvbnN0IG5vZGVDbGFzcyA9IGUudGFyZ2V0LmNsYXNzTmFtZTtcblxuICAgICAgY29uc3Qgbm9kZUNvb3JkID0gZ2xvYmFsTG9naWMuY2xhc3NUb0FycmF5KG5vZGVDbGFzcyk7XG5cbiAgICAgIGlmIChwYXJlbnRDbGFzcyA9PT0gXCJncmlkLTFcIikge1xuICAgICAgICAvLyBpZiB0aGUgY2xpY2tlZCBjb29yZGluYXRlIGlzIGluc2lkZSBvZiBncmlkLTEsIHdlIGtub3cgdGhhdCBpdCBpcyBhbiBhdHRhY2sgdG8gcGxheWVyMS5cblxuICAgICAgICBjb25zdCBjbGVhbkNvb3JkcyA9IE9iamVjdC52YWx1ZXMocGxheWVyMUNvb3JkcykuZmlsdGVyKFxuICAgICAgICAgIChjb29yZHMpID0+IGNvb3JkcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICk7IC8vIGZpbHRlciB1bmRlZmluZWQgY29vcmRzLlxuXG4gICAgICAgIGlmIChhdHRhY2tPbkNsaWNrKGNsZWFuQ29vcmRzLCBub2RlQ29vcmQsIGF0dGFja1BsYXllcikgPT09IHRydWUpIHtcbiAgICAgICAgICBwbGF5ZXJMb2dpYy52aXN1YWxJbmRpY2F0b3JzKG5vZGVDbGFzcywgdHJ1ZSwgXCJwbGF5ZXJcIik7XG4gICAgICAgICAgcGxheWVyTG9naWMuYXR0YWNrQ29ybmVycyhub2RlQ29vcmQsIGF0dGFja1BsYXllciwgXCJwbGF5ZXJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWlzc2VkQXR0YWNrT25DbGljayhub2RlQ29vcmQsIGF0dGFja1BsYXllcik7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIGZhbHNlLCBcInBsYXllclwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Q2xhc3MgPT09IFwiZ3JpZC0yXCIpIHtcbiAgICAgICAgY29uc3QgY2xlYW5Db29yZHMgPSBPYmplY3QudmFsdWVzKHBsYXllcjJDb29yZHMpLmZpbHRlcihcbiAgICAgICAgICAoY29vcmRzKSA9PiBjb29yZHMgIT09IHVuZGVmaW5lZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChhdHRhY2tPbkNsaWNrKGNsZWFuQ29vcmRzLCBub2RlQ29vcmQsIGF0dGFja0NwdSkgPT09IHRydWUpIHtcbiAgICAgICAgICBwbGF5ZXJMb2dpYy52aXN1YWxJbmRpY2F0b3JzKG5vZGVDbGFzcywgdHJ1ZSwgXCJjcHVcIik7XG4gICAgICAgICAgcGxheWVyTG9naWMuYXR0YWNrQ29ybmVycyhub2RlQ29vcmQsIGF0dGFja0NwdSwgXCJjcHVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWlzc2VkQXR0YWNrT25DbGljayhub2RlQ29vcmQsIGF0dGFja0NwdSk7XG4gICAgICAgICAgcGxheWVyTG9naWMudmlzdWFsSW5kaWNhdG9ycyhub2RlQ2xhc3MsIGZhbHNlLCBcImNwdVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbm9kZXNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRldGVjdEF0dGFja3MsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gKFxuICAgIGdyaWRDb250YWluZXIxLFxuICAgIGdyaWRDb250YWluZXIyLFxuICAgIHBsYXllckNvb3JkcyxcbiAgICBjcHVDb29yZHNcbiAgKSA9PiB7XG4gICAgY29uc3QgY3VycmVudEdhbWUgPSBHYW1lLm5ld0dhbWUoXCJleGFtcGxlXCIsIHBsYXllckNvb3JkcywgY3B1Q29vcmRzKTtcblxuICAgIGlmIChncmlkQ29udGFpbmVyMS5jbGFzc05hbWUgIT09IFwic2hvd24tZ3JpZFwiKSB7XG4gICAgICBVSUxvZ2ljKGdyaWRDb250YWluZXIxLmNoaWxkTm9kZXMsIGN1cnJlbnRHYW1lKTtcbiAgICB9XG5cbiAgICBpZiAoZ3JpZENvbnRhaW5lcjIuY2xhc3NOYW1lICE9PSBcInNob3duLWdyaWRcIikge1xuICAgICAgVUlMb2dpYyhncmlkQ29udGFpbmVyMi5jaGlsZE5vZGVzLCBjdXJyZW50R2FtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY3VycmVudEdhbWUsIGdyaWRDb250YWluZXIxLCBncmlkQ29udGFpbmVyMiB9O1xuICB9O1xuXG4gIGNvbnN0IGdlbkRPTUVsZW1lbnRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGZsYXRDb29yZHMgPSAoY29vcmRzQXJyKSA9PiB7XG4gICAgICBjb25zdCBvbmVEaW1lbnNpb25Db29yZHMgPSBbXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZHNBcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY29vcmRzID0gY29vcmRzQXJyW2ldO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY29vcmRzWzBdID09PSBcIm9iamVjdFwiKSBvbmVEaW1lbnNpb25Db29yZHMucHVzaCguLi5jb29yZHMpO1xuICAgICAgICAvLyBpZiB0aGUgc2hpcHMgaGF2ZSBtb3JlIHRoYW4gb25lIGNvb3JkaW5hdGUuXG4gICAgICAgIGVsc2Ugb25lRGltZW5zaW9uQ29vcmRzLnB1c2goY29vcmRzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvbmVEaW1lbnNpb25Db29yZHM7XG4gICAgfTtcblxuICAgIGNvbnN0IHNob3dTaGlwcyA9IChjdXJyZW50Q29vcmRzLCBncmlkTnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBjb29yZHMgPSBmbGF0Q29vcmRzKGN1cnJlbnRDb29yZHMpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBnbG9iYWxMb2dpYy5jaGFuZ2VDb29yZENvbG9yKFxuICAgICAgICAgIGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZHNbaV0pLFxuICAgICAgICAgIGdyaWROdW1iZXIsXG4gICAgICAgICAgXCJncmVlblwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGRlbGV0ZUVsZW1lbnRzID0gKGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBtYWluQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1haW4tY29udGFpbmVyXCIpW2luZGV4XTtcbiAgICAgIGlmIChtYWluQ29udGFpbmVyKSBtYWluQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBkZWxldGVTaG93bkdyaWQgPSAoaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHNob3duR3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaG93bi1ncmlkXCIpW2luZGV4XTtcbiAgICAgIGlmIChzaG93bkdyaWQpIHNob3duR3JpZC5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuR3JpZE9ubHkgPSAocGxheWVySW5kZXgsIGNvbnRhaW5lciwgY29vcmRzKSA9PiB7XG4gICAgICBjb25zdCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGdyaWQuY2xhc3NOYW1lID0gYGdyaWQtJHtwbGF5ZXJJbmRleH1gO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGdyaWQpO1xuXG4gICAgICBpZiAocGxheWVySW5kZXggPT09IDEpIERPTUxvZ2ljLmRpc3BsYXlHcmlkKGdyaWQsIG51bGwpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIERPTUxvZ2ljLmRpc3BsYXlHcmlkKG51bGwsIGdyaWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29vcmRzKSB7XG4gICAgICAgIGdyaWQuY2xhc3NOYW1lID0gYHNob3duLWdyaWRgO1xuICAgICAgICBzaG93U2hpcHMoY29vcmRzLCBwbGF5ZXJJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBncmlkO1xuICAgIH07XG5cbiAgICBjb25zdCBnZW5HcmlkID0gKHBsYXllckluZGV4LCBjb29yZHMpID0+IHtcbiAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtcbiAgICAgIG1haW5Db250YWluZXIuY2xhc3NOYW1lID0gXCJtYWluLWNvbnRhaW5lclwiO1xuXG4gICAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG4gICAgICBpZiAobWFpbikgbWFpbi5hcHBlbmRDaGlsZChtYWluQ29udGFpbmVyKTtcblxuICAgICAgY29uc3QgZ3JpZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZ3JpZHNDb250YWluZXIuY2xhc3NOYW1lID0gXCJncmlkcy1jb250YWluZXJcIjtcblxuICAgICAgaWYgKG1haW5Db250YWluZXIpIG1haW5Db250YWluZXIuYXBwZW5kQ2hpbGQoZ3JpZHNDb250YWluZXIpO1xuXG4gICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgbmFtZS50ZXh0Q29udGVudCA9IGBQbGF5ZXIncyAke3BsYXllckluZGV4fSBHcmlkYDtcbiAgICAgIGdyaWRzQ29udGFpbmVyLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gICAgICBjb25zdCBncmlkV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBncmlkV3JhcHBlci5jbGFzc05hbWUgPSBcImdyaWQtd3JhcHBlclwiO1xuXG4gICAgICBnZW5JbmRpY2F0b3JzKGdyaWRzQ29udGFpbmVyLCBncmlkV3JhcHBlcik7IC8vIGdlbiBpbmRpY2F0b3JzIGhlcmUgdG8gcHV0IFwiWFwiIGNvbnRhaW5lciBhYm92ZSB0aGUgZ3JpZC5cblxuICAgICAgZ3JpZHNDb250YWluZXIuYXBwZW5kQ2hpbGQoZ3JpZFdyYXBwZXIpO1xuXG4gICAgICBjb25zdCBncmlkID0gZ2VuR3JpZE9ubHkocGxheWVySW5kZXgsIGdyaWRXcmFwcGVyLCBjb29yZHMpO1xuXG4gICAgICByZXR1cm4gZ3JpZDtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuU3RhcnRCdXR0b24gPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBzdGFydEJ1dHRvbi5jbGFzc05hbWUgPSBcInN0YXJ0LWJ1dHRvblwiO1xuICAgICAgc3RhcnRCdXR0b24udGV4dENvbnRlbnQgPSBcIlN0YXJ0IEdhbWVcIjtcbiAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJidXR0b24td3JhcHBlclwiKVswXTtcbiAgICAgIGlmIChidXR0b25Db250YWluZXIpIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdGFydEJ1dHRvbik7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlbkNvb3JkSW5wdXRzID0gKCkgPT4ge1xuICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLWNvbnRhaW5lclwiKVswXTtcblxuICAgICAgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgIGlucHV0VGl0bGUuY2xhc3NMaXN0LmFkZChgaW5wdXRzLWNvbnRhaW5lcmApO1xuICAgICAgaW5wdXRUaXRsZS5odG1sRm9yID0gXCJzZWxlY3Qtc2hpcHNcIjtcbiAgICAgIGlucHV0VGl0bGUudGV4dENvbnRlbnQgPSBcIlNldCBJbml0aWFsIENvb3JkXCI7XG4gICAgICBtYWluQ29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0VGl0bGUpO1xuXG4gICAgICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICAgIHNlbGVjdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChgc2VsZWN0LXNoaXBzYCk7XG4gICAgICBpbnB1dFRpdGxlLmFwcGVuZENoaWxkKHNlbGVjdEVsZW1lbnQpO1xuXG4gICAgICBjb25zdCBpbnB1dFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaW5wdXRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoYGlucHV0LXdyYXBwZXJgKTtcbiAgICAgIGlucHV0VGl0bGUuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwcGVyKTtcblxuICAgICAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgaW5wdXQxLmNsYXNzTGlzdC5hZGQoYGNvb3Jkcy1pbnB1dGApO1xuICAgICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0MSk7XG5cbiAgICAgIGNvbnN0IGlucHV0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgaW5wdXRUZXh0LmNsYXNzTGlzdC5hZGQoYGlucHV0LXRleHRgKTtcbiAgICAgIGlucHV0VGV4dC50ZXh0Q29udGVudCA9IFwiLFwiO1xuICAgICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0VGV4dCk7XG5cbiAgICAgIGNvbnN0IGlucHV0MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIGlucHV0Mi5jbGFzc0xpc3QuYWRkKGBjb29yZHMtaW5wdXRgKTtcbiAgICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChpbnB1dDIpO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoYGFwcGx5LWNvb3Jkc2ApO1xuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJBcHBseVwiO1xuICAgICAgaW5wdXRUaXRsZS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xuXG4gICAgICBjb25zdCBvcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjEudmFsdWUgPSBcImNhcnJpZXJcIjtcbiAgICAgIG9wdGlvbjEudGV4dENvbnRlbnQgPSBcIkNhcnJpZXJcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uMSk7XG5cbiAgICAgIGNvbnN0IG9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgb3B0aW9uMi52YWx1ZSA9IFwiYmF0dGxlc2hpcDFcIjtcbiAgICAgIG9wdGlvbjIudGV4dENvbnRlbnQgPSBcIkJhdHRsZXNoaXAgMVwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb24yKTtcblxuICAgICAgY29uc3Qgb3B0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb24zLnZhbHVlID0gXCJiYXR0bGVzaGlwMlwiO1xuICAgICAgb3B0aW9uMy50ZXh0Q29udGVudCA9IFwiQmF0dGxlc2hpcCAyXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjMpO1xuXG4gICAgICBjb25zdCBvcHRpb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjQudmFsdWUgPSBcImNydWlzZXIxXCI7XG4gICAgICBvcHRpb240LnRleHRDb250ZW50ID0gXCJDcnVpc2VyIDFcIjtcbiAgICAgIHNlbGVjdEVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uNCk7XG5cbiAgICAgIGNvbnN0IG9wdGlvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgb3B0aW9uNS52YWx1ZSA9IFwiY3J1aXNlcjJcIjtcbiAgICAgIG9wdGlvbjUudGV4dENvbnRlbnQgPSBcIkNydWlzZXIgMlwiO1xuICAgICAgc2VsZWN0RWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb241KTtcblxuICAgICAgY29uc3Qgb3B0aW9uNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb242LnZhbHVlID0gXCJjcnVpc2VyM1wiO1xuICAgICAgb3B0aW9uNi50ZXh0Q29udGVudCA9IFwiQ3J1aXNlciAzXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjYpO1xuXG4gICAgICBjb25zdCBvcHRpb243ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjcudmFsdWUgPSBcImRlc3Ryb3llcjFcIjtcbiAgICAgIG9wdGlvbjcudGV4dENvbnRlbnQgPSBcIkRlc3Ryb3llciAxXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjcpO1xuXG4gICAgICBjb25zdCBvcHRpb244ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjgudmFsdWUgPSBcImRlc3Ryb3llcjJcIjtcbiAgICAgIG9wdGlvbjgudGV4dENvbnRlbnQgPSBcIkRlc3Ryb3llciAyXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjgpO1xuXG4gICAgICBjb25zdCBvcHRpb245ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbjkudmFsdWUgPSBcImRlc3Ryb3llcjNcIjtcbiAgICAgIG9wdGlvbjkudGV4dENvbnRlbnQgPSBcIkRlc3Ryb3llciAzXCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjkpO1xuXG4gICAgICBjb25zdCBvcHRpb24xMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb24xMC52YWx1ZSA9IFwiZGVzdHJveWVyNFwiO1xuICAgICAgb3B0aW9uMTAudGV4dENvbnRlbnQgPSBcIkRlc3Ryb3llciA0XCI7XG4gICAgICBzZWxlY3RFbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbjEwKTtcblxuICAgICAgLy8gaW5wdXRzIHZhbGlkYXRpb25cbiAgICAgIGNvbnN0IHJlZ0V4cCA9IC9eXFxkKyQvO1xuICAgICAgY29uc3QgdmFsaWRhdGVJbnB1dCA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWAke2V2ZW50LnRhcmdldC52YWx1ZX0ke2V2ZW50LmtleX1gLm1hdGNoKHJlZ0V4cCkpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuXG4gICAgICB9XG5cbiAgICAgIGlucHV0Mi5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIxXCIpXG4gICAgICBpbnB1dDEuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMVwiKVxuICAgICAgaW5wdXQxLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgdmFsaWRhdGVJbnB1dClcbiAgICAgIGlucHV0Mi5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHZhbGlkYXRlSW5wdXQpXG5cbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQnV0dG9uV3JhcHBlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYnV0dG9uV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uLXdyYXBwZXJcIik7XG5cbiAgICAgIGNvbnN0IGdyaWRzQ29udGFpbmVyID1cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWRzLWNvbnRhaW5lclwiKVswXTtcblxuICAgICAgaWYgKGdyaWRzQ29udGFpbmVyKSBncmlkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25XcmFwcGVyKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuUmFuZG9taXplQnV0dG9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmFuZG9tQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHJhbmRvbUJ1dHRvbi5jbGFzc05hbWUgPSBcInJhbmRvbS1idXR0b25cIjtcbiAgICAgIHJhbmRvbUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUmFuZG9taXplXCI7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnV0dG9uLXdyYXBwZXJcIilbMF07XG4gICAgICBpZiAoYnV0dG9uQ29udGFpbmVyKSBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmFuZG9tQnV0dG9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQ3VzdG9taXplQnV0dG9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9taXplQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGN1c3RvbWl6ZUJ1dHRvbi5jbGFzc05hbWUgPSBcImN1c3RvbWl6ZS1idXR0b25cIjtcbiAgICAgIGN1c3RvbWl6ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3VzdG9taXplXCI7XG4gICAgICBjb25zdCBidXR0b25Db250YWluZXIgPVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnV0dG9uLXdyYXBwZXJcIilbMF07XG4gICAgICBpZiAoYnV0dG9uQ29udGFpbmVyKSBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY3VzdG9taXplQnV0dG9uKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQnV0dG9ucyA9ICgpID0+IHtcbiAgICAgIGdlbkJ1dHRvbldyYXBwZXIoKTtcbiAgICAgIGdlblJhbmRvbWl6ZUJ1dHRvbigpO1xuICAgICAgZ2VuU3RhcnRCdXR0b24oKTtcbiAgICAgIGdlbkN1c3RvbWl6ZUJ1dHRvbigpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgZ2VuR3JpZCxcbiAgICAgIGRlbGV0ZUVsZW1lbnRzLFxuICAgICAgZ2VuQnV0dG9ucyxcbiAgICAgIGdlbkNvb3JkSW5wdXRzLFxuICAgICAgZ2VuR3JpZE9ubHksXG4gICAgICBkZWxldGVTaG93bkdyaWQsXG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVNb2RhbCA9ICh3aW5uZXIsIGNwdVdpbikgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcblxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpYWxvZ1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIik7XG4gICAgYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG5cbiAgICBjb25zdCBtb2RhbFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKG1vZGFsVGV4dCk7XG5cbiAgICBpZiAoIWNwdVdpbikgbW9kYWxUZXh0LnRleHRDb250ZW50ID0gYENvbmdyYXR1bGF0aW9ucyAke3dpbm5lcn0sIHlvdSB3b24hYDtcbiAgICBlbHNlIHtcbiAgICAgIG1vZGFsVGV4dC50ZXh0Q29udGVudCA9IGAke3dpbm5lcn0gd29uLCB0cnkgYWdhaW4hYDtcbiAgICB9XG5cbiAgICBjb25zdCByZWxvYWRHYW1lQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICByZWxvYWRHYW1lQnV0dG9uLnRleHRDb250ZW50ID0gXCJOZXcgR2FtZVwiO1xuXG4gICAgY29uc3QgcmVsb2FkUGFnZSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcblxuICAgIHJlbG9hZEdhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbG9hZFBhZ2UpO1xuICAgIG1vZGFsLmFwcGVuZENoaWxkKHJlbG9hZEdhbWVCdXR0b24pO1xuXG4gICAgaWYgKG1vZGFsKSBtb2RhbC5zaG93TW9kYWwoKTtcbiAgfTtcblxuICBjb25zdCBlbmRHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IHBsYXllcjFHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWQtMVwiKVswXTtcblxuICAgIGNvbnN0IHBsYXllcjJHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyaWQtMlwiKVswXTtcblxuICAgIC8vIGNsb25lZCBlbGVtZW50cyBkbyBub3QgY2FycnkgZXZlbnQgbGlzdGVuZXJzLlxuXG4gICAgaWYgKHBsYXllcjFHcmlkKSBwbGF5ZXIxR3JpZC5yZXBsYWNlV2l0aChwbGF5ZXIxR3JpZC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgaWYgKHBsYXllcjJHcmlkKSBwbGF5ZXIyR3JpZC5yZXBsYWNlV2l0aChwbGF5ZXIyR3JpZC5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9O1xuXG4gIGNvbnN0IGZsYXRDb29yZHMgPSAoZWxlbWVudHMpID0+IHtcbiAgICBpZiAoZWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IG11bHRpcGxlQ29vcmRTaGlwcyA9IGVsZW1lbnRzLmZpbHRlcihcbiAgICAgICAgKGVsKSA9PiB0eXBlb2YgZWxbMF0gPT09IFwib2JqZWN0XCJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG9uZUNvb3JkU2hpcHMgPSBlbGVtZW50cy5maWx0ZXIoKGVsKSA9PiB0eXBlb2YgZWxbMF0gPT09IFwibnVtYmVyXCIpO1xuXG4gICAgICBjb25zdCBmbGF0dGVkQ29vcmRzID0gbXVsdGlwbGVDb29yZFNoaXBzLmZsYXQoKS5jb25jYXQob25lQ29vcmRTaGlwcyk7XG5cbiAgICAgIHJldHVybiBmbGF0dGVkQ29vcmRzO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdXJyb3VuZENvb3JkcyA9IChub2RlQ29vcmQpID0+IHtcbiAgICBjb25zdCBnZXRTdXJydW9uZHMgPSAobm9kZSkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFN1cnJvdW5kcyA9IFtcbiAgICAgICAgLi4ucGxheWVyTG9naWMucmV0dXJuQ29ybmVycyhub2RlKSxcbiAgICAgICAgLi4ucGxheWVyTG9naWMucmV0dXJuU2lkZXMobm9kZSksXG4gICAgICAgIG5vZGUsXG4gICAgICBdO1xuXG4gICAgICByZXR1cm4gcGxheWVyTG9naWMudmFsaWRhdGVDb29yZHMoY3VycmVudFN1cnJvdW5kcyk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNvb3JkcyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBub2RlQ29vcmRbMF0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIC8vIG9uZS1jb29yZCBzaGlwXG4gICAgICBjb25zdCBzdXJyb3VuZCA9IGdldFN1cnJ1b25kcyhub2RlQ29vcmQpO1xuICAgICAgY29vcmRzLnB1c2goLi4uc3Vycm91bmQpO1xuXG4gICAgICBjb25zdCBub1JlcGVhdFN0cmluZyA9IG5ldyBTZXQoY29vcmRzLm1hcCgoeCkgPT4gSlNPTi5zdHJpbmdpZnkoeCkpKTtcblxuICAgICAgY29uc3Qgbm9SZXBlYXRDb29yZHMgPSBbLi4ubm9SZXBlYXRTdHJpbmddLm1hcCgoeCkgPT4gSlNPTi5wYXJzZSh4KSk7XG4gICAgICByZXR1cm4gbm9SZXBlYXRDb29yZHM7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlQ29vcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDb29yZCA9IG5vZGVDb29yZFtpXTtcbiAgICAgIGNvbnN0IHN1cnJvdW5kID0gZ2V0U3VycnVvbmRzKGN1cnJlbnRDb29yZCk7XG5cbiAgICAgIGNvb3Jkcy5wdXNoKC4uLnN1cnJvdW5kKTtcbiAgICB9XG4gICAgY29uc3Qgbm9SZXBlYXRTdHJpbmcgPSBuZXcgU2V0KGNvb3Jkcy5tYXAoKHgpID0+IEpTT04uc3RyaW5naWZ5KHgpKSk7XG5cbiAgICBjb25zdCBub1JlcGVhdENvb3JkcyA9IFsuLi5ub1JlcGVhdFN0cmluZ10ubWFwKCh4KSA9PiBKU09OLnBhcnNlKHgpKTtcblxuICAgIHJldHVybiBub1JlcGVhdENvb3JkcztcbiAgfTtcblxuICBjb25zdCBnZW5Db29yZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgcmFuZG9tSW50ID0gKG1heCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcblxuICAgIGNvbnN0IHJhbmRvbU9yaWVudGF0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3QgbnVtYmVyID0gcmFuZG9tSW50KDIpO1xuXG4gICAgICBpZiAobnVtYmVyID09PSAwKSByZXR1cm4gXCJoXCI7XG4gICAgICByZXR1cm4gXCJ2XCI7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlblJhbmRvbUNvb3JkcyA9IChvcmllbnRhdGlvbiwgc2l6ZSwgcHJldmlvdXNDb29yZHMpID0+IHtcbiAgICAgIGlmIChwcmV2aW91c0Nvb3Jkcykge1xuICAgICAgICBjb25zdCB2ZXJ0aWNhbENvb3JkcyA9IFtwcmV2aW91c0Nvb3Jkc1swXSArIDEsIHByZXZpb3VzQ29vcmRzWzFdXTtcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbENvb3JkcyA9IFtwcmV2aW91c0Nvb3Jkc1swXSwgcHJldmlvdXNDb29yZHNbMV0gKyAxXTtcblxuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IFwidlwiKSByZXR1cm4gdmVydGljYWxDb29yZHM7XG5cbiAgICAgICAgcmV0dXJuIGhvcml6b250YWxDb29yZHM7XG4gICAgICB9XG5cbiAgICAgIGxldCByYW5kb21Db29yZHM7XG5cbiAgICAgIC8vIHN1YnN0cmFjdCB0aGUgc2l6ZSBkZXBlbmRpbmcgb24gdGhlIG9yaWVudGF0aW9uLCBpbiBvcmRlciB0byBoYXZlIHNwYWNlIGZvciB0aGUgbmV4dCBjb29yZHMgb2YgdGhlIHNoaXAuXG4gICAgICBpZiAob3JpZW50YXRpb24gPT09IFwidlwiKVxuICAgICAgICByYW5kb21Db29yZHMgPSBbcmFuZG9tSW50KDEwIC0gc2l6ZSksIHJhbmRvbUludCgxMCldO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHJhbmRvbUNvb3JkcyA9IFtyYW5kb21JbnQoMTApLCByYW5kb21JbnQoMTAgLSBzaXplKV07XG4gICAgICB9XG5cbiAgICAgIGlmIChzaXplID09PSAxKSByYW5kb21Db29yZHMgPSBbcmFuZG9tSW50KDEwKSwgcmFuZG9tSW50KDEwKV07XG5cbiAgICAgIHJldHVybiByYW5kb21Db29yZHM7XG4gICAgfTtcblxuICAgIGNvbnN0IGdlblNoaXBDb29yZCA9IChzaXplLCB1c2VkQ29vcmRzKSA9PiB7XG4gICAgICBjb25zdCBzaGlwQ29vcmRzID0gW107XG5cbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gcmFuZG9tT3JpZW50YXRpb24oKTtcblxuICAgICAgY29uc3QgaW52YWxpZENvb3JkcyA9IGZsYXRDb29yZHModXNlZENvb3Jkcyk7XG5cbiAgICAgIGNvbnN0IGdlbkluaXRpYWxDb29yZHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGdlblJhbmRvbUNvb3JkcyhvcmllbnRhdGlvbiwgc2l6ZSk7XG5cbiAgICAgICAgaWYgKCFnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoaW52YWxpZENvb3JkcywgY29vcmRzKSkge1xuICAgICAgICAgIC8vIHZhbGlkYXRlIHRoYXQgdGhlIGluaXRpYWwgY29vcmQgaXMgaW4gYSB2YWxpZCBwb3NpdGlvblxuICAgICAgICAgIHNoaXBDb29yZHMucHVzaChjb29yZHMpO1xuICAgICAgICB9IGVsc2UgZ2VuSW5pdGlhbENvb3JkcygpOyAvLyBpZiB0aGUgZ2VuZXJhdGVkIGNvb3JkcyBhcmUgYWxyZWFkeSB1c2VkLCBnZW5lcmF0ZSBuZXcgY29vcmRzLlxuICAgICAgfTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNDb29yZHMgPSBzaGlwQ29vcmRzW3NoaXBDb29yZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IGdlblJhbmRvbUNvb3JkcyhvcmllbnRhdGlvbiwgc2l6ZSwgcHJldmlvdXNDb29yZHMpO1xuXG4gICAgICAgIGlmIChwcmV2aW91c0Nvb3Jkcykge1xuICAgICAgICAgIHNoaXBDb29yZHMucHVzaChjb29yZHMpO1xuICAgICAgICB9IGVsc2UgZ2VuSW5pdGlhbENvb3JkcygpO1xuICAgICAgfVxuXG4gICAgICAvLyBtdWx0aXBsZSBjb29yZGluYXRlIHNoaXBcbiAgICAgIGlmIChzaGlwQ29vcmRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNoaXBDb29yZHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNoaXBDb29yZHNbaW5kZXhdO1xuICAgICAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoaW52YWxpZENvb3JkcywgZWxlbWVudCkpXG4gICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7IC8vIGlmIG9uZSBlbGVtZW50IG9mIHRoZSBzaGlwIGhhcyBhIGludmFsaWQgcG9zaXRpb24sIGlzVmFsaWQgaXMgZmFsc2UuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNWYWxpZCA9PT0gZmFsc2UpIHJldHVybiBnZW5TaGlwQ29vcmQoc2l6ZSwgaW52YWxpZENvb3Jkcyk7IC8vIGFuZCB3aGVuIGlzVmFsaWQgaXMgZmFsc2UsIHdlIHJlY3Vyc2l2ZWx5IGNoYW5nZSB0aGUgc2hpcCBwb3NpdGlvbiwgdW50aWwgaXQgaXMgdmFsaWQuXG5cbiAgICAgICAgcmV0dXJuIHNoaXBDb29yZHM7XG4gICAgICB9XG5cbiAgICAgIC8vIG9uZSBjb29yZGluYXRlIHNoaXAuXG4gICAgICByZXR1cm4gc2hpcENvb3Jkc1swXTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2VuQmF0dGxlc2hpcHMgPSAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VkQ29vcmRzID0gW107XG5cbiAgICAgIGNvbnN0IGNhcnJpZXIgPSBnZW5TaGlwQ29vcmQoNCwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoY2FycmllcikpO1xuXG4gICAgICBjb25zdCBiYXR0bGVTaGlwID0gZ2VuU2hpcENvb3JkKDMsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGJhdHRsZVNoaXApKTtcblxuICAgICAgY29uc3QgYmF0dGxlU2hpcDEgPSBnZW5TaGlwQ29vcmQoMywgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoYmF0dGxlU2hpcDEpKTtcblxuICAgICAgY29uc3QgY3J1aXNlciA9IGdlblNoaXBDb29yZCgyLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhjcnVpc2VyKSk7XG5cbiAgICAgIGNvbnN0IGNydWlzZXIxID0gZ2VuU2hpcENvb3JkKDIsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGNydWlzZXIxKSk7XG5cbiAgICAgIGNvbnN0IGNydWlzZXIyID0gZ2VuU2hpcENvb3JkKDIsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGNydWlzZXIyKSk7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llciA9IGdlblNoaXBDb29yZCgxLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhkZXN0cm95ZXIpKTtcblxuICAgICAgY29uc3QgZGVzdHJveWVyMSA9IGdlblNoaXBDb29yZCgxLCB1c2VkQ29vcmRzKTtcbiAgICAgIHVzZWRDb29yZHMucHVzaChzdXJyb3VuZENvb3JkcyhkZXN0cm95ZXIxKSk7XG5cbiAgICAgIGNvbnN0IGRlc3Ryb3llcjIgPSBnZW5TaGlwQ29vcmQoMSwgdXNlZENvb3Jkcyk7XG4gICAgICB1c2VkQ29vcmRzLnB1c2goc3Vycm91bmRDb29yZHMoZGVzdHJveWVyMikpO1xuXG4gICAgICBjb25zdCBkZXN0cm95ZXIzID0gZ2VuU2hpcENvb3JkKDEsIHVzZWRDb29yZHMpO1xuICAgICAgdXNlZENvb3Jkcy5wdXNoKHN1cnJvdW5kQ29vcmRzKGRlc3Ryb3llcjMpKTtcblxuICAgICAgY29uc3QgY29vcmRzID0gW1xuICAgICAgICBjYXJyaWVyLFxuICAgICAgICBiYXR0bGVTaGlwLFxuICAgICAgICBiYXR0bGVTaGlwMSxcbiAgICAgICAgY3J1aXNlcixcbiAgICAgICAgY3J1aXNlcjEsXG4gICAgICAgIGNydWlzZXIyLFxuICAgICAgICBkZXN0cm95ZXIsXG4gICAgICAgIGRlc3Ryb3llcjEsXG4gICAgICAgIGRlc3Ryb3llcjIsXG4gICAgICAgIGRlc3Ryb3llcjMsXG4gICAgICBdO1xuXG4gICAgICByZXR1cm4geyBjb29yZHMsIHVzZWRDb29yZHMgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgZ2VuQmF0dGxlc2hpcHMsIGdlblNoaXBDb29yZCwgc3Vycm91bmRDb29yZHMgfTtcbiAgfTtcblxuICBjb25zdCByb3RhdGVDb29yZHMgPSAoc2hpcCwgc3dhcE9yaWVudGF0aW9uKSA9PiB7XG4gICAgY29uc3QgY2hlY2tPcmllbnRhdGlvbiA9ICgpID0+IHtcbiAgICAgIGlmIChzd2FwT3JpZW50YXRpb24pIHtcbiAgICAgICAgaWYgKHNoaXAuY29vcmRzWzBdWzBdICsgMSA9PT0gc2hpcC5jb29yZHNbMV1bMF0pIHJldHVybiBcImhcIjtcbiAgICAgICAgcmV0dXJuIFwidlwiO1xuICAgICAgfVxuICAgICAgaWYgKHNoaXAuY29vcmRzWzBdWzBdICsgMSA9PT0gc2hpcC5jb29yZHNbMV1bMF0pIHJldHVybiBcInZcIjtcbiAgICAgIHJldHVybiBcImhcIjtcbiAgICB9O1xuXG4gICAgbGV0IG5ld0FycmF5ID0gW3NoaXAuZmlyc3RDb29yZF07XG5cbiAgICBsZXQgeVBvcztcbiAgICBsZXQgeFBvcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5jb29yZHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoY2hlY2tPcmllbnRhdGlvbigpID09PSBcInZcIikge1xuICAgICAgICB5UG9zID0gbmV3QXJyYXlbaV1bMF07XG4gICAgICAgIHhQb3MgPSBuZXdBcnJheVtpXVsxXSArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5UG9zID0gbmV3QXJyYXlbaV1bMF0gKyAxO1xuICAgICAgICB4UG9zID0gbmV3QXJyYXlbaV1bMV07XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdDb29yZCA9IFt5UG9zLCB4UG9zXTtcblxuICAgICAgbmV3QXJyYXkgPSBuZXdBcnJheS5jb25jYXQoW25ld0Nvb3JkXSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdBcnJheTtcbiAgfTtcblxuICBjb25zdCByZXBsYWNlQ29vcmRzID0gKHNoaXBJbmZvLCBjb29yZHMpID0+IHtcbiAgICBjb25zdCBjb29yZHNDb3B5ID0gWy4uLmNvb3Jkc107XG5cbiAgICBjb29yZHNDb3B5LnNwbGljZShzaGlwSW5mby5jb29yZHNQb3NpdGlvbiwgMSwgc2hpcEluZm8uY29vcmRzKTsgLy8gcmVwbGFjZSB0aGUgb2xkIGNvb3JkcyBmb3IgdGhlIHJvdGF0ZWQgY29vcmRzLlxuXG4gICAgcmV0dXJuIGNvb3Jkc0NvcHk7XG4gIH07XG5cbiAgY29uc3QgdHJpZ2dlckludmFsaWRSVCA9IChjb29yZHMpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2xhc3NDb29yZCA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjb29yZHNbaV0pO1xuICAgICAgY29uc3QgY29vcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc0Nvb3JkKVswXTtcbiAgICAgIGNvb3JkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW52YWxpZC1yb3RhdGlvblwiKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBiZWNhdXNlIHdlIGtub3cgZXhhY3RseSB3aGVuIHRoZSBhbmltYXRpb24gd2lsbCBlbmQsIHdlIGNhbiBzZXQgYSB0aW1lb3V0LlxuICAgICAgICBjb29yZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWQtcm90YXRpb25cIik7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdmFsaWRhdGVSb3RhdGlvbiA9IChzaGlwSW5mbywgdXNlZENvb3JkcykgPT4ge1xuICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcblxuICAgIGNvbnN0IG9jY3VwaWVkQ29vcmRzID0gc2hpcEluZm8uY29vcmRzO1xuXG4gICAgY29uc3QgeyBjb29yZHNQb3NpdGlvbiB9ID0gc2hpcEluZm87XG5cbiAgICBjb25zdCB1c2VkQ29vcmRzQ29weSA9IFsuLi51c2VkQ29vcmRzXTtcblxuICAgIHVzZWRDb29yZHNDb3B5W2Nvb3Jkc1Bvc2l0aW9uXSA9IFtdOyAvLyB3ZSBjbGVhciB0aGUgdXNlZENvb3JkcyBvZiB0aGUgY3VycmVudCBzaGlwLCBzbyB3ZSBjYW4gdmFsaWRhdGUgd2l0aG91dCB0aGVtIGluIHRoZSBsb29wLlxuXG4gICAgY29uc3QgZmxhdFVzZWRDb29yZHMgPSBmbGF0Q29vcmRzKHVzZWRDb29yZHNDb3B5KTtcblxuICAgIGlmIChcbiAgICAgIHBsYXllckxvZ2ljLnZhbGlkYXRlQ29vcmRzKG9jY3VwaWVkQ29vcmRzKS5sZW5ndGggIT09XG4gICAgICBvY2N1cGllZENvb3Jkcy5sZW5ndGhcbiAgICApXG4gICAgICByZXR1cm4gdXNlZENvb3JkczsgLy8gY2hlY2sgaWYgdGhlc2UgY29vcmRzIGFyZW4ndCBvdXQgb2YgdGhlIGdyaWQuXG5cbiAgICBpZiAodHlwZW9mIG9jY3VwaWVkQ29vcmRzWzBdID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoZ2xvYmFsTG9naWMuaXNUYXJnZXRJbkFycmF5KGZsYXRVc2VkQ29vcmRzLCBvY2N1cGllZENvb3JkcykpXG4gICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICB9IGVsc2VcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2NjdXBpZWRDb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGdsb2JhbExvZ2ljLmlzVGFyZ2V0SW5BcnJheShmbGF0VXNlZENvb3Jkcywgb2NjdXBpZWRDb29yZHNbaV0pKSB7XG4gICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICBjb25zdCBjb29yZHNTdXJyb3VuZCA9IHN1cnJvdW5kQ29vcmRzKG9jY3VwaWVkQ29vcmRzKTtcblxuICAgIGlmIChpc1ZhbGlkID09PSB0cnVlKSB7XG4gICAgICB1c2VkQ29vcmRzQ29weVtjb29yZHNQb3NpdGlvbl0gPSBjb29yZHNTdXJyb3VuZDtcbiAgICAgIHJldHVybiB1c2VkQ29vcmRzQ29weTtcbiAgICB9XG4gICAgcmV0dXJuIHVzZWRDb29yZHM7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2hpcENvb3JkcyA9IChjb29yZCwgc2hpcHNDb29yZHMpID0+IHtcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIHNlYXJjaGVzIGZvciB0aGUgYXJndW1lbnQgY29vcmRpbmF0ZSBpbnNpZGUgb2YgdGhlIGZ1bGwgY29vcmRzIGFycmF5LCBhbGwgb2YgdGhpcywgaW4gb3JkZXIgdG8gcmV0dXJuIHRoZSBmdWxsIGNvb3JkcyBvZiB0aGUgY2xpY2tlZCBjb29yZC5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzQ29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb29yZHNBcnIgPSBzaGlwc0Nvb3Jkc1tpXTtcbiAgICAgIGNvbnN0IGNvb3Jkc0luZm8gPSBbY29vcmRzQXJyLCBpXTtcbiAgICAgIGlmIChnbG9iYWxMb2dpYy5pc1RhcmdldEluQXJyYXkoY29vcmRzQXJyLCBjb29yZCkpIHJldHVybiBjb29yZHNJbmZvO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByb3RhdGVTaGlwcyA9IChjb29yZHMsIHVzZWRDb29yZHMsIGluZGV4LCByZXN0YXJ0R3JpZCwgY3VycmVudERPTSkgPT4ge1xuICAgIGNvbnN0IGNsZWFuQ29vcmRzID0gY29vcmRzLmZpbHRlcigoZWwpID0+IHR5cGVvZiBlbFswXSA9PT0gXCJvYmplY3RcIik7IC8vIHdlIGZpbHRlciB0aGUgb25lLWNvb3JkaW5hdGUgc2hpcHMsIGJlY2F1c2UgdGhleSBkb24ndCBuZWVkIHJvdGF0aW9uXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRzKGNsZWFuQ29vcmRzKTtcblxuICAgIGNvbnN0IHJvdGF0ZSA9IChlKSA9PiB7XG4gICAgICBjb25zdCBjbGlja2VkQ29vcmQgPSBlLnRhcmdldC5jbGFzc05hbWU7XG5cbiAgICAgIGNvbnN0IGZ1bGxBcnJheSA9IGdldFNoaXBDb29yZHMoXG4gICAgICAgIGdsb2JhbExvZ2ljLmNsYXNzVG9BcnJheShjbGlja2VkQ29vcmQpLFxuICAgICAgICBjbGVhbkNvb3Jkc1xuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2hpcEluZm8gPSB7XG4gICAgICAgIGNvb3JkczogZnVsbEFycmF5WzBdLFxuICAgICAgICBmaXJzdENvb3JkOiBmdWxsQXJyYXlbMF1bMF0sXG4gICAgICAgIGNvb3Jkc1Bvc2l0aW9uOiBmdWxsQXJyYXlbMV0sXG4gICAgICB9O1xuXG4gICAgICBzaGlwSW5mby5jb29yZHMgPSByb3RhdGVDb29yZHMoc2hpcEluZm8pO1xuXG4gICAgICBpZiAodmFsaWRhdGVSb3RhdGlvbihzaGlwSW5mbywgdXNlZENvb3JkcykgIT09IHVzZWRDb29yZHMpIHtcbiAgICAgICAgLy8gdGhpcyBtZWFucyB0aGF0IHRoZSB1c2VkIGNvb3JkcyB3ZXJlIGNoYW5nZWQsIHNvIGl0IHdhcyBhIHZhbGlkIHJvdGF0aW9uLlxuXG4gICAgICAgIGNvbnN0IGN1c3RvbWl6ZVNlY3Rpb24gPVxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJpbnB1dHMtY29udGFpbmVyXCIpWzBdOyAvLyBpZiBjdXN0b21pemUgc2VjdGlvbiBpcyB0cnVlLCBzZW5kIGl0IHRvIHJlc3RhcnRHcmlkIHRvIGtlZXAgaXQgb3Blbi5cbiAgICAgICAgY3VycmVudERPTS5kZWxldGVFbGVtZW50cygwKTsgLy8gZGVsZXRlIG9sZCBncmlkXG5cbiAgICAgICAgcmV0dXJuIHJlc3RhcnRHcmlkKFxuICAgICAgICAgIHJlcGxhY2VDb29yZHMoc2hpcEluZm8sIGNvb3JkcyksXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdmFsaWRhdGVSb3RhdGlvbihzaGlwSW5mbywgdXNlZENvb3JkcyksXG4gICAgICAgICAgY3VzdG9taXplU2VjdGlvblxuICAgICAgICApOyAvLyBnZW4gbmV3IGdyaWQgd2l0aCB0aGUgcm90YXRlZCBjb29yZC5cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cmlnZ2VySW52YWxpZFJUKGZ1bGxBcnJheVswXSk7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIHNlbGVjdCBldmVyeSBzaGlwLW9jY3VwaWVkIGNvb3JkXG4gICAgICBjb25zdCBlbGVtZW50Q2xhc3MgPSBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY29vcmRpbmF0ZXNbaV0pO1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZWxlbWVudENsYXNzKVtpbmRleF07XG4gICAgICBpZiAoZWxlbWVudCkgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm90YXRlKTtcbiAgICB9XG4gIH07XG5cbiAgLypcbiAgY29uc3QgZHJhZ0FuZERyb3AgPSAoZWxlbWVudHMpID0+IHtcbiAgICBjb25zdCBjb29yZExpc3QgPSBmbGF0Q29vcmRzKGVsZW1lbnRzKTtcblxuICAgIGNvbnN0IGRyYWdTdGFydCA9IChlKSA9PiB7fTtcblxuICAgIGNvbnN0IGRyYWdEcm9wID0gKGUpID0+IHt9O1xuXG4gICAgLy8gYWRkIGV2ZW50IGxpc3RlbmVycyB0byBlYWNoIGVsZW1lbnQuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb3JkTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudE5hbWUgPSBnbG9iYWxMb2dpYy5jb29yZFRvQ2xhc3MoY29vcmRMaXN0W2ldKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGVsZW1lbnROYW1lKVswXTtcblxuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgZHJhZ1N0YXJ0KTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBkcmFnRHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICAqL1xuXG4gIGNvbnN0IHJhbmRvbWl6ZUdyaWQgPSAoaW5kZXgsIGdlbkluaXRpYWxFbGVtZW50cywgY3VycmVudERPTSkgPT4ge1xuICAgIGN1cnJlbnRET00uZGVsZXRlRWxlbWVudHMoaW5kZXgpO1xuICAgIGNvbnN0IGdlblJhbmRvbUNvb3JkcyA9IERPTUxvZ2ljLmdlbkNvb3JkcygpLmdlbkJhdHRsZXNoaXBzKCk7XG4gICAgY29uc3QgbmV3UmFuZG9tQ29vcmRzID0gZ2VuUmFuZG9tQ29vcmRzLmNvb3JkcztcbiAgICBjb25zdCBuZXdVc2VkQ29vcmRzID0gZ2VuUmFuZG9tQ29vcmRzLnVzZWRDb29yZHM7XG4gICAgZ2VuSW5pdGlhbEVsZW1lbnRzKG5ld1JhbmRvbUNvb3JkcywgZmFsc2UsIG5ld1VzZWRDb29yZHMpO1xuICB9O1xuXG4gIGNvbnN0IGNoYW5nZVNoaXBDb2xvciA9IChjdXJyZW50U2hpcCwgY29sb3IpID0+IHtcbiAgICBsZXQgY3VycmVudENvb3JkO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudFNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0eXBlb2YgY3VycmVudFNoaXBbaV0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgIC8vIG9uZS1jb29yZGluYXRlIHNoaXAuXG4gICAgICAgIGN1cnJlbnRDb29yZCA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjdXJyZW50U2hpcCk7XG4gICAgICBlbHNlIGN1cnJlbnRDb29yZCA9IGdsb2JhbExvZ2ljLmNvb3JkVG9DbGFzcyhjdXJyZW50U2hpcFtpXSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjdXJyZW50Q29vcmQpWzBdO1xuICAgICAgY3VycmVudEVsZW1lbnQuc3R5bGUuYm9yZGVyQ29sb3IgPSBjb2xvcjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlRXZlcnlTaGlwQ29sb3IgPSAoc2hpcHNDb29yZHMsIGNvbG9yKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFNoaXBzID0gc2hpcHNDb29yZHM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTaGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY3VycmVudFNoaXAgPSBjdXJyZW50U2hpcHNbaV07XG4gICAgICBjaGFuZ2VTaGlwQ29sb3IoY3VycmVudFNoaXAsIGNvbG9yKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2V0U2VsZWN0U2hpcEluZGV4ID0gKCkgPT5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LXNoaXBzXCIpWzBdLnNlbGVjdGVkSW5kZXg7XG5cbiAgY29uc3QgaGlnaGxpZ2h0Q3VycmVudFNoaXAgPSAoc2hpcEluZGV4LCBzaGlwc0Nvb3JkcykgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRTaGlwID0gc2hpcHNDb29yZHNbc2hpcEluZGV4XTtcblxuICAgIGNoYW5nZUV2ZXJ5U2hpcENvbG9yKHNoaXBzQ29vcmRzLCBcImdyZWVuXCIpOyAvLyByZXN0YXJ0IHByZXZpb3VzbHkgaGlnaGxpZ2h0ZWQgc2hpcHMuXG4gICAgY2hhbmdlU2hpcENvbG9yKGN1cnJlbnRTaGlwLCBcInJnYigzNywgMjE0LCAxOTkpXCIpO1xuXG4gICAgcmV0dXJuIGN1cnJlbnRTaGlwO1xuICB9O1xuXG4gIGNvbnN0IHRyaWdnZXJDdXJyZW50Q29vcmQgPSAoeFBvcywgeVBvcywgY29vcmRzLCBjdXJyZW50RE9NKSA9PiB7XG4gICAgY29uc3QgY29vcmRDbGFzcyA9IFtOdW1iZXIoeFBvcyksIE51bWJlcih5UG9zKV07XG4gICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkLXdyYXBwZXJcIilbMF07XG5cbiAgICAvLyByZXN0YXJ0IHByZXZpb3VzIHRyaWdnZXJlZCBjb29yZHMsIGJ5IHJlc3RhcnRpbmcgdGhlIGdyaWQuXG4gICAgY3VycmVudERPTS5kZWxldGVTaG93bkdyaWQoMCk7XG4gICAgY3VycmVudERPTS5nZW5HcmlkT25seSgxLCBncmlkQ29udGFpbmVyLCBjb29yZHMpO1xuICAgIGhpZ2hsaWdodEN1cnJlbnRTaGlwKGdldFNlbGVjdFNoaXBJbmRleCgpLCBjb29yZHMpO1xuXG4gICAgY2hhbmdlU2hpcENvbG9yKGNvb3JkQ2xhc3MsIFwib3JhbmdlXCIpO1xuXG4gICAgcmV0dXJuIGNvb3JkQ2xhc3M7XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlSW5pdGlhbENvb3JkID0gKFxuICAgIHNoaXBJbmRleCxcbiAgICBjb29yZCxcbiAgICBzaGlwc0Nvb3JkcyxcbiAgICB1c2VkQ29vcmRzLFxuICAgIHJlc3RhcnRHcmlkLFxuICAgIGN1cnJlbnRET01cbiAgKSA9PiB7XG4gICAgY29uc3Qgc2hpcEluZm8gPSB7XG4gICAgICBjb29yZHM6IHNoaXBzQ29vcmRzW3NoaXBJbmRleF0sXG4gICAgICBmaXJzdENvb3JkOiBjb29yZCxcbiAgICAgIGNvb3Jkc1Bvc2l0aW9uOiBzaGlwSW5kZXgsXG4gICAgfTtcblxuICAgIGNvbnN0IGdlbmVyYXRlQ29vcmRzID0gcm90YXRlQ29vcmRzKHNoaXBJbmZvLCB0cnVlKTsgLy8gZ2VuZXJhdGUgdGhlIGNvb3Jkcywgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgZGlmZmVyZW50IGluaXRpYWxDb29yZC5cblxuICAgIC8vIHVwZGF0ZSBzaGlwSW5mbyB3aXRoIHRoZSBuZXcgc2hpcCBjb29yZHMuXG5cbiAgICBjb25zdCB1cGRhdGVkU2hpcEluZm8gPSB7XG4gICAgICBjb29yZHM6IGdlbmVyYXRlQ29vcmRzLFxuICAgICAgZmlyc3RDb29yZDogZ2VuZXJhdGVDb29yZHNbMF0sXG4gICAgICBjb29yZHNQb3NpdGlvbjogc2hpcEluZGV4LFxuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVHcmlkID0gKHNoaXBPYmosIHVzZWRDb29yZHNBcnIsIGNvb3Jkc0FyciwgdXNlZERPTSkgPT4ge1xuICAgICAgaWYgKHZhbGlkYXRlUm90YXRpb24oc2hpcE9iaiwgdXNlZENvb3Jkc0FycikgIT09IHVzZWRDb29yZHNBcnIpIHtcbiAgICAgICAgdXNlZERPTS5kZWxldGVFbGVtZW50cygwKTsgLy8gZGVsZXRlIG9sZCBncmlkXG4gICAgICAgIHJldHVybiByZXN0YXJ0R3JpZChcbiAgICAgICAgICAvLyBnZW4gbmV3IGdyaWQgd2l0aCB0aGUgY2hhbmdlZCBjb29yZC5cbiAgICAgICAgICByZXBsYWNlQ29vcmRzKHNoaXBPYmosIGNvb3Jkc0FyciksXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdmFsaWRhdGVSb3RhdGlvbihzaGlwT2JqLCB1c2VkQ29vcmRzQXJyKSxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2Ygc2hpcHNDb29yZHNbc2hpcEluZGV4XVswXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgLy8gd2hlbiBpdCBpcyBhIG9uZS1jb29yZGluYXRlIHNoaXAuXG4gICAgICBzaGlwSW5mby5jb29yZHMgPSBzaGlwSW5mby5maXJzdENvb3JkOyAvLyBjaGFuZ2UgdGhlIGNvb3JkIHRvIGJlIGVxdWFsIHRvIHRoZSB3YW50ZWQgY29vcmQuXG4gICAgICB1cGRhdGVHcmlkKHNoaXBJbmZvLCB1c2VkQ29vcmRzLCBzaGlwc0Nvb3JkcywgY3VycmVudERPTSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZUdyaWQodXBkYXRlZFNoaXBJbmZvLCB1c2VkQ29vcmRzLCBzaGlwc0Nvb3JkcywgY3VycmVudERPTSk7XG4gICAgfVxuICAgIHJldHVybiB7IHVwZGF0ZUdyaWQgfTtcbiAgfTtcblxuICBjb25zdCBjdXN0b21pemVTZXR1cCA9IChcbiAgICBjb29yZHMsXG4gICAgdXNlZENvb3JkcyxcbiAgICBnZW5Jbml0aWFsRWxlbWVudHMsXG4gICAgY3VycmVudERPTVxuICApID0+IHtcbiAgICBjb25zdCBjaGFuZ2VDb29yZEJ1dHRvbiA9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYXBwbHktY29vcmRzXCIpWzBdO1xuICAgIGlmIChjaGFuZ2VDb29yZEJ1dHRvbilcbiAgICAgIGNoYW5nZUNvb3JkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxDb29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb29yZHMtaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IGZ1bGxDb29yZCA9IFtcbiAgICAgICAgICBOdW1iZXIoaW5pdGlhbENvb3JkWzBdLnZhbHVlKSxcbiAgICAgICAgICBOdW1iZXIoaW5pdGlhbENvb3JkWzFdLnZhbHVlKSxcbiAgICAgICAgXTtcbiAgICAgICAgY2hhbmdlSW5pdGlhbENvb3JkKFxuICAgICAgICAgIGdldFNlbGVjdFNoaXBJbmRleCgpLFxuICAgICAgICAgIGZ1bGxDb29yZCxcbiAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgdXNlZENvb3JkcyxcbiAgICAgICAgICBnZW5Jbml0aWFsRWxlbWVudHMsXG4gICAgICAgICAgY3VycmVudERPTVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICBjb25zdCBzZWxlY3RTaGlwcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzZWxlY3Qtc2hpcHNcIilbMF07XG4gICAgY2hhbmdlU2hpcENvbG9yKGNvb3Jkc1swXSwgXCJyZ2IoMzcsIDIxNCwgMTk5KVwiKTsgLy8gaGlnaGxpZ2h0IGRlZmF1bHQgc2VsZWN0ZWQgc2hpcC5cbiAgICBpZiAoc2VsZWN0U2hpcHMpXG4gICAgICBzZWxlY3RTaGlwcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50U2hpcEluZGV4ID1cbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0LXNoaXBzXCIpWzBdLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgIGhpZ2hsaWdodEN1cnJlbnRTaGlwKGN1cnJlbnRTaGlwSW5kZXgsIGNvb3Jkcyk7XG4gICAgICB9KTtcblxuICAgIGNvbnN0IGNvb3JkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29vcmRzLWlucHV0XCIpWzBdO1xuICAgIGNvbnN0IGNvb3JkSW5wdXQxID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvb3Jkcy1pbnB1dFwiKVsxXTtcblxuICAgIGNvb3JkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGlmIChjb29yZElucHV0LnZhbHVlICYmIGNvb3JkSW5wdXQxLnZhbHVlKVxuICAgICAgICB0cmlnZ2VyQ3VycmVudENvb3JkKFxuICAgICAgICAgIGNvb3JkSW5wdXQudmFsdWUsXG4gICAgICAgICAgY29vcmRJbnB1dDEudmFsdWUsXG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIGN1cnJlbnRET01cbiAgICAgICAgKTtcbiAgICB9KTtcbiAgICBjb29yZElucHV0MS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgaWYgKGNvb3JkSW5wdXQudmFsdWUgJiYgY29vcmRJbnB1dDEudmFsdWUpXG4gICAgICAgIHRyaWdnZXJDdXJyZW50Q29vcmQoXG4gICAgICAgICAgY29vcmRJbnB1dC52YWx1ZSxcbiAgICAgICAgICBjb29yZElucHV0MS52YWx1ZSxcbiAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgY3VycmVudERPTVxuICAgICAgICApO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNldHVwRXZlbnRMaXN0ZW5lcnMgPSAoXG4gICAgY29vcmRzLFxuICAgIHNhbWVDb29yZHMsXG4gICAgdXNlZENvb3JkcyxcbiAgICBjdXJyZW50RE9NLFxuICAgIGN1c3RvbWl6ZU9wZW4sXG4gICAgZ2VuSW5pdGlhbEVsZW1lbnRzLFxuICAgIGdhbWVNb2RlXG4gICkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInN0YXJ0LWJ1dHRvblwiKVswXTtcbiAgICBjb25zdCByYW5kb21pemVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicmFuZG9tLWJ1dHRvblwiKVswXTtcbiAgICBjb25zdCBjdXN0b21pemVCdXR0b24gPVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImN1c3RvbWl6ZS1idXR0b25cIilbMF07XG5cbiAgICBpZiAocmFuZG9taXplQnV0dG9uKVxuICAgICAgcmFuZG9taXplQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHJhbmRvbWl6ZUdyaWQoMCwgZ2VuSW5pdGlhbEVsZW1lbnRzLCBjdXJyZW50RE9NKTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGN1c3RvbWl6ZUJ1dHRvbikge1xuICAgICAgY3VzdG9taXplQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGN1cnJlbnRET00uZ2VuQ29vcmRJbnB1dHMoKTtcbiAgICAgICAgICBjdXN0b21pemVTZXR1cChjb29yZHMsIHVzZWRDb29yZHMsIGdlbkluaXRpYWxFbGVtZW50cywgY3VycmVudERPTSk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICApO1xuICAgICAgaWYgKGN1c3RvbWl6ZU9wZW4pIGN1c3RvbWl6ZUJ1dHRvbi5jbGljaygpO1xuICAgIH1cblxuICAgIGlmIChzdGFydEJ1dHRvbilcbiAgICAgIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGdhbWVNb2RlKGNvb3Jkcywgc2FtZUNvb3JkcywgY3VycmVudERPTSk7XG4gICAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0R2FtZSxcbiAgICBkaXNwbGF5R3JpZCxcbiAgICBnZW5ET01FbGVtZW50cyxcbiAgICBlbmRHYW1lLFxuICAgIGNyZWF0ZU1vZGFsLFxuICAgIGdlbkNvb3JkcyxcbiAgICByb3RhdGVTaGlwcyxcbiAgICByb3RhdGVDb29yZHMsXG4gICAgY2hhbmdlSW5pdGlhbENvb3JkLFxuICAgIHNldHVwRXZlbnRMaXN0ZW5lcnMsXG4gIH07XG59KSgpO1xuXG5jb25zdCBHYW1lTG9vcCA9ICgoKSA9PiB7XG4gIGNvbnN0IGdhbWVUdXJucyA9IChwbGF5ZXIxLCBwbGF5ZXIyKSA9PiB7XG4gICAgY29uc3QgcGxheWVyMVNoaXBzID0gcGxheWVyMS5wbGF5ZXJTaGlwcztcblxuICAgIGNvbnN0IHBsYXllcjJTaGlwcyA9IHBsYXllcjIuY3B1U2hpcHM7XG5cbiAgICBjb25zdCB0dXJuc0xvZ2ljID0gKCkgPT4ge1xuICAgICAgbGV0IGlzR2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGNwdUF0dGFjayA9IHBsYXllcjIuYXR0YWNrUGxheWVyKCk7XG5cbiAgICAgIGlmIChjcHVBdHRhY2spXG5cbiAgICAgICAgaWYgKHBsYXllcjEucGxheWVyQm9hcmQuY2hlY2tTdW5rKHBsYXllcjFTaGlwcykpIHtcbiAgICAgICAgICBET01Mb2dpYy5lbmRHYW1lKCk7XG4gICAgICAgICAgRE9NTG9naWMuY3JlYXRlTW9kYWwoXCJQbGF5ZXIyXCIsIHRydWUpO1xuICAgICAgICAgIGlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgIGlmIChwbGF5ZXIyLmNwdUJvYXJkLmNoZWNrU3VuayhwbGF5ZXIyU2hpcHMpKSB7XG4gICAgICAgIERPTUxvZ2ljLmVuZEdhbWUoKTtcbiAgICAgICAgRE9NTG9naWMuY3JlYXRlTW9kYWwoXCJQbGF5ZXIxXCIpO1xuICAgICAgICBpc0dhbWVPdmVyID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzR2FtZU92ZXI7XG4gICAgfTtcblxuICAgIC8vIHJlY2VpdmUgY29vcmRzLCBncmlkIGNvbnRhaW5lcnMgYW5kIHN0YXJ0IHRoZSBnYW1lLlxuXG4gICAgY29uc3QgdHVybkxvb3AgPSAodG9BdHRhY2tHcmlkKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvQXR0YWNrR3JpZC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0b0F0dGFja0dyaWQuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICB0dXJuc0xvZ2ljKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4geyB0dXJuTG9vcCB9O1xuICB9O1xuXG4gIGNvbnN0IHNpbmdsZVBsYXllciA9IChjb29yZHMsIHNhbWVDb29yZHMsIGN1cnJlbnRET00pID0+IHtcbiAgICBsZXQgbmV3R2FtZTtcblxuICAgIGlmIChjdXJyZW50RE9NKSB7XG4gICAgICBjdXJyZW50RE9NLmRlbGV0ZUVsZW1lbnRzKDApOyAvLyBjbGVhciBwcmV2aW91cyBlbGVtZW50c1xuXG4gICAgICBpZiAoc2FtZUNvb3JkcyAhPT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBjcHVDb29yZHMgPSBET01Mb2dpYy5nZW5Db29yZHMoKS5nZW5CYXR0bGVzaGlwcygpLmNvb3JkczsgLy8gZ2VuIHJhbmRvbSBjb29yZHMuXG4gICAgICAgIGlmIChjdXJyZW50RE9NKVxuICAgICAgICAgIG5ld0dhbWUgPSBET01Mb2dpYy5zdGFydEdhbWUoXG4gICAgICAgICAgICBjdXJyZW50RE9NLmdlbkdyaWQoMSwgY29vcmRzKSxcbiAgICAgICAgICAgIGN1cnJlbnRET00uZ2VuR3JpZCgyKSxcbiAgICAgICAgICAgIGNvb3JkcyxcbiAgICAgICAgICAgIGNwdUNvb3Jkc1xuICAgICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdHYW1lID0gRE9NTG9naWMuc3RhcnRHYW1lKFxuICAgICAgICAgIGN1cnJlbnRET00uZ2VuR3JpZCgxLCBjb29yZHMpLFxuICAgICAgICAgIGN1cnJlbnRET00uZ2VuR3JpZCgyKSxcbiAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgY29vcmRzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYXllck9iaiA9IG5ld0dhbWUuY3VycmVudEdhbWUuUGxheWVyO1xuICAgICAgY29uc3QgY3B1T2JqID0gbmV3R2FtZS5jdXJyZW50R2FtZS5jcHVQbGF5ZXI7XG4gICAgICBjb25zdCBjdXJyZW50VHVybiA9IGdhbWVUdXJucyhwbGF5ZXJPYmosIGNwdU9iaiwgMCk7XG4gICAgICBjb25zdCBjcHVHcmlkID0gbmV3R2FtZS5ncmlkQ29udGFpbmVyMjtcblxuICAgICAgLy8gdHJpZ2dlciB0dXJucyBsb2dpY1xuICAgICAgZ2FtZVR1cm5zKHBsYXllck9iaiwgY3B1T2JqKS50dXJuTG9vcChjcHVHcmlkKTtcblxuICAgICAgcmV0dXJuIHsgcGxheWVyT2JqLCBjcHVPYmosIGN1cnJlbnRUdXJuIH07XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdlbkluaXRpYWxFbGVtZW50cyA9IChcbiAgICBjb29yZHMsXG4gICAgc2FtZUNvb3JkcyxcbiAgICB1c2VkQ29vcmRzLFxuICAgIGN1c3RvbWl6ZU9wZW5cbiAgKSA9PiB7XG4gICAgY29uc3QgY3VycmVudERPTSA9IERPTUxvZ2ljLmdlbkRPTUVsZW1lbnRzKCk7XG5cbiAgICBjdXJyZW50RE9NLmdlbkdyaWQoMSwgY29vcmRzKTtcbiAgICBjdXJyZW50RE9NLmdlbkJ1dHRvbnMoKTtcbiAgICBET01Mb2dpYy5yb3RhdGVTaGlwcyhjb29yZHMsIHVzZWRDb29yZHMsIDAsIGdlbkluaXRpYWxFbGVtZW50cywgY3VycmVudERPTSk7XG4gICAgRE9NTG9naWMuc2V0dXBFdmVudExpc3RlbmVycyhcbiAgICAgIGNvb3JkcyxcbiAgICAgIHNhbWVDb29yZHMsXG4gICAgICB1c2VkQ29vcmRzLFxuICAgICAgY3VycmVudERPTSxcbiAgICAgIGN1c3RvbWl6ZU9wZW4sXG4gICAgICBnZW5Jbml0aWFsRWxlbWVudHMsXG4gICAgICBzaW5nbGVQbGF5ZXJcbiAgICApO1xuICAgIC8vIGRyYWdBbmREcm9wKGNvb3Jkcyk7XG5cbiAgICByZXR1cm4geyBjdXJyZW50RE9NIH07XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBET00gPSAoKSA9PiB7XG4gICAgY29uc3QgZ2VuUmFuZG9tQ29vcmRzID0gRE9NTG9naWMuZ2VuQ29vcmRzKCkuZ2VuQmF0dGxlc2hpcHMoKTtcbiAgICBjb25zdCByYW5kb21Db29yZHMgPSBnZW5SYW5kb21Db29yZHMuY29vcmRzO1xuICAgIGNvbnN0IHsgdXNlZENvb3JkcyB9ID0gZ2VuUmFuZG9tQ29vcmRzO1xuXG4gICAgZ2VuSW5pdGlhbEVsZW1lbnRzKHJhbmRvbUNvb3JkcywgZmFsc2UsIHVzZWRDb29yZHMpO1xuXG4gICAgcmV0dXJuIHsgdXNlZENvb3JkcyB9O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2luZ2xlUGxheWVyLFxuICAgIHNldHVwRE9NLFxuICAgIGdlbkluaXRpYWxFbGVtZW50cyxcbiAgfTtcbn0pKCk7XG5cbkdhbWVMb29wLnNldHVwRE9NKCk7XG5cbmV4cG9ydCB7IG1haW5PYmplY3RzLCBwbGF5ZXJMb2dpYywgR2FtZSwgRE9NTG9naWMsIEdhbWVMb29wLCBnbG9iYWxMb2dpYyB9OyJdLCJuYW1lcyI6WyJnbG9iYWxMb2dpYyIsImNvb3JkVG9DbGFzcyIsImFyciIsInNsaWNlIiwiY2hhbmdlQ29vcmRDb2xvciIsImNsYXNzTmFtZSIsImdyaWROdW1iZXIiLCJjb2xvciIsImN1cnJlbnRDb29yZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInN0eWxlIiwiYm9yZGVyIiwiaXNUYXJnZXRJbkFycmF5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJKU09OIiwic3RyaW5naWZ5IiwiaSIsImxlbmd0aCIsImVsZW1lbnQiLCJpbmRpY2F0ZVN1bmsiLCJzaGlwIiwiY3VycmVudENvb3JkcyIsImNsYXNzVG9BcnJheSIsImNsYXNzQ29vcmQiLCJhcnJheUNvb3JkIiwieCIsInkiLCJwdXNoIiwiTnVtYmVyIiwibWFpbk9iamVjdHMiLCJTaGlwIiwibGVuZ3RoTnVtYmVyIiwiaGl0c051bWJlciIsImNvb3JkcyIsInNoaXBIaXRzIiwic2hpcExlbmd0aCIsImlzU3VuayIsImhpdCIsImN1cnJlbnRIaXRzIiwiR2FtZWJvYXJkIiwicmVjZWl2ZWRBdHRhY2tzIiwic3VjY2Vzc0F0dGFja3MiLCJyZWNlaXZlQXR0YWNrIiwidGFyZ2V0Q29yZHMiLCJwbGF5ZXJTaGlwcyIsImN1cnJlbnRTaGlwcyIsIk9iamVjdCIsImVudHJpZXMiLCJjb29yZGluYXRlcyIsInN1Y2Nlc3MiLCJzaGlwQ29yZHMiLCJzaGlwTmFtZSIsImNhcnJpZXIiLCJiYXR0bGVTaGlwIiwiYmF0dGxlU2hpcDEiLCJjcnVpc2VyIiwiY3J1aXNlcjEiLCJjcnVpc2VyMiIsImRlc3Ryb3llciIsImRlc3Ryb3llcjEiLCJkZXN0cm95ZXIyIiwiZGVzdHJveWVyMyIsImRlcGxveVNoaXBzIiwiY2FycmllckNvcmRzIiwiYmF0dGxlU2hpcENvcmRzIiwiYmF0dGxlU2hpcDFDb3JkcyIsImNydWlzZXJDb3JkcyIsImNydWlzZXIxQ29yZHMiLCJjcnVpc2VyMkNvcmRzIiwiZGVzdHJveWVyQ29yZHMiLCJkZXN0cm95ZXIxQ29yZHMiLCJkZXN0cm95ZXIyQ29yZHMiLCJkZXN0cm95ZXIzQ29yZHMiLCJjaGVja1N1bmsiLCJzaGlwcyIsInBsYXllckxvZ2ljIiwidmlzdWFsSW5kaWNhdG9ycyIsImNvb3JkIiwid2FzU3VjY2Vzc2Z1bCIsImluZGV4IiwiY3VycmVudE5vZGUiLCJ0ZXh0Q29udGVudCIsInJlbW92ZU5vZGVMaXN0ZW5lcnMiLCJjb29yZGluYXRlIiwicmVwbGFjZVdpdGgiLCJjbG9uZU5vZGUiLCJ2YWxpZGF0ZUNvb3JkcyIsInZhbGlkYXRlZENvb3JkcyIsInJldHVyblNpZGVzIiwibm9kZUNvb3JkIiwidXAiLCJkb3duIiwicmlnaHQiLCJsZWZ0IiwiYXR0YWNrQXJvdW5kIiwibm9kZUNvb3JkcyIsImF0dGFja0Z1bmN0aW9uIiwiYXJvdW5kQ29vcmRzIiwiZmxhdEFyb3VuZENvb3JkcyIsImZsYXQiLCJyZXR1cm5Db3JuZXJzIiwibm9kZSIsImNvcm5lcnMiLCJjb3JuZXIxIiwiY29ybmVyMiIsImNvcm5lcjMiLCJjb3JuZXI0IiwiYXR0YWNrQ29ybmVycyIsInZhbGlkQ29ybmVycyIsIlBsYXllciIsIm5hbWUiLCJzaGlwc0Nvb3JkcyIsInBsYXllck5hbWUiLCJwbGF5ZXJDb29yZHMiLCJwbGF5ZXJCb2FyZCIsInJlY2VpdmVkQXR0YWNrIiwiY3B1UGxheWVyIiwiaHVtYW5QbGF5ZXIiLCJzaGlwc0NvcmRzIiwicml2YWxQbGF5ZXIiLCJjcHVDb29yZHMiLCJjcHVCb2FyZCIsImNwdVNoaXBzIiwiY3B1SGl0cyIsInJpdmFsSGl0cyIsInJpdmFsU3VjY2Vzc0hpdHMiLCJhdHRhY2tQbGF5ZXIiLCJpZ25vcmVDb29yZHMiLCJyYW5kb21JbnQiLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21Db29yZHMiLCJhdHRhY2tMb2dpYyIsInJhbmRvbUNvb3JkIiwicG9zc2libGVBdHRhY2tzIiwiZnVsbENvb3JkcyIsIm5vUmVwZWF0IiwidXNlZENvb3JkcyIsImZpbHRlciIsInVuZGVmaW5lZCIsIm5vdFJlcGVhdGVkQ29vcmRzIiwidHJ5Q2xvc2VBdHRhY2siLCJHYW1lIiwiRE9NTG9naWMiLCJVSUxvZ2ljIiwibm9kZXMiLCJnYW1lSW5mbyIsInBsYXllcjFDb29yZHMiLCJwbGF5ZXIyQ29vcmRzIiwiYXR0YWNrQ3B1IiwiYXR0YWNrT25DbGljayIsInNoaXBDb29yZHMiLCJ2YWx1ZXMiLCJtaXNzZWRBdHRhY2tPbkNsaWNrIiwiZGV0ZWN0QXR0YWNrcyIsImUiLCJwYXJlbnRDbGFzcyIsInBhcmVudEVsZW1lbnQiLCJub2RlQ2xhc3MiLCJjbGVhbkNvb3JkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwiZmxhdENvb3JkcyIsImVsZW1lbnRzIiwibXVsdGlwbGVDb29yZFNoaXBzIiwiZWwiLCJvbmVDb29yZFNoaXBzIiwiY29uY2F0Iiwic3Vycm91bmRDb29yZHMiLCJnZXRTdXJydW9uZHMiLCJjdXJyZW50U3Vycm91bmRzIiwic3Vycm91bmQiLCJTZXQiLCJtYXAiLCJwYXJzZSIsInJvdGF0ZUNvb3JkcyIsInN3YXBPcmllbnRhdGlvbiIsInlQb3MiLCJ4UG9zIiwibmV3QXJyYXkiLCJmaXJzdENvb3JkIiwibmV3Q29vcmQiLCJyZXBsYWNlQ29vcmRzIiwic2hpcEluZm8iLCJjb29yZHNDb3B5Iiwic3BsaWNlIiwiY29vcmRzUG9zaXRpb24iLCJ2YWxpZGF0ZVJvdGF0aW9uIiwiaXNWYWxpZCIsIm9jY3VwaWVkQ29vcmRzIiwidXNlZENvb3Jkc0NvcHkiLCJmbGF0VXNlZENvb3JkcyIsImNvb3Jkc1N1cnJvdW5kIiwiY2hhbmdlU2hpcENvbG9yIiwiY3VycmVudFNoaXAiLCJib3JkZXJDb2xvciIsImdldFNlbGVjdFNoaXBJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJoaWdobGlnaHRDdXJyZW50U2hpcCIsInNoaXBJbmRleCIsImNoYW5nZUV2ZXJ5U2hpcENvbG9yIiwidHJpZ2dlckN1cnJlbnRDb29yZCIsImN1cnJlbnRET00iLCJjb29yZENsYXNzIiwiZ3JpZENvbnRhaW5lciIsImRlbGV0ZVNob3duR3JpZCIsImdlbkdyaWRPbmx5IiwiY2hhbmdlSW5pdGlhbENvb3JkIiwicmVzdGFydEdyaWQiLCJnZW5lcmF0ZUNvb3JkcyIsInVwZGF0ZWRTaGlwSW5mbyIsInVwZGF0ZUdyaWQiLCJzaGlwT2JqIiwidXNlZENvb3Jkc0FyciIsImNvb3Jkc0FyciIsInVzZWRET00iLCJkZWxldGVFbGVtZW50cyIsInN0YXJ0R2FtZSIsImdyaWRDb250YWluZXIxIiwiZ3JpZENvbnRhaW5lcjIiLCJjdXJyZW50R2FtZSIsImNoaWxkTm9kZXMiLCJkaXNwbGF5R3JpZCIsImdyaWQxIiwiZ3JpZDIiLCJzaXplIiwicmVjdXJzaXZlIiwiZ3JpZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ3JpZEVsZW1lbnQyIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVHcmlkIiwiZ2VuRE9NRWxlbWVudHMiLCJwbGF5ZXJJbmRleCIsImNvbnRhaW5lciIsImdyaWQiLCJvbmVEaW1lbnNpb25Db29yZHMiLCJzaG93U2hpcHMiLCJnZW5HcmlkIiwibWFpbkNvbnRhaW5lciIsIm1haW4iLCJxdWVyeVNlbGVjdG9yIiwiZ3JpZHNDb250YWluZXIiLCJncmlkV3JhcHBlciIsInhDb250YWluZXIiLCJ5Q29udGFpbmVyIiwiZ3JpZEluZGljYXRvcnNYIiwiZ3JpZEluZGljYXRvcnNZIiwiY2xhc3NMaXN0IiwiYWRkIiwiZWxlbWVudDIiLCJnZW5JbmRpY2F0b3JzIiwicmVtb3ZlIiwiZ2VuQnV0dG9ucyIsImJ1dHRvbldyYXBwZXIiLCJnZW5CdXR0b25XcmFwcGVyIiwicmFuZG9tQnV0dG9uIiwiYnV0dG9uQ29udGFpbmVyIiwiZ2VuUmFuZG9taXplQnV0dG9uIiwic3RhcnRCdXR0b24iLCJnZW5TdGFydEJ1dHRvbiIsImN1c3RvbWl6ZUJ1dHRvbiIsImdlbkN1c3RvbWl6ZUJ1dHRvbiIsImdlbkNvb3JkSW5wdXRzIiwiaW5wdXRUaXRsZSIsImh0bWxGb3IiLCJzZWxlY3RFbGVtZW50IiwiaW5wdXRXcmFwcGVyIiwiaW5wdXQxIiwiaW5wdXRUZXh0IiwiaW5wdXQyIiwic3VibWl0QnV0dG9uIiwib3B0aW9uMSIsInZhbHVlIiwib3B0aW9uMiIsIm9wdGlvbjMiLCJvcHRpb240Iiwib3B0aW9uNSIsIm9wdGlvbjYiLCJvcHRpb243Iiwib3B0aW9uOCIsIm9wdGlvbjkiLCJvcHRpb24xMCIsInJlZ0V4cCIsInZhbGlkYXRlSW5wdXQiLCJldmVudCIsImtleSIsIm1hdGNoIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXRBdHRyaWJ1dGUiLCJzaG93bkdyaWQiLCJlbmRHYW1lIiwicGxheWVyMUdyaWQiLCJwbGF5ZXIyR3JpZCIsImNyZWF0ZU1vZGFsIiwid2lubmVyIiwiY3B1V2luIiwiYm9keSIsIm1vZGFsIiwibW9kYWxUZXh0IiwicmVsb2FkR2FtZUJ1dHRvbiIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwic2hvd01vZGFsIiwiZ2VuQ29vcmRzIiwiZ2VuUmFuZG9tQ29vcmRzIiwib3JpZW50YXRpb24iLCJwcmV2aW91c0Nvb3JkcyIsInZlcnRpY2FsQ29vcmRzIiwiaG9yaXpvbnRhbENvb3JkcyIsImdlblNoaXBDb29yZCIsImludmFsaWRDb29yZHMiLCJnZW5Jbml0aWFsQ29vcmRzIiwiZ2VuQmF0dGxlc2hpcHMiLCJyb3RhdGVTaGlwcyIsInJvdGF0ZSIsImNsaWNrZWRDb29yZCIsImZ1bGxBcnJheSIsImNvb3Jkc0luZm8iLCJnZXRTaGlwQ29vcmRzIiwiY3VzdG9taXplU2VjdGlvbiIsImNvb3JkRWxlbWVudCIsInNldFRpbWVvdXQiLCJ0cmlnZ2VySW52YWxpZFJUIiwiZWxlbWVudENsYXNzIiwic2V0dXBFdmVudExpc3RlbmVycyIsInNhbWVDb29yZHMiLCJjdXN0b21pemVPcGVuIiwiZ2VuSW5pdGlhbEVsZW1lbnRzIiwiZ2FtZU1vZGUiLCJyYW5kb21pemVCdXR0b24iLCJyYW5kb21pemVHcmlkIiwiY2hhbmdlQ29vcmRCdXR0b24iLCJpbml0aWFsQ29vcmQiLCJmdWxsQ29vcmQiLCJzZWxlY3RTaGlwcyIsImN1cnJlbnRTaGlwSW5kZXgiLCJjb29yZElucHV0IiwiY29vcmRJbnB1dDEiLCJjdXN0b21pemVTZXR1cCIsImNsaWNrIiwiZ2FtZVR1cm5zIiwicGxheWVyMSIsInBsYXllcjIiLCJwbGF5ZXIxU2hpcHMiLCJwbGF5ZXIyU2hpcHMiLCJ0dXJuc0xvZ2ljIiwiaXNHYW1lT3ZlciIsInR1cm5Mb29wIiwidG9BdHRhY2tHcmlkIiwic2luZ2xlUGxheWVyIiwibmV3R2FtZSIsInBsYXllck9iaiIsImNwdU9iaiIsImN1cnJlbnRUdXJuIiwiY3B1R3JpZCIsInNldHVwRE9NIl0sInNvdXJjZVJvb3QiOiIifQ==